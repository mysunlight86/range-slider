!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist",i(i.s=3)}([function(e,t,i){var s=i(1),n=i(2);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};s(n,o);e.exports=n.locals||{}},function(e,t,i){"use strict";var s,n=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),r=[];function l(e){for(var t=-1,i=0;i<r.length;i++)if(r[i].identifier===e){t=i;break}return t}function a(e,t){for(var i={},s=[],n=0;n<e.length;n++){var o=e[n],a=t.base?o[0]+t.base:o[0],c=i[a]||0,h="".concat(a," ").concat(c);i[a]=c+1;var u=l(h),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(r[u].references++,r[u].updater(d)):r.push({identifier:h,updater:v(d,t),references:1}),s.push(h)}return s}function c(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var n=i.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var h,u=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function d(e,t,i,s){var n=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(t,n);else{var o=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function m(e,t,i){var s=i.css,n=i.media,o=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var f=null,p=0;function v(e,t){var i,s,n;if(t.singleton){var o=p++;i=f||(f=c(t)),s=d.bind(null,i,o,!1),n=d.bind(null,i,o,!0)}else i=c(t),s=m.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<i.length;s++){var n=l(i[s]);r[n].references--}for(var o=a(e,t),c=0;c<i.length;c++){var h=l(i[c]);0===r[h].references&&(r[h].updater(),r.splice(h,1))}i=o}}}},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);class s{constructor(e,t){this._elemId=e.slice(1),this._options=t}init(){this.lineElem=document.getElementById(this._elemId),this.thumbElem=document.createElement("DIV"),this.valueElem=document.createElement("DIV")}showSliderLine(){this.lineElem.classList.add("slider-body")}getPositionElement(e,t){return(t-this._options.min)*this.lineElem.offsetWidth/(this._options.max-this._options.min)-e.offsetWidth/2+"px"}fillSliderLine(e){this.lineElem.style.background=`linear-gradient(to right, red ${e}px, #e5e5e5 ${e}px)`}showSliderThumb(){this.thumbElem.classList.add("slider-thumb"),this.lineElem.append(this.thumbElem),console.log(this._options),this.thumbElem.style.left=this.getPositionElement(this.thumbElem,this._options.values[0]),this.fillSliderLine(Number(this.thumbElem.style.left.slice(0,-2)))}showSliderValue(){this.valueElem.classList.add("tip-value"),this.lineElem.append(this.valueElem),this.valueElem.textContent=""+Math.round((this.thumbElem.offsetLeft+this.thumbElem.offsetWidth/2-this.lineElem.offsetLeft)*(this._options.max-this._options.min)/this.lineElem.offsetWidth+this._options.min),this.valueElem.style.left=this.getPositionElement(this.valueElem,Number(this.valueElem.textContent))}}class n{communicate(e){this._selector=e.getSelector(),this._options=e.getData();const t=new s(this._selector,this._options);t.init(),t.showSliderLine(),t.showSliderThumb(),t.showSliderValue(),console.log("ModelObserver: Reacted to the event.")}}class o{constructor(){this.observers=[]}attach(e){this.observers.includes(e)&&console.log("Model: Presenter has been attached already."),console.log("Model: Attached a presenter."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);-1===t&&console.log("Subject: Nonexistent observer."),this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Model: Notifying observers...");for(const e of this.observers)e.communicate(this)}setData(e,t){this._min=e.min,this._max=e.max,this._step=e.step,this._kind=e.kind,this._isBasic=e.isBasic,this._values=e.values,this._selector=t,console.log("Model: My state has just changed"),this.notify()}getSelector(){return this._selector}getData(){return{min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values}}}class r{constructor(e,t){this._min=0,this._max=300,this._step=57,this._kind="horizontal",this._isBasic=!0,this._values=[this._step],this._selector=e,t&&(this._min=t.min?t.min:this._min,this._max=t.max?t.max:this._max,this._step=t.step?t.step:this._step,this._kind=t.kind?t.kind:this._kind,this._isBasic=t.isBasic?t.isBasic:this._isBasic,this._values=t.values?t.values:[this._step])}setData(){this._options={min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values}}init(){const e=new o,t=new n;e.attach(t),this.setData(),console.log(this._options),e.setData(this._options,this._selector)}}new r("#slider1").init();new r("#slider2",{min:40,step:60,max:245}).init();new r("#slider3",{values:[300]}).init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9wcmVzZW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwiVmlldyIsImVsZW1JZCIsInRoaXMiLCJfZWxlbUlkIiwic2xpY2UiLCJfb3B0aW9ucyIsImxpbmVFbGVtIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aHVtYkVsZW0iLCJ2YWx1ZUVsZW0iLCJjbGFzc0xpc3QiLCJhZGQiLCJlbGVtIiwidmFsIiwibWluIiwib2Zmc2V0V2lkdGgiLCJtYXgiLCJiYWNrZ3JvdW5kIiwiYXBwZW5kIiwiY29uc29sZSIsImxvZyIsImxlZnQiLCJnZXRQb3NpdGlvbkVsZW1lbnQiLCJ2YWx1ZXMiLCJmaWxsU2xpZGVyTGluZSIsIk51bWJlciIsInRleHRDb250ZW50IiwiTWF0aCIsInJvdW5kIiwib2Zmc2V0TGVmdCIsIm1vZGVsIiwiX3NlbGVjdG9yIiwiZ2V0U2VsZWN0b3IiLCJnZXREYXRhIiwidmlldyIsImluaXQiLCJzaG93U2xpZGVyTGluZSIsInNob3dTbGlkZXJUaHVtYiIsInNob3dTbGlkZXJWYWx1ZSIsIk1vZGVsIiwib2JzZXJ2ZXJzIiwib2JzZXJ2ZXIiLCJpbmNsdWRlcyIsIm9ic2VydmVySW5kZXgiLCJpbmRleE9mIiwiY29tbXVuaWNhdGUiLCJzZWxlY3RvciIsIl9taW4iLCJfbWF4IiwiX3N0ZXAiLCJzdGVwIiwiX2tpbmQiLCJraW5kIiwiX2lzQmFzaWMiLCJpc0Jhc2ljIiwiX3ZhbHVlcyIsIm5vdGlmeSIsInByZXNlbnRlciIsImF0dGFjaCIsInNldERhdGEiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFB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QkksT0FFZ0IsSUFBSSxFQUFPLFdBQVksQ0FBRXJCLElBQUssR0FBSW9DLEtBQU0sR0FBSWxDLElBQUssTUFDakVtQixPQUVnQixJQUFJLEVBQU8sV0FBWSxDQUFFWixPQUFRLENBQUMsT0FDbERZIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0XCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLnNjc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIi8vIGltcG9ydCBTY2FsZSBmcm9tICcuL3NjYWxlJztcclxuXHJcbnR5cGUgb3B0aW9uc1R5cGUgPSB7XHJcbiAgbWluPzogbnVtYmVyLFxyXG4gIG1heD86IG51bWJlcixcclxuICBzdGVwPzogbnVtYmVyLFxyXG4gIGtpbmQ/OiBzdHJpbmcsXHJcbiAgaXNCYXNpYz86IGJvb2xlYW4sXHJcbiAgdmFsdWVzPzogbnVtYmVyW11cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xyXG4gIF9lbGVtSWQ6IHN0cmluZztcclxuICBfb3B0aW9uczogb3B0aW9uc1R5cGU7XHJcbiAgbGluZUVsZW06IEhUTUxFbGVtZW50O1xyXG4gIHRodW1iRWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgdmFsdWVFbGVtOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoZWxlbUlkOiBzdHJpbmcsIG9wdGlvbnM6IG9wdGlvbnNUeXBlKSB7XHJcbiAgICB0aGlzLl9lbGVtSWQgPSBlbGVtSWQuc2xpY2UoMSk7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLmxpbmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fZWxlbUlkKTtcclxuICAgIHRoaXMudGh1bWJFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICB0aGlzLnZhbHVlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gIH1cclxuXHJcbiAgc2hvd1NsaWRlckxpbmUoKSB7XHJcbiAgICB0aGlzLmxpbmVFbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1ib2R5Jyk7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbkVsZW1lbnQoZWxlbTogSFRNTEVsZW1lbnQsIHZhbDogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gYCR7KCh2YWwgLSB0aGlzLl9vcHRpb25zLm1pbikgKiB0aGlzLmxpbmVFbGVtLm9mZnNldFdpZHRoKVxyXG4gICAgICAvICh0aGlzLl9vcHRpb25zLm1heCAtIHRoaXMuX29wdGlvbnMubWluKSAtIGVsZW0ub2Zmc2V0V2lkdGggLyAyfXB4YDtcclxuICB9XHJcblxyXG4gIGZpbGxTbGlkZXJMaW5lKGxlbmd0aDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmxpbmVFbGVtLnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZWQgJHtsZW5ndGh9cHgsICNlNWU1ZTUgJHtsZW5ndGh9cHgpYDtcclxuICB9XHJcblxyXG4gIHNob3dTbGlkZXJUaHVtYigpIHtcclxuICAgIHRoaXMudGh1bWJFbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci10aHVtYicpO1xyXG4gICAgdGhpcy5saW5lRWxlbS5hcHBlbmQodGhpcy50aHVtYkVsZW0pO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5fb3B0aW9ucyk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLl9vcHRpb25zLnZhbHVlc1swXSk7XHJcbiAgICB0aGlzLnRodW1iRWxlbS5zdHlsZS5sZWZ0ID0gdGhpcy5nZXRQb3NpdGlvbkVsZW1lbnQodGhpcy50aHVtYkVsZW0sIHRoaXMuX29wdGlvbnMudmFsdWVzWzBdKTtcclxuICAgIHRoaXMuZmlsbFNsaWRlckxpbmUoTnVtYmVyKHRoaXMudGh1bWJFbGVtLnN0eWxlLmxlZnQuc2xpY2UoMCwgLTIpKSk7XHJcbiAgfVxyXG5cclxuICBzaG93U2xpZGVyVmFsdWUoKSB7XHJcbiAgICB0aGlzLnZhbHVlRWxlbS5jbGFzc0xpc3QuYWRkKCd0aXAtdmFsdWUnKTtcclxuICAgIHRoaXMubGluZUVsZW0uYXBwZW5kKHRoaXMudmFsdWVFbGVtKTtcclxuICAgIHRoaXMudmFsdWVFbGVtLnRleHRDb250ZW50ID0gYCR7TWF0aC5yb3VuZCgoKHRoaXMudGh1bWJFbGVtLm9mZnNldExlZnRcclxuICAgICAgICsgdGhpcy50aHVtYkVsZW0ub2Zmc2V0V2lkdGggLyAyIC0gdGhpcy5saW5lRWxlbS5vZmZzZXRMZWZ0KVxyXG4gICAgICAgKiAodGhpcy5fb3B0aW9ucy5tYXggLSB0aGlzLl9vcHRpb25zLm1pbikpXHJcbiAgICAgICAvIHRoaXMubGluZUVsZW0ub2Zmc2V0V2lkdGggKyB0aGlzLl9vcHRpb25zLm1pbil9YDtcclxuICAgIHRoaXMudmFsdWVFbGVtLnN0eWxlLmxlZnQgPSB0aGlzLmdldFBvc2l0aW9uRWxlbWVudCh0aGlzLnZhbHVlRWxlbSwgTnVtYmVyKHRoaXMudmFsdWVFbGVtLnRleHRDb250ZW50KSk7XHJcbiAgfVxyXG5cclxuICAvLyBzaG93U2NhbGUobWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBzdGVwOiBudW1iZXIpIHtcclxuICAvLyAgIHRoaXMuX21pblZhbHVlID0gbWluO1xyXG4gIC8vICAgdGhpcy5fbWF4VmFsdWUgPSBtYXg7XHJcbiAgLy8gICB0aGlzLl9zdGVwVmFsdWUgPSBzdGVwO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5fcGFyZW50SWQpO1xyXG4gIC8vICAgY29uc3Qgc2NhbGU6IFNjYWxlID0gbmV3IFNjYWxlKHRoaXMuX3NlbGVjdG9yLCB0aGlzLl9taW5WYWx1ZSwgdGhpcy5fbWF4VmFsdWUsIHRoaXMuX3N0ZXBWYWx1ZSk7XHJcbiAgLy8gICBzY2FsZS5pbml0KCk7XHJcbiAgLy8gfVxyXG59XHJcbiIsIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xyXG5pbXBvcnQgU3ViamVjdCBmcm9tICcuL2FwcCc7XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xyXG5pbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbCc7XHJcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XHJcblxyXG50eXBlIG9wdGlvbnNUeXBlID0ge1xyXG4gIG1pbj86IG51bWJlcixcclxuICBtYXg/OiBudW1iZXIsXHJcbiAgc3RlcD86IG51bWJlcixcclxuICBraW5kPzogc3RyaW5nLFxyXG4gIGlzQmFzaWM/OiBib29sZWFuLFxyXG4gIHZhbHVlcz86IG51bWJlcltdXHJcbn07XHJcblxyXG4vKipcclxuKiDQmNC90YLQtdGA0YTQtdC50YEg0J3QsNCx0LvRjtC00LDRgtC10LvRjyDQvtCx0YrRj9Cy0LvRj9C10YIg0LzQtdGC0L7QtCDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPLCDQutC+0YLQvtGA0YvQuSDQuNC30LTQsNGC0LXQu9C4XHJcbiog0LjRgdC/0L7Qu9GM0LfRg9GO0YIg0LTQu9GPINC+0L/QvtCy0LXRidC10L3QuNGPINGB0LLQvtC40YUg0L/QvtC00L/QuNGB0YfQuNC60L7Qsi5cclxuKi9cclxuaW50ZXJmYWNlIE9ic2VydmVyIHtcclxuICAvLyDQn9C+0LvRg9GH0LjRgtGMINC+0LHQvdC+0LLQu9C10L3QuNC1INC+0YIg0YHRg9Cx0YrQtdC60YLQsC5cclxuICBjb21tdW5pY2F0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiog0JrQvtC90LrRgNC10YLQvdGL0LUg0J3QsNCx0LvRjtC00LDRgtC10LvQuCDRgNC10LDQs9C40YDRg9GO0YIg0L3QsCDQvtCx0L3QvtCy0LvQtdC90LjRjywg0LLRi9C/0YPRidC10L3QvdGL0LUg0JjQt9C00LDRgtC10LvQtdC8LCDQulxyXG4qINC60L7RgtC+0YDQvtC80YMg0L7QvdC4INC/0YDQuNC60YDQtdC/0LvQtdC90YsuXHJcbiovXHJcbi8vIGNsYXNzIENvbmNyZXRlT2JzZXJ2ZXJBIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4vLyAgIHB1YmxpYyB1cGRhdGUoc3ViamVjdDogU3ViamVjdCk6IHZvaWQge1xyXG4vLyAgICAgaWYgKHN1YmplY3QgaW5zdGFuY2VvZiBDb25jcmV0ZVN1YmplY3QgJiYgc3ViamVjdC5zdGF0ZSA8IDMpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coJ0NvbmNyZXRlT2JzZXJ2ZXJBOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbmNsYXNzIFByZXNlbnRlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuICAvLyBtb2RlbE9wdGlvbnM6IHttaW46IG51bWJlciwgbWF4OiBudW1iZXIsIHN0ZXA6IG51bWJlcn07XHJcbiAgX3NlbGVjdG9yOiBzdHJpbmc7XHJcbiAgX29wdGlvbnM6IG9wdGlvbnNUeXBlO1xyXG5cclxuICBjb21tdW5pY2F0ZShtb2RlbDogTW9kZWwpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gbW9kZWwuZ2V0U2VsZWN0b3IoKTtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBtb2RlbC5nZXREYXRhKCk7XHJcbiAgICBjb25zdCB2aWV3OiBWaWV3ID0gbmV3IFZpZXcodGhpcy5fc2VsZWN0b3IsIHRoaXMuX29wdGlvbnMpO1xyXG4gICAgdmlldy5pbml0KCk7XHJcbiAgICB2aWV3LnNob3dTbGlkZXJMaW5lKCk7XHJcbiAgICB2aWV3LnNob3dTbGlkZXJUaHVtYigpO1xyXG4gICAgdmlldy5zaG93U2xpZGVyVmFsdWUoKTtcclxuICAgIGNvbnNvbGUubG9nKCdNb2RlbE9ic2VydmVyOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGNsYXNzIFZpZXdPYnNlcnZlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuLy8gICB1cGRhdGUodmlldykge1xyXG5cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGNsYXNzIENvbmNyZXRlT2JzZXJ2ZXJCIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4vLyAgIGlzU3ViamVjdFNhdGlzZmllcyhzdWJqZWN0KSB7XHJcbi8vICAgICByZXR1cm4gc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiAoc3ViamVjdC5zdGF0ZSA9PT0gMCB8fCBzdWJqZWN0LnN0YXRlID49IDIpO1xyXG4vLyAgIH1cclxuXHJcbi8vICAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XHJcbi8vICAgICBpZiAodGhpcy5pc1N1YmplY3RTYXRpc2ZpZXMoc3ViamVjdCkpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coJ0NvbmNyZXRlT2JzZXJ2ZXJCOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGV4cG9ydCB7IE9ic2VydmVyLCBDb25jcmV0ZU9ic2VydmVyQSwgQ29uY3JldGVPYnNlcnZlckIsIFByZXNlbnRlciB9O1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuZXhwb3J0IHsgT2JzZXJ2ZXIsIFByZXNlbnRlciB9O1xyXG4iLCIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuaW1wb3J0IFN1YmplY3QgZnJvbSAnLi9hcHAnO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XHJcblxyXG50eXBlIG9wdGlvbnMgPSB7XHJcbiAgbWluPzogbnVtYmVyO1xyXG4gIG1heD86IG51bWJlcjtcclxuICBzdGVwPzogbnVtYmVyO1xyXG4gIGtpbmQ/OiBzdHJpbmc7XHJcbiAgaXNCYXNpYz86IGJvb2xlYW47XHJcbiAgdmFsdWVzPzogbnVtYmVyW107XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RlbCBpbXBsZW1lbnRzIFN1YmplY3Qge1xyXG4gIHByaXZhdGUgX21pbjogbnVtYmVyO1xyXG4gIHByaXZhdGUgX21heDogbnVtYmVyO1xyXG4gIHByaXZhdGUgX3N0ZXA6IG51bWJlcjtcclxuICBwcml2YXRlIF9raW5kOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfaXNCYXNpYzogYm9vbGVhbjtcclxuICBwcml2YXRlIF92YWx1ZXM6IG51bWJlcltdO1xyXG4gIF9zZWxlY3Rvcjogc3RyaW5nO1xyXG5cclxuICAvLyBjb25zdHJ1Y3RvcihvcHRpb25zPzogb3B0aW9ucykge1xyXG4gIC8vICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge31cclxuICAvLyAgIHRoaXMuX21pbiA9IG9wdGlvbnMubWluID8gb3B0aW9ucy5taW4gOiAwO1xyXG4gIC8vICAgdGhpcy5fbWF4ID0gb3B0aW9ucy5tYXggPyBvcHRpb25zLm1heCA6IDMwMDtcclxuICAvLyAgIHRoaXMuX3N0ZXAgPSBvcHRpb25zLnN0ZXAgPyBvcHRpb25zLnN0ZXAgOiA1MDtcclxuICAvLyAgIHRoaXMuX2tpbmQgPSBvcHRpb25zLmtpbmQgPyBvcHRpb25zLmtpbmQgOiAnaG9yaXpvbnRhbCc7XHJcbiAgLy8gICB0aGlzLl9pc0Jhc2ljID0gb3B0aW9ucy5pc0Jhc2ljID8gb3B0aW9ucy5pc0Jhc2ljIDogdHJ1ZTtcclxuICAvLyB0aGlzLm5vdGlmeSgpO1xyXG4gIC8vIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09ic2VydmVyW119INCh0L/QuNGB0L7QuiDQv9C+0LTQv9C40YHRh9C40LrQvtCyLiDQkiDRgNC10LDQu9GM0L3QvtC5INC20LjQt9C90Lgg0YHQv9C40YHQvtC6XHJcbiAgICog0L/QvtC00L/QuNGB0YfQuNC60L7QsiDQvNC+0LbQtdGCINGF0YDQsNC90LjRgtGM0YHRjyDQsiDQsdC+0LvQtdC1INC/0L7QtNGA0L7QsdC90L7QvCDQstC40LTQtSAo0LrQu9Cw0YHRgdC40YTQuNGG0LjRgNGD0LXRgtGB0Y8g0L/QvlxyXG4gICAqINGC0LjQv9GDINGB0L7QsdGL0YLQuNGPINC4INGCLtC0LilcclxuICAgKi9cclxuICBwcml2YXRlIG9ic2VydmVyczogT2JzZXJ2ZXJbXSA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiDQnNC10YLQvtC00Ysg0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QvtC00L/QuNGB0LrQvtC5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRhY2gob2JzZXJ2ZXI6IE9ic2VydmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBpc0V4aXN0ID0gdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpO1xyXG4gICAgaWYgKGlzRXhpc3QpIHtcclxuICAgICAgY29uc29sZS5sb2coJ01vZGVsOiBQcmVzZW50ZXIgaGFzIGJlZW4gYXR0YWNoZWQgYWxyZWFkeS4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnTW9kZWw6IEF0dGFjaGVkIGEgcHJlc2VudGVyLicpO1xyXG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGV0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJJbmRleCA9IHRoaXMub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xyXG4gICAgaWYgKG9ic2VydmVySW5kZXggPT09IC0xKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTdWJqZWN0OiBOb25leGlzdGVudCBvYnNlcnZlci4nKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9ic2VydmVycy5zcGxpY2Uob2JzZXJ2ZXJJbmRleCwgMSk7XHJcbiAgICBjb25zb2xlLmxvZygnU3ViamVjdDogRGV0YWNoZWQgYW4gb2JzZXJ2ZXIuJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDQl9Cw0L/Rg9GB0Log0L7QsdC90L7QstC70LXQvdC40Y8g0LIg0LrQsNC20LTQvtC8INC/0L7QtNC/0LjRgdGH0LjQutC1LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RpZnkoKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygnTW9kZWw6IE5vdGlmeWluZyBvYnNlcnZlcnMuLi4nKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxyXG4gICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiB0aGlzLm9ic2VydmVycykge1xyXG4gICAgICBvYnNlcnZlci5jb21tdW5pY2F0ZSh0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldERhdGEob3B0aW9uczogb3B0aW9ucywgc2VsZWN0b3I6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbWluID0gb3B0aW9ucy5taW47XHJcbiAgICB0aGlzLl9tYXggPSBvcHRpb25zLm1heDtcclxuICAgIHRoaXMuX3N0ZXAgPSBvcHRpb25zLnN0ZXA7XHJcbiAgICB0aGlzLl9raW5kID0gb3B0aW9ucy5raW5kO1xyXG4gICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYztcclxuICAgIHRoaXMuX3ZhbHVlcyA9IG9wdGlvbnMudmFsdWVzO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIGNvbnNvbGUubG9nKCdNb2RlbDogTXkgc3RhdGUgaGFzIGp1c3QgY2hhbmdlZCcpO1xyXG4gICAgdGhpcy5ub3RpZnkoKTtcclxuICB9XHJcblxyXG4gIGdldFNlbGVjdG9yKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGF0YSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1pbjogdGhpcy5fbWluLFxyXG4gICAgICBtYXg6IHRoaXMuX21heCxcclxuICAgICAgc3RlcDogdGhpcy5fc3RlcCxcclxuICAgICAga2luZDogdGhpcy5fa2luZCxcclxuICAgICAgaXNCYXNpYzogdGhpcy5faXNCYXNpYyxcclxuICAgICAgdmFsdWVzOiB0aGlzLl92YWx1ZXMsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQcmVzZW50ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJztcclxuXHJcbnR5cGUgb3B0aW9uc1R5cGUgPSB7XHJcbiAgbWluPzogbnVtYmVyLFxyXG4gIG1heD86IG51bWJlcixcclxuICBzdGVwPzogbnVtYmVyLFxyXG4gIGtpbmQ/OiBzdHJpbmcsXHJcbiAgaXNCYXNpYz86IGJvb2xlYW4sXHJcbiAgdmFsdWVzPzogbnVtYmVyW11cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlciB7XHJcbiAgX3NlbGVjdG9yOiBzdHJpbmc7XHJcbiAgX29wdGlvbnM6IG9wdGlvbnNUeXBlO1xyXG5cclxuICBfbWluID0gMDtcclxuICBfbWF4ID0gMzAwO1xyXG4gIF9zdGVwID0gNTc7XHJcbiAgX2tpbmQgPSAnaG9yaXpvbnRhbCc7XHJcbiAgX2lzQmFzaWMgPSB0cnVlO1xyXG4gIF92YWx1ZXMgPSBbdGhpcy5fc3RlcF07XHJcblxyXG4gIGNvbnN0cnVjdG9yKGVsZW1JZDogc3RyaW5nLCBvcHRpb25zPzogb3B0aW9uc1R5cGUpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gZWxlbUlkO1xyXG4gICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgdGhpcy5fbWluID0gb3B0aW9ucy5taW4gPyBvcHRpb25zLm1pbiA6IHRoaXMuX21pbjtcclxuICAgICAgdGhpcy5fbWF4ID0gb3B0aW9ucy5tYXggPyBvcHRpb25zLm1heCA6IHRoaXMuX21heDtcclxuICAgICAgdGhpcy5fc3RlcCA9IG9wdGlvbnMuc3RlcCA/IG9wdGlvbnMuc3RlcCA6IHRoaXMuX3N0ZXA7XHJcbiAgICAgIHRoaXMuX2tpbmQgPSBvcHRpb25zLmtpbmQgPyBvcHRpb25zLmtpbmQgOiB0aGlzLl9raW5kO1xyXG4gICAgICB0aGlzLl9pc0Jhc2ljID0gb3B0aW9ucy5pc0Jhc2ljID8gb3B0aW9ucy5pc0Jhc2ljIDogdGhpcy5faXNCYXNpYztcclxuICAgICAgdGhpcy5fdmFsdWVzID0gb3B0aW9ucy52YWx1ZXMgPyBvcHRpb25zLnZhbHVlcyA6IFt0aGlzLl9zdGVwXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldERhdGEoKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0ge1xyXG4gICAgICBtaW46IHRoaXMuX21pbixcclxuICAgICAgbWF4OiB0aGlzLl9tYXgsXHJcbiAgICAgIHN0ZXA6IHRoaXMuX3N0ZXAsXHJcbiAgICAgIGtpbmQ6IHRoaXMuX2tpbmQsXHJcbiAgICAgIGlzQmFzaWM6IHRoaXMuX2lzQmFzaWMsXHJcbiAgICAgIHZhbHVlczogdGhpcy5fdmFsdWVzLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICBjb25zdCBtb2RlbDogTW9kZWwgPSBuZXcgTW9kZWwoKTtcclxuICAgIGNvbnN0IHByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIoKTtcclxuICAgIG1vZGVsLmF0dGFjaChwcmVzZW50ZXIpO1xyXG4gICAgdGhpcy5zZXREYXRhKCk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9vcHRpb25zKTtcclxuICAgIG1vZGVsLnNldERhdGEodGhpcy5fb3B0aW9ucywgdGhpcy5fc2VsZWN0b3IpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XHJcbmltcG9ydCBTbGlkZXIgZnJvbSAnLi9tb2R1bGVzL3NsaWRlcic7XHJcblxyXG4vLyBpbXBvcnQgc2xpZGVyUnVuIGZyb20gJy4vbW9kdWxlcy9zbGlkZXJSdW4nO1xyXG4vLyBpbXBvcnQgU2NhbGUgZnJvbSAnLi9tb2R1bGVzL3NjYWxlJztcclxuLy8gaW1wb3J0IHsgQ29uY3JldGVTdWJqZWN0IH0gZnJvbSAnLi9tb2R1bGVzL2FwcCc7XHJcbi8vIGltcG9ydCBWaWV3IGZyb20gJy4vbW9kdWxlcy92aWV3JztcclxuLy8gaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kdWxlcy9tb2RlbCc7XHJcbi8vIGltcG9ydCB7IENvbmNyZXRlT2JzZXJ2ZXJBLCBDb25jcmV0ZU9ic2VydmVyQiwgUHJlc2VudGVyIH0gZnJvbSAnLi9tb2R1bGVzL3ByZXNlbnRlcic7XHJcbi8vIGltcG9ydCB7IFByZXNlbnRlciB9IGZyb20gJy4vbW9kdWxlcy9wcmVzZW50ZXInO1xyXG5cclxuY29uc3Qgc2xpZGVyMTogU2xpZGVyID0gbmV3IFNsaWRlcignI3NsaWRlcjEnKTtcclxuc2xpZGVyMS5pbml0KCk7XHJcblxyXG5jb25zdCBzbGlkZXIyOiBTbGlkZXIgPSBuZXcgU2xpZGVyKCcjc2xpZGVyMicsIHsgbWluOiA0MCwgc3RlcDogNjAsIG1heDogMjQ1IH0pO1xyXG5zbGlkZXIyLmluaXQoKTtcclxuXHJcbmNvbnN0IHNsaWRlcjM6IFNsaWRlciA9IG5ldyBTbGlkZXIoJyNzbGlkZXIzJywgeyB2YWx1ZXM6IFszMDBdIH0pO1xyXG5zbGlkZXIzLmluaXQoKTtcclxuXHJcbi8vIGNvbnN0IHNjYWxlOiBTY2FsZSA9IG5ldyBTY2FsZSgpO1xyXG4vLyBzY2FsZS5pbml0KCk7XHJcblxyXG4vLyBzbGlkZXJSdW4oKTtcclxuXHJcbi8vIGNvbnN0IHZpZXcyOiBWaWV3ID0gbmV3IFZpZXcoJ3NsaWRlcjInKTtcclxuLy8gdmlldzIuc2hvd1NsaWRlcigpO1xyXG5cclxuLyoqXHJcbiog0JrQu9C40LXQvdGC0YHQutC40Lkg0LrQvtC0LlxyXG4qL1xyXG5cclxuLy8gY29uc3Qgc3ViamVjdCA9IG5ldyBDb25jcmV0ZVN1YmplY3QoKTtcclxuXHJcbi8vIGNvbnN0IG9ic2VydmVyMSA9IG5ldyBDb25jcmV0ZU9ic2VydmVyQSgpO1xyXG4vLyBzdWJqZWN0LmF0dGFjaChvYnNlcnZlcjEpO1xyXG5cclxuLy8gY29uc3Qgb2JzZXJ2ZXIyID0gbmV3IENvbmNyZXRlT2JzZXJ2ZXJCKCk7XHJcbi8vIHN1YmplY3QuYXR0YWNoKG9ic2VydmVyMik7XHJcblxyXG4vLyBzdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcbi8vIHN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuXHJcbi8vIHN1YmplY3QuZGV0YWNoKG9ic2VydmVyMik7XHJcblxyXG4vLyBzdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcblxyXG4vLyBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XHJcblxyXG4vLyBjb25zdCB0b206IFVzZXIgPSBuZXcgVXNlcign0KLQvtC8JywgMjkpO1xyXG4vLyBlbC5pbm5lckhUTUwgPSBg0JjQvNGPOiAke3RvbS5uYW1lfSDQstC+0LfRgNCw0YHRgjogJHt0b20uYWdlfWA7XHJcblxyXG4vKiBjb25zdCBNVlAgPSB7XHJcbiAgbWFrZU9ic2VydmFibGVTdWJqZWN0KCkge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJzID0gW107XHJcbiAgICBjb25zdCBhZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbyAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb2JzZXJ2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IG8pIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignb2JzZXJ2ZXIgYWxyZWFkeSBpbiB0aGUgbGlzdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBvYnNlcnZlcnMucHVzaChvKTtcclxuICAgIH07XHJcbiAgICBjb25zdCByZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBvYnNlcnZlcnNbaV07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyID09PSBvKSB7XHJcbiAgICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBmaW5kIG9ic2VydmVyIGluIGxpc3Qgb2Ygb2JzZXJ2ZXJzJyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgbm90aWZ5T2JzZXJ2ZXJzID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgLy8gTWFrZSBhIGNvcHkgb2Ygb2JzZXJ2ZXIgbGlzdCBpbiBjYXNlIHRoZSBsaXN0XHJcbiAgICAgIC8vIGlzIG11dGF0ZWQgZHVyaW5nIHRoZSBub3RpZmljYXRpb25zLlxyXG4gICAgICBjb25zdCBvYnNlcnZlcnNTbmFwc2hvdCA9IG9ic2VydmVycy5zbGljZSgwKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnNTbmFwc2hvdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG9ic2VydmVyc1NuYXBzaG90W2ldKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWRkT2JzZXJ2ZXIsXHJcbiAgICAgIHJlbW92ZU9ic2VydmVyLFxyXG4gICAgICBub3RpZnlPYnNlcnZlcnMsXHJcbiAgICAgIG5vdGlmeTogbm90aWZ5T2JzZXJ2ZXJzLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBNb2RlbChvcHRpb25zID0ge30pIHtcclxuICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgLy8gY29uc3QgaXRlbXMgPSBbXTtcclxuICAgIHRoaXMub3B0aW9ucyA9ICFvcHRpb25zID8ge30gOiBvcHRpb25zO1xyXG4gICAgdGhpcy5tb2RlbENoYW5nZWRTdWJqZWN0ID0gTVZQLm1ha2VPYnNlcnZhYmxlU3ViamVjdCgpO1xyXG4gICAgdGhpcy5taW5WYWx1ZSA9IDA7XHJcbiAgICB0aGlzLm1heFZhbHVlID0gMzAwO1xyXG4gICAgdGhpcy5zdGVwID0gNTA7XHJcbiAgICB0aGlzLm1vZGUgPSAnaG9yaXpvbnRhbCc7XHJcbiAgICB0aGlzLnR5cGUgPSAnc2luZ2xlJztcclxuICAgIC8vIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgLy8gICBpZiAoIXZhbHVlKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGl0ZW1zLnB1c2godmFsdWUpO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5yZW1vdmVDdXJyZW50SXRlbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgaWYgKHRoYXQuc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaXRlbXMuc3BsaWNlKHRoYXQuc2VsZWN0ZWRJbmRleCwgMSk7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICByZXR1cm4gaXRlbXM7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5zZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICAvLyB0aGlzLmdldFNlbGVjdGVkSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHJldHVybiB0aGF0LnNlbGVjdGVkSW5kZXg7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5zZXRTZWxlY3RlZEluZGV4ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAvLyAgIHRoYXQuc2VsZWN0ZWRJbmRleCA9IHZhbHVlO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gIH0sXHJcblxyXG4gIFZpZXcoKSB7XHJcbiAgICAvLyBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XHJcbiAgICAgIHNsaWRlckJvZHkuaW5pdCgpO1xyXG5cclxuICAgICAgY29uc3Qgc2xpZGVyVGh1bWI6IFNsaWRlclRodW1iID0gbmV3IFNsaWRlclRodW1iKCk7XHJcbiAgICAgIHNsaWRlclRodW1iLmluaXQoKTtcclxuXHJcbiAgICAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZSgpO1xyXG4gICAgICB0aXBWYWx1ZS5pbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoYXQuc2VsZWN0ID0gJCgnPHNlbGVjdC8+JykuYXBwZW5kVG8ocm9vdE9iamVjdCk7XHJcbiAgICAvLyB0aGF0LnNlbGVjdC5hdHRyKCdzaXplJywgJzQnKTtcclxuICAgIC8vIHRoYXQuYnV0dG9uQWRkID0gJCgnPGJ1dHRvbj4rPC9idXR0b24+JykuYXBwZW5kVG8ocm9vdE9iamVjdCkuaGVpZ2h0KDIwKTtcclxuICAgIC8vIHRoYXQuYnV0dG9uUmVtb3ZlID0gJCgnPGJ1dHRvbj4tPC9idXR0b24+JykuYXBwZW5kVG8ocm9vdE9iamVjdCkuaGVpZ2h0KDIwKTtcclxuICAgIC8vIG1vZGVsLm1vZGVsQ2hhbmdlZFN1YmplY3QuYWRkT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICB2YXIgaXRlbXMgPSBtb2RlbC5nZXRJdGVtcygpO1xyXG4gICAgLy8gICB2YXIgaW5uZXJIVE1MID0gJyc7XHJcbiAgICAvLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIC8vICAgICBpbm5lckhUTUwgKz0gXCI8b3B0aW9uPlwiICsgaXRlbXNbaV0gKyBcIjwvb3B0aW9uPlwiO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIHRoYXQuc2VsZWN0Lmh0bWwoaW5uZXJIVE1MKTtcclxuICAgIC8vIH0pO1xyXG4gIH0sXHJcblxyXG4gIENvbnRyb2xsZXIobW9kZWwsIHZpZXcpIHtcclxuICAgIHZpZXcuaW5pdCgpO1xyXG4gICAgLy8gdmlldy5idXR0b25BZGQuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLmFkZEl0ZW0ocHJvbXB0KCdhZGR2YWx1ZScpKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gdmlldy5idXR0b25SZW1vdmUuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLnJlbW92ZUN1cnJlbnRJdGVtKCk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHZpZXcuc2VsZWN0LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBtb2RlbC5zZXRTZWxlY3RlZEluZGV4KHZpZXcuc2VsZWN0WzBdLnNlbGVjdGVkSW5kZXgpO1xyXG4gICAgLy8gfSk7XHJcbiAgfSxcclxufTsgKi9cclxuXHJcbi8qICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICB2YXIgbW9kZWwgPSBuZXcgT01WQy5Nb2RlbCgpO1xyXG4gIHZhciB2aWV3ID0gbmV3IE9NVkMuVmlldyhtb2RlbCwgJCgnPGRpdi8+JykuYXBwZW5kVG8oJChcImJvZHlcIikpKTtcclxuICB2YXIgY29udHJvbGxlciA9IG5ldyBPTVZDLkNvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xyXG59KTsgKi9cclxuXHJcbi8vIGNvbnN0IG1vZGVsID0gbmV3IE1WUC5Nb2RlbCgpO1xyXG4vLyBjb25zdCB2aWV3ID0gbmV3IE1WUC5WaWV3KCk7XHJcbi8vIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTVZQLkNvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xyXG5cclxuLy8gY29udHJvbGxlcigpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9