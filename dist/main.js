!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=3)}([function(e,t,n){var i=n(1),s=n(2);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},function(e,t,n){"use strict";var i,s=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function a(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},i=[],s=0;s<e.length;s++){var o=e[s],c=t.base?o[0]+t.base:o[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=a(u),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(r[d].references++,r[d].updater(h)):r.push({identifier:u,updater:b(h,t),references:1}),i.push(u)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,n,i){var s=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,s);else{var o=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function m(e,t,n){var i=n.css,s=n.media,o=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),o&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,p=0;function b(e,t){var n,i,s;if(t.singleton){var o=p++;n=f||(f=l(t)),i=h.bind(null,n,o,!1),s=h.bind(null,n,o,!0)}else n=l(t),i=m.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var s=a(n[i]);r[s].references--}for(var o=c(e,t),l=0;l<n.length;l++){var u=a(n[l]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}n=o}}}},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var i=function(){const e=document.getElementById("slider-body"),t=document.getElementById("slider-thumb"),n=document.getElementById("tip-value"),i=t.offsetWidth/2;function s(s){let o=s.clientX-e.getBoundingClientRect().left-i;o<-i&&(o=-i);const r=e.offsetWidth-i;var a;o>r&&(o=r),t.style.left=o+"px",n.textContent=""+(o+i),n.style.left=o-(n.offsetWidth-t.offsetWidth)/2+"px",a=o+i,e.style.background=`linear-gradient(to right, red ${a}px, #e5e5e5 ${a}px)`}function o(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",s)}n.textContent=""+(Number(getComputedStyle(t).left.slice(0,-2))+i),t.addEventListener("mousedown",(function(e){e.preventDefault(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)})),e.addEventListener("click",s),t.addEventListener("dragstart",(function(){return!1}))};var s=class{constructor(){this.container=document.getElementById("slider-body"),this.thumbSlider=document.createElement("DIV"),this.thumbSlider.classList.add("slider-thumb"),this.thumbSlider.setAttribute("id","slider-thumb")}init(){this.container.append(this.thumbSlider)}destroy(){this.thumbSlider.remove()}};var o=class{constructor(){this.container=document.getElementById("slider-body"),this.tipValue=document.createElement("DIV"),this.tipValue.classList.add("tip-value"),this.tipValue.setAttribute("id","tip-value")}init(){this.container.append(this.tipValue)}destroy(){this.tipValue.remove()}};var r=class{constructor(){this.container=document.getElementById("range-slider"),this.minValue=0,this.maxValue=300,this.step=50,this.mark=(this.maxValue-this.minValue)/this.step,this.scale=document.createElement("DIV"),this.scale.classList.add("scale"),this.min=document.createElement("SPAN"),this.min.textContent=""+this.minValue,this.min.style.position="absolute",this.min.style.left="24px",this.max=document.createElement("SPAN"),this.max.textContent=""+this.maxValue,this.max.style.position="absolute",this.max.style.left="316px"}init(){this.container.append(this.scale),this.scale.append(this.min),this.scale.append(this.max),console.log(this.max.offsetWidth);for(let e=1;e<this.mark;e++)this.elem=document.createElement("SPAN"),this.elem.textContent=""+this.step*e,this.elem.style.position="absolute",Number(this.elem.textContent)<100?this.elem.style.left=Number(this.elem.textContent)+20+"px":Number(this.elem.textContent)<1e3&&(this.elem.style.left=Number(this.elem.textContent)+16+"px"),this.max.insertAdjacentElement("beforebegin",this.elem)}destroy(){this.scale.remove()}};class a{constructor(){this.observers=[]}attach(e){if(this.observers.includes(e))return console.log("Subject: Observer has been attached already.");console.log("Subject: Attached an observer."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Subject: Notifying observers...");for(const e of this.observers)e.update(this)}someBusinessLogic(){console.log("\nSubject: I'm doing something important."),this.state=Math.floor(11*Math.random()),console.log("Subject: My state has just changed to: "+this.state),this.notify()}}var c=class{constructor(e){this._parentId=e}init(){this.container=document.getElementById(this._parentId),this.bodySlider=document.createElement("DIV"),this.bodySlider.classList.add("slider-body"),this.bodySlider.setAttribute("id","slider-body"),this.container.append(this.bodySlider)}destroy(){this.bodySlider.remove()}};(new class{constructor(){}show(){new c("range-slider").init()}}).show();(new s).init();(new o).init();(new r).init(),i();const l=new a,u=new class{update(e){e instanceof a&&e.state<3&&console.log("ConcreteObserverA: Reacted to the event.")}};l.attach(u);const d=new class{isSubjectSatisfies(e){return e instanceof a&&(0===e.state||e.state>=2)}update(e){this.isSubjectSatisfies(e)&&console.log("ConcreteObserverB: Reacted to the event.")}};l.attach(d),l.someBusinessLogic(),l.someBusinessLogic(),l.detach(d),l.someBusinessLogic()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NsaWRlclRodW1iLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3RpcFZhbHVlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NjYWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9zbGlkZXJCb2R5LnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3ByZXNlbnRlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwic2xpZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aHVtYiIsInRpcCIsImRlbHRhIiwib2Zmc2V0V2lkdGgiLCJvbk1vdXNlTW92ZSIsImV2ZW50IiwidGh1bWJQb2ludCIsImNsaWVudFgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwicmlnaHRFZGdlIiwidGV4dENvbnRlbnQiLCJiYWNrZ3JvdW5kIiwib25Nb3VzZVVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIk51bWJlciIsImdldENvbXB1dGVkU3R5bGUiLCJzbGljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnRhaW5lciIsInRoaXMiLCJ0aHVtYlNsaWRlciIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZCIsInRpcFZhbHVlIiwibWluVmFsdWUiLCJtYXhWYWx1ZSIsInN0ZXAiLCJtYXJrIiwic2NhbGUiLCJtaW4iLCJwb3NpdGlvbiIsIm1heCIsImNvbnNvbGUiLCJsb2ciLCJlbGVtIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiQ29uY3JldGVTdWJqZWN0Iiwib2JzZXJ2ZXJzIiwib2JzZXJ2ZXIiLCJpbmNsdWRlcyIsIm9ic2VydmVySW5kZXgiLCJpbmRleE9mIiwic3RhdGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJub3RpZnkiLCJwYXJlbnRJZCIsIl9wYXJlbnRJZCIsImJvZHlTbGlkZXIiLCJpbml0Iiwic2hvdyIsIm9ic2VydmVyMSIsInN1YmplY3QiLCJhdHRhY2giLCJvYnNlcnZlcjIiLCJpc1N1YmplY3RTYXRpc2ZpZXMiLCJzb21lQnVzaW5lc3NMb2dpYyIsImRldGFjaCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFB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YWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGlzdFwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCJmdW5jdGlvbiBzbGlkZXJSdW4oKSB7XG4gIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXItYm9keScpO1xuICBjb25zdCB0aHVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXItdGh1bWInKTtcbiAgY29uc3QgdGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpcC12YWx1ZScpO1xuXG4gIGNvbnN0IGRlbHRhID0gdGh1bWIub2Zmc2V0V2lkdGggLyAyO1xuICB0aXAudGV4dENvbnRlbnQgPSBgJHtOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZSh0aHVtYikubGVmdC5zbGljZSgwLCAtMikpICsgZGVsdGF9YDtcblxuICBmdW5jdGlvbiBmaWxsU2xpZGVyTGluZShsZW5ndGgpIHtcbiAgICBzbGlkZXIuc3R5bGUuYmFja2dyb3VuZCA9IGBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJlZCAke2xlbmd0aH1weCwgI2U1ZTVlNSAke2xlbmd0aH1weClgO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZU1vdmUoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBsZXQgdGh1bWJQb2ludCA9IGV2ZW50LmNsaWVudFggLSBzbGlkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIGRlbHRhO1xuXG4gICAgLy8g0LrRg9GA0YHQvtGAINCy0YvRiNC10Lsg0LjQtyDRgdC70LDQudC00LXRgNCwID0+INC+0YHRgtCw0LLQuNGC0Ywg0LHQtdCz0YPQvdC+0Log0LIg0LXQs9C+INCz0YDQsNC90LjRhtCw0YUuXG4gICAgaWYgKHRodW1iUG9pbnQgPCAtZGVsdGEpIHtcbiAgICAgIHRodW1iUG9pbnQgPSAtZGVsdGE7XG4gICAgfVxuICAgIGNvbnN0IHJpZ2h0RWRnZSA9IHNsaWRlci5vZmZzZXRXaWR0aCAtIGRlbHRhO1xuICAgIGlmICh0aHVtYlBvaW50ID4gcmlnaHRFZGdlKSB7XG4gICAgICB0aHVtYlBvaW50ID0gcmlnaHRFZGdlO1xuICAgIH1cblxuICAgIHRodW1iLnN0eWxlLmxlZnQgPSBgJHt0aHVtYlBvaW50fXB4YDtcbiAgICB0aXAudGV4dENvbnRlbnQgPSBgJHt0aHVtYlBvaW50ICsgZGVsdGF9YDtcbiAgICB0aXAuc3R5bGUubGVmdCA9IGAke3RodW1iUG9pbnQgLSAodGlwLm9mZnNldFdpZHRoIC0gdGh1bWIub2Zmc2V0V2lkdGgpIC8gMn1weGA7XG4gICAgZmlsbFNsaWRlckxpbmUodGh1bWJQb2ludCArIGRlbHRhKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VVcCgpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdXNlRG93bihldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gIH1cblxuICBmdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB0aHVtYi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG4gIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uTW91c2VNb3ZlKTtcbiAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgcmV0dXJuRmFsc2UpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzbGlkZXJSdW47XG4iLCJjbGFzcyBTbGlkZXJUaHVtYiB7XG4gIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXItYm9keScpO1xuICB0aHVtYlNsaWRlcjogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50aHVtYlNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHRoaXMudGh1bWJTbGlkZXIuY2xhc3NMaXN0LmFkZCgnc2xpZGVyLXRodW1iJyk7XG4gICAgdGhpcy50aHVtYlNsaWRlci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3NsaWRlci10aHVtYicpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy50aHVtYlNsaWRlcik7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMudGh1bWJTbGlkZXIucmVtb3ZlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyVGh1bWI7XG4iLCJjbGFzcyBUaXBWYWx1ZSB7XG4gIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXItYm9keScpO1xuICB0aXBWYWx1ZTogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50aXBWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHRoaXMudGlwVmFsdWUuY2xhc3NMaXN0LmFkZCgndGlwLXZhbHVlJyk7XG4gICAgdGhpcy50aXBWYWx1ZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpcC12YWx1ZScpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy50aXBWYWx1ZSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMudGlwVmFsdWUucmVtb3ZlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlwVmFsdWU7XG4iLCJjbGFzcyBTY2FsZSB7XG4gIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYW5nZS1zbGlkZXInKTtcbiAgbWluVmFsdWUgPSAwO1xuICBtYXhWYWx1ZSA9IDMwMDtcbiAgc3RlcCA9IDUwO1xuICBtYXJrID0gKHRoaXMubWF4VmFsdWUgLSB0aGlzLm1pblZhbHVlKSAvIHRoaXMuc3RlcDtcbiAgc2NhbGU6IEhUTUxFbGVtZW50O1xuICBtaW46IEhUTUxFbGVtZW50O1xuICBtYXg6IEhUTUxFbGVtZW50O1xuICBlbGVtOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNjYWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgdGhpcy5zY2FsZS5jbGFzc0xpc3QuYWRkKCdzY2FsZScpO1xuICAgIHRoaXMubWluID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xuICAgIHRoaXMubWluLnRleHRDb250ZW50ID0gYCR7dGhpcy5taW5WYWx1ZX1gO1xuICAgIHRoaXMubWluLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLm1pbi5zdHlsZS5sZWZ0ID0gJzI0cHgnO1xuICAgIHRoaXMubWF4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xuICAgIHRoaXMubWF4LnRleHRDb250ZW50ID0gYCR7dGhpcy5tYXhWYWx1ZX1gO1xuICAgIHRoaXMubWF4LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLm1heC5zdHlsZS5sZWZ0ID0gJzMxNnB4JztcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMuc2NhbGUpO1xuICAgIHRoaXMuc2NhbGUuYXBwZW5kKHRoaXMubWluKTtcbiAgICB0aGlzLnNjYWxlLmFwcGVuZCh0aGlzLm1heCk7XG4gICAgY29uc29sZS5sb2codGhpcy5tYXgub2Zmc2V0V2lkdGgpO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5tYXJrOyBpKyspIHtcbiAgICAgIHRoaXMuZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcbiAgICAgIHRoaXMuZWxlbS50ZXh0Q29udGVudCA9IGAke3RoaXMuc3RlcCAqIGl9YDtcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICBpZiAoTnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgPCAxMDApIHtcbiAgICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBgJHtOdW1iZXIodGhpcy5lbGVtLnRleHRDb250ZW50KSArIDIwfXB4YDtcbiAgICAgIH0gZWxzZSBpZiAoTnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgPCAxMDAwKSB7XG4gICAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gYCR7TnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgKyAxNn1weGA7XG4gICAgICB9XG4gICAgICB0aGlzLm1heC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWJlZ2luJywgdGhpcy5lbGVtKTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuc2NhbGUucmVtb3ZlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2NhbGU7XG4iLCJpbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gJy4vcHJlc2VudGVyJztcblxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cblxuLy8gY2xhc3MgVXNlciB7XG4vLyAgIG5hbWU6IHN0cmluZztcbi8vICAgYWdlOiBudW1iZXI7XG5cbi8vICAgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZywgX2FnZTogbnVtYmVyKSB7XG4vLyAgICAgdGhpcy5uYW1lID0gX25hbWU7XG4vLyAgICAgdGhpcy5hZ2UgPSBfYWdlO1xuLy8gICB9XG4vLyB9XG5cbi8vIGV4cG9ydCBkZWZhdWx0IFVzZXI7XG5cbi8qKlxuICog0JjQvdGC0YTQtdGA0YTQtdC50YEg0LjQt9C00LDRgtC10LvRjyDQvtCx0YrRj9Cy0LvRj9C10YIg0L3QsNCx0L7RgCDQvNC10YLQvtC00L7QsiDQtNC70Y8g0YPQv9GA0LDQstC70LXQvdC40Y/QvNC4INC/0L7QtNC/0LjRgdGH0LjQutCw0LzQuC5cbiAqL1xuaW50ZXJmYWNlIFN1YmplY3Qge1xuICAvLyDQn9GA0LjRgdC+0LXQtNC40L3Rj9C10YIg0L3QsNCx0LvRjtC00LDRgtC10LvRjyDQuiDQuNC30LTQsNGC0LXQu9GOLlxuICBhdHRhY2gob2JzZXJ2ZXI6IE9ic2VydmVyKTogdm9pZDtcblxuICAvLyDQntGC0YHQvtC10LTQuNC90Y/QtdGCINC90LDQsdC70Y7QtNCw0YLQtdC70Y8g0L7RgiDQuNC30LTQsNGC0LXQu9GPLlxuICBkZXRhY2gob2JzZXJ2ZXI6IE9ic2VydmVyKTogdm9pZDtcblxuICAvLyDQo9Cy0LXQtNC+0LzQu9GP0LXRgiDQstGB0LXRhSDQvdCw0LHQu9GO0LTQsNGC0LXQu9C10Lkg0L4g0YHQvtCx0YvRgtC40LguXG4gIG5vdGlmeSgpOiB2b2lkO1xufVxuXG4vKipcbiog0JjQt9C00LDRgtC10LvRjCDQstC70LDQtNC10LXRgiDQvdC10LrQvtGC0L7RgNGL0Lwg0LLQsNC20L3Ri9C8INGB0L7RgdGC0L7Rj9C90LjQtdC8INC4INC+0L/QvtCy0LXRidCw0LXRgiDQvdCw0LHQu9GO0LTQsNGC0LXQu9C10Lkg0L4g0LXQs9C+XG4qINC40LfQvNC10L3QtdC90LjRj9GFLlxuKi9cbmNsYXNzIENvbmNyZXRlU3ViamVjdCBpbXBsZW1lbnRzIFN1YmplY3Qge1xuICAvKipcbiAgICogQHR5cGUge251bWJlcn0g0JTQu9GPINGD0LTQvtCx0YHRgtCy0LAg0LIg0Y3RgtC+0Lkg0L/QtdGA0LXQvNC10L3QvdC+0Lkg0YXRgNCw0L3QuNGC0YHRjyDRgdC+0YHRgtC+0Y/QvdC40LVcbiAgICog0JjQt9C00LDRgtC10LvRjywg0L3QtdC+0LHRhdC+0LTQuNC80L7QtSDQstGB0LXQvCDQv9C+0LTQv9C40YHRh9C40LrQsNC8LlxuICAgKi9cbiAgcHVibGljIHN0YXRlOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtPYnNlcnZlcltdfSDQodC/0LjRgdC+0Log0L/QvtC00L/QuNGB0YfQuNC60L7Qsi4g0JIg0YDQtdCw0LvRjNC90L7QuSDQttC40LfQvdC4INGB0L/QuNGB0L7QulxuICAgKiDQv9C+0LTQv9C40YHRh9C40LrQvtCyINC80L7QttC10YIg0YXRgNCw0L3QuNGC0YzRgdGPINCyINCx0L7Qu9C10LUg0L/QvtC00YDQvtCx0L3QvtC8INCy0LjQtNC1ICjQutC70LDRgdGB0LjRhNC40YbQuNGA0YPQtdGC0YHRjyDQv9C+XG4gICAqINGC0LjQv9GDINGB0L7QsdGL0YLQuNGPINC4INGCLtC0LilcbiAgICovXG4gIHByaXZhdGUgb2JzZXJ2ZXJzOiBPYnNlcnZlcltdID0gW107XG5cbiAgLyoqXG4gICAqINCc0LXRgtC+0LTRiyDRg9C/0YDQsNCy0LvQtdC90LjRjyDQv9C+0LTQv9C40YHQutC+0LkuXG4gICAqL1xuICBwdWJsaWMgYXR0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xuICAgIGNvbnN0IGlzRXhpc3QgPSB0aGlzLm9ic2VydmVycy5pbmNsdWRlcyhvYnNlcnZlcik7XG4gICAgaWYgKGlzRXhpc3QpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZygnU3ViamVjdDogT2JzZXJ2ZXIgaGFzIGJlZW4gYXR0YWNoZWQgYWxyZWFkeS4nKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnU3ViamVjdDogQXR0YWNoZWQgYW4gb2JzZXJ2ZXIuJyk7XG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gIH1cblxuICBwdWJsaWMgZGV0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xuICAgIGNvbnN0IG9ic2VydmVySW5kZXggPSB0aGlzLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcbiAgICBpZiAob2JzZXJ2ZXJJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZygnU3ViamVjdDogTm9uZXhpc3RlbnQgb2JzZXJ2ZXIuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5vYnNlcnZlcnMuc3BsaWNlKG9ic2VydmVySW5kZXgsIDEpO1xuICAgIGNvbnNvbGUubG9nKCdTdWJqZWN0OiBEZXRhY2hlZCBhbiBvYnNlcnZlci4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQl9Cw0L/Rg9GB0Log0L7QsdC90L7QstC70LXQvdC40Y8g0LIg0LrQsNC20LTQvtC8INC/0L7QtNC/0LjRgdGH0LjQutC1LlxuICAgKi9cbiAgcHVibGljIG5vdGlmeSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnU3ViamVjdDogTm90aWZ5aW5nIG9ic2VydmVycy4uLicpO1xuICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgdGhpcy5vYnNlcnZlcnMpIHtcbiAgICAgIG9ic2VydmVyLnVwZGF0ZSh0aGlzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog0J7QsdGL0YfQvdC+INC70L7Qs9C40LrQsCDQv9C+0LTQv9C40YHQutC4IOKAkyDRgtC+0LvRjNC60L4g0YfQsNGB0YLRjCDRgtC+0LPQviwg0YfRgtC+INC00LXQu9Cw0LXRgiDQmNC30LTQsNGC0LXQu9GMLiDQmNC30LTQsNGC0LXQu9C4XG4gICAqINGH0LDRgdGC0L4g0YHQvtC00LXRgNC20LDRgiDQvdC10LrQvtGC0L7RgNGD0Y4g0LLQsNC20L3Rg9GOINCx0LjQt9C90LXRgS3Qu9C+0LPQuNC60YMsINC60L7RgtC+0YDQsNGPINC30LDQv9GD0YHQutCw0LXRgiDQvNC10YLQvtC0XG4gICAqINGD0LLQtdC00L7QvNC70LXQvdC40Y8g0LLRgdGP0LrQuNC5INGA0LDQtywg0LrQvtCz0LTQsCDQtNC+0LvQttC90L4g0L/RgNC+0LjQt9C+0LnRgtC4INGH0YLQvi3RgtC+INCy0LDQttC90L7QtSAo0LjQu9C4INC/0L7RgdC70LVcbiAgICog0Y3RgtC+0LPQvikuXG4gICAqL1xuICBwdWJsaWMgc29tZUJ1c2luZXNzTG9naWMoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1xcblN1YmplY3Q6IElcXCdtIGRvaW5nIHNvbWV0aGluZyBpbXBvcnRhbnQuJyk7XG4gICAgdGhpcy5zdGF0ZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxMCArIDEpKTtcblxuICAgIGNvbnNvbGUubG9nKGBTdWJqZWN0OiBNeSBzdGF0ZSBoYXMganVzdCBjaGFuZ2VkIHRvOiAke3RoaXMuc3RhdGV9YCk7XG4gICAgdGhpcy5ub3RpZnkoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBTdWJqZWN0LCBDb25jcmV0ZVN1YmplY3QgfTtcbiIsImNsYXNzIFNsaWRlckJvZHkge1xuICBwcml2YXRlIF9wYXJlbnRJZDogc3RyaW5nO1xuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICBib2R5U2xpZGVyOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihwYXJlbnRJZCkge1xuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XG4gIH07XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX3BhcmVudElkKTtcbiAgICB0aGlzLmJvZHlTbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICB0aGlzLmJvZHlTbGlkZXIuY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWJvZHknKTtcbiAgICB0aGlzLmJvZHlTbGlkZXIuc2V0QXR0cmlidXRlKCdpZCcsICdzbGlkZXItYm9keScpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmJvZHlTbGlkZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmJvZHlTbGlkZXIucmVtb3ZlKCk7XG4gIH1cblxuICAvLyBnZXRXaWR0aCgpIHtcbiAgLy8gICByZXR1cm4gdGhpcy5ib2R5U2xpZGVyLm9mZnNldFdpZHRoO1xuICAvLyB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNsaWRlckJvZHk7XG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XG5cbmltcG9ydCBzbGlkZXJSdW4gZnJvbSAnLi9tb2R1bGVzL3NsaWRlcic7XG5pbXBvcnQgU2xpZGVyQm9keSBmcm9tICcuL21vZHVsZXMvc2xpZGVyQm9keSc7XG5pbXBvcnQgU2xpZGVyVGh1bWIgZnJvbSAnLi9tb2R1bGVzL3NsaWRlclRodW1iJztcbmltcG9ydCBUaXBWYWx1ZSBmcm9tICcuL21vZHVsZXMvdGlwVmFsdWUnO1xuaW1wb3J0IFNjYWxlIGZyb20gJy4vbW9kdWxlcy9zY2FsZSc7XG5pbXBvcnQgeyBDb25jcmV0ZVN1YmplY3QgfSBmcm9tICcuL21vZHVsZXMvYXBwJztcbmltcG9ydCBWaWV3IGZyb20gJy4vbW9kdWxlcy92aWV3JztcbmltcG9ydCB7IENvbmNyZXRlT2JzZXJ2ZXJBLCBDb25jcmV0ZU9ic2VydmVyQiB9IGZyb20gJy4vbW9kdWxlcy9wcmVzZW50ZXInO1xuXG5jb25zdCB2aWV3OiBWaWV3ID0gbmV3IFZpZXcoKTtcbnZpZXcuc2hvdygpO1xuXG5jb25zdCBzbGlkZXJUaHVtYjogU2xpZGVyVGh1bWIgPSBuZXcgU2xpZGVyVGh1bWIoKTtcbnNsaWRlclRodW1iLmluaXQoKTtcblxuY29uc3QgdGlwVmFsdWU6IFRpcFZhbHVlID0gbmV3IFRpcFZhbHVlKCk7XG50aXBWYWx1ZS5pbml0KCk7XG5cbmNvbnN0IHNjYWxlOiBTY2FsZSA9IG5ldyBTY2FsZSgpO1xuc2NhbGUuaW5pdCgpO1xuXG5zbGlkZXJSdW4oKTtcblxuLyoqXG4qINCa0LvQuNC10L3RgtGB0LrQuNC5INC60L7QtC5cbiovXG5cbmNvbnN0IHN1YmplY3QgPSBuZXcgQ29uY3JldGVTdWJqZWN0KCk7XG5cbmNvbnN0IG9ic2VydmVyMSA9IG5ldyBDb25jcmV0ZU9ic2VydmVyQSgpO1xuc3ViamVjdC5hdHRhY2gob2JzZXJ2ZXIxKTtcblxuY29uc3Qgb2JzZXJ2ZXIyID0gbmV3IENvbmNyZXRlT2JzZXJ2ZXJCKCk7XG5zdWJqZWN0LmF0dGFjaChvYnNlcnZlcjIpO1xuXG5zdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XG5zdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XG5cbnN1YmplY3QuZGV0YWNoKG9ic2VydmVyMik7XG5cbnN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcblxuLy8gY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpO1xuXG4vLyBjb25zdCB0b206IFVzZXIgPSBuZXcgVXNlcign0KLQvtC8JywgMjkpO1xuLy8gZWwuaW5uZXJIVE1MID0gYNCY0LzRjzogJHt0b20ubmFtZX0g0LLQvtC30YDQsNGB0YI6ICR7dG9tLmFnZX1gO1xuXG4vKiBjb25zdCBNVlAgPSB7XG4gIG1ha2VPYnNlcnZhYmxlU3ViamVjdCgpIHtcbiAgICBjb25zdCBvYnNlcnZlcnMgPSBbXTtcbiAgICBjb25zdCBhZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAodHlwZW9mIG8gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZXJzW2ldO1xuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IG8pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIGFscmVhZHkgaW4gdGhlIGxpc3QnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgb2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTtcbiAgICAgICAgaWYgKG9ic2VydmVyID09PSBvKSB7XG4gICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGZpbmQgb2JzZXJ2ZXIgaW4gbGlzdCBvZiBvYnNlcnZlcnMnKTtcbiAgICB9O1xuICAgIGNvbnN0IG5vdGlmeU9ic2VydmVycyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAvLyBNYWtlIGEgY29weSBvZiBvYnNlcnZlciBsaXN0IGluIGNhc2UgdGhlIGxpc3RcbiAgICAgIC8vIGlzIG11dGF0ZWQgZHVyaW5nIHRoZSBub3RpZmljYXRpb25zLlxuICAgICAgY29uc3Qgb2JzZXJ2ZXJzU25hcHNob3QgPSBvYnNlcnZlcnMuc2xpY2UoMCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVyc1NuYXBzaG90Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG9ic2VydmVyc1NuYXBzaG90W2ldKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIGFkZE9ic2VydmVyLFxuICAgICAgcmVtb3ZlT2JzZXJ2ZXIsXG4gICAgICBub3RpZnlPYnNlcnZlcnMsXG4gICAgICBub3RpZnk6IG5vdGlmeU9ic2VydmVycyxcbiAgICB9O1xuICB9LFxuXG4gIE1vZGVsKG9wdGlvbnMgPSB7fSkge1xuICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgIC8vIGNvbnN0IGl0ZW1zID0gW107XG4gICAgdGhpcy5vcHRpb25zID0gIW9wdGlvbnMgPyB7fSA6IG9wdGlvbnM7XG4gICAgdGhpcy5tb2RlbENoYW5nZWRTdWJqZWN0ID0gTVZQLm1ha2VPYnNlcnZhYmxlU3ViamVjdCgpO1xuICAgIHRoaXMubWluVmFsdWUgPSAwO1xuICAgIHRoaXMubWF4VmFsdWUgPSAzMDA7XG4gICAgdGhpcy5zdGVwID0gNTA7XG4gICAgdGhpcy5tb2RlID0gJ2hvcml6b250YWwnO1xuICAgIHRoaXMudHlwZSA9ICdzaW5nbGUnO1xuICAgIC8vIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vICAgaWYgKCF2YWx1ZSkge1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gICB9XG4gICAgLy8gICBpdGVtcy5wdXNoKHZhbHVlKTtcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcbiAgICAvLyB9O1xuICAgIC8vIHRoaXMucmVtb3ZlQ3VycmVudEl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICBpZiAodGhhdC5zZWxlY3RlZEluZGV4ID09PSAtMSkge1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gICB9XG4gICAgLy8gICBpdGVtcy5zcGxpY2UodGhhdC5zZWxlY3RlZEluZGV4LCAxKTtcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcbiAgICAvLyB9O1xuICAgIC8vIHRoaXMuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICByZXR1cm4gaXRlbXM7XG4gICAgLy8gfTtcbiAgICAvLyB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAvLyB0aGlzLmdldFNlbGVjdGVkSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICByZXR1cm4gdGhhdC5zZWxlY3RlZEluZGV4O1xuICAgIC8vIH07XG4gICAgLy8gdGhpcy5zZXRTZWxlY3RlZEluZGV4ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gICB0aGF0LnNlbGVjdGVkSW5kZXggPSB2YWx1ZTtcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcbiAgICAvLyB9O1xuICB9LFxuXG4gIFZpZXcoKSB7XG4gICAgLy8gY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XG4gICAgICBzbGlkZXJCb2R5LmluaXQoKTtcblxuICAgICAgY29uc3Qgc2xpZGVyVGh1bWI6IFNsaWRlclRodW1iID0gbmV3IFNsaWRlclRodW1iKCk7XG4gICAgICBzbGlkZXJUaHVtYi5pbml0KCk7XG5cbiAgICAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZSgpO1xuICAgICAgdGlwVmFsdWUuaW5pdCgpO1xuICAgIH07XG5cbiAgICAvLyB0aGF0LnNlbGVjdCA9ICQoJzxzZWxlY3QvPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpO1xuICAgIC8vIHRoYXQuc2VsZWN0LmF0dHIoJ3NpemUnLCAnNCcpO1xuICAgIC8vIHRoYXQuYnV0dG9uQWRkID0gJCgnPGJ1dHRvbj4rPC9idXR0b24+JykuYXBwZW5kVG8ocm9vdE9iamVjdCkuaGVpZ2h0KDIwKTtcbiAgICAvLyB0aGF0LmJ1dHRvblJlbW92ZSA9ICQoJzxidXR0b24+LTwvYnV0dG9uPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpLmhlaWdodCgyMCk7XG4gICAgLy8gbW9kZWwubW9kZWxDaGFuZ2VkU3ViamVjdC5hZGRPYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gICAgLy8gICB2YXIgaXRlbXMgPSBtb2RlbC5nZXRJdGVtcygpO1xuICAgIC8vICAgdmFyIGlubmVySFRNTCA9ICcnO1xuICAgIC8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIC8vICAgICBpbm5lckhUTUwgKz0gXCI8b3B0aW9uPlwiICsgaXRlbXNbaV0gKyBcIjwvb3B0aW9uPlwiO1xuICAgIC8vICAgfVxuICAgIC8vICAgdGhhdC5zZWxlY3QuaHRtbChpbm5lckhUTUwpO1xuICAgIC8vIH0pO1xuICB9LFxuXG4gIENvbnRyb2xsZXIobW9kZWwsIHZpZXcpIHtcbiAgICB2aWV3LmluaXQoKTtcbiAgICAvLyB2aWV3LmJ1dHRvbkFkZC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgIG1vZGVsLmFkZEl0ZW0ocHJvbXB0KCdhZGR2YWx1ZScpKTtcbiAgICAvLyB9KTtcbiAgICAvLyB2aWV3LmJ1dHRvblJlbW92ZS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgIG1vZGVsLnJlbW92ZUN1cnJlbnRJdGVtKCk7XG4gICAgLy8gfSk7XG4gICAgLy8gdmlldy5zZWxlY3QuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICBtb2RlbC5zZXRTZWxlY3RlZEluZGV4KHZpZXcuc2VsZWN0WzBdLnNlbGVjdGVkSW5kZXgpO1xuICAgIC8vIH0pO1xuICB9LFxufTsgKi9cblxuLyogJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICB2YXIgbW9kZWwgPSBuZXcgT01WQy5Nb2RlbCgpO1xuICB2YXIgdmlldyA9IG5ldyBPTVZDLlZpZXcobW9kZWwsICQoJzxkaXYvPicpLmFwcGVuZFRvKCQoXCJib2R5XCIpKSk7XG4gIHZhciBjb250cm9sbGVyID0gbmV3IE9NVkMuQ29udHJvbGxlcihtb2RlbCwgdmlldyk7XG59KTsgKi9cblxuLy8gY29uc3QgbW9kZWwgPSBuZXcgTVZQLk1vZGVsKCk7XG4vLyBjb25zdCB2aWV3ID0gbmV3IE1WUC5WaWV3KCk7XG4vLyBjb25zdCBjb250cm9sbGVyID0gbmV3IE1WUC5Db250cm9sbGVyKG1vZGVsLCB2aWV3KTtcblxuLy8gY29udHJvbGxlcigpO1xuIiwiaW1wb3J0IFNsaWRlckJvZHkgZnJvbSAnLi9zbGlkZXJCb2R5JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xyXG4gIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgc2hvdygpIHtcclxuICAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSgncmFuZ2Utc2xpZGVyJyk7XHJcbiAgICBzbGlkZXJCb2R5LmluaXQoKTtcclxuICB9XHJcblxyXG4gIC8vIHNsaWRlckxlbmd0aDogbnVtYmVyO1xyXG4gIC8vIGluaXQoKSB7XHJcbiAgLy8gICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAvLyAgIHNsaWRlckJvZHkuaW5pdCgpO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gZ2V0V2lkdGhTbGlkZXIoKSB7XHJcbiAgLy8gICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAvLyAgIHRoaXMuc2xpZGVyTGVuZ3RoID0gc2xpZGVyQm9keS5nZXRXaWR0aCgpO1xyXG4gIC8vICAgcmV0dXJuIHRoaXMuc2xpZGVyTGVuZ3RoO1xyXG4gIC8vIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTdWJqZWN0LCBDb25jcmV0ZVN1YmplY3QgfSBmcm9tICcuL2FwcCc7XG5pbXBvcnQgU2xpZGVyQm9keSBmcm9tICcuL3NsaWRlckJvZHknO1xuaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kZWwnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi92aWV3Jztcbi8qKlxuKiDQmNC90YLQtdGA0YTQtdC50YEg0J3QsNCx0LvRjtC00LDRgtC10LvRjyDQvtCx0YrRj9Cy0LvRj9C10YIg0LzQtdGC0L7QtCDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPLCDQutC+0YLQvtGA0YvQuSDQuNC30LTQsNGC0LXQu9C4XG4qINC40YHQv9C+0LvRjNC30YPRjtGCINC00LvRjyDQvtC/0L7QstC10YnQtdC90LjRjyDRgdCy0L7QuNGFINC/0L7QtNC/0LjRgdGH0LjQutC+0LIuXG4qL1xuaW50ZXJmYWNlIE9ic2VydmVyIHtcbiAgLy8g0J/QvtC70YPRh9C40YLRjCDQvtCx0L3QvtCy0LvQtdC90LjQtSDQvtGCINGB0YPQsdGK0LXQutGC0LAuXG4gIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZDtcbn1cblxuLyoqXG4qINCa0L7QvdC60YDQtdGC0L3Ri9C1INCd0LDQsdC70Y7QtNCw0YLQtdC70Lgg0YDQtdCw0LPQuNGA0YPRjtGCINC90LAg0L7QsdC90L7QstC70LXQvdC40Y8sINCy0YvQv9GD0YnQtdC90L3Ri9C1INCY0LfQtNCw0YLQtdC70LXQvCwg0Lpcbiog0LrQvtGC0L7RgNC+0LzRgyDQvtC90Lgg0L/RgNC40LrRgNC10L/Qu9C10L3Riy5cbiovXG5jbGFzcyBDb25jcmV0ZU9ic2VydmVyQSBpbXBsZW1lbnRzIE9ic2VydmVyIHtcbiAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XG4gICAgaWYgKHN1YmplY3QgaW5zdGFuY2VvZiBDb25jcmV0ZVN1YmplY3QgJiYgc3ViamVjdC5zdGF0ZSA8IDMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDb25jcmV0ZU9ic2VydmVyQTogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIE1vZGVsT2JzZXJ2ZXIgaW1wbGVtZW50cyBPYnNlcnZlciB7XG4gIC8vIHRyYW5zZmVyKCkge1xuICAvLyAgIGNvbnN0IHZpZXc6IFZpZXcgPSBuZXcgVmlldygpO1xuICAgIC8vIHJldHVybiB2aWV3LmdldFdpZHRoU2xpZGVyKCk7XG4gIC8vIH1cbiAgdXBkYXRlKG1vZGVsKSB7XG5cbiAgfVxufVxuXG5jbGFzcyBWaWV3T2JzZXJ2ZXIgaW1wbGVtZW50cyBPYnNlcnZlciB7XG4gIHVwZGF0ZSh2aWV3KSB7XG5cbiAgfVxufVxuXG5jbGFzcyBDb25jcmV0ZU9ic2VydmVyQiBpbXBsZW1lbnRzIE9ic2VydmVyIHtcbiAgaXNTdWJqZWN0U2F0aXNmaWVzKHN1YmplY3QpIHtcbiAgICByZXR1cm4gc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiAoc3ViamVjdC5zdGF0ZSA9PT0gMCB8fCBzdWJqZWN0LnN0YXRlID49IDIpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdWJqZWN0U2F0aXNmaWVzKHN1YmplY3QpKSB7XG4gICAgICBjb25zb2xlLmxvZygnQ29uY3JldGVPYnNlcnZlckI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBPYnNlcnZlciwgQ29uY3JldGVPYnNlcnZlckEsIENvbmNyZXRlT2JzZXJ2ZXJCIH07XG4iXSwic291cmNlUm9vdCI6IiJ9