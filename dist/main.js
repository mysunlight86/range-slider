!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist",i(i.s=3)}([function(e,t,i){var s=i(1),n=i(2);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};s(n,o);e.exports=n.locals||{}},function(e,t,i){"use strict";var s,n=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),l=[];function r(e){for(var t=-1,i=0;i<l.length;i++)if(l[i].identifier===e){t=i;break}return t}function h(e,t){for(var i={},s=[],n=0;n<e.length;n++){var o=e[n],h=t.base?o[0]+t.base:o[0],a=i[h]||0,m="".concat(h," ").concat(a);i[h]=a+1;var d=r(m),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(l[d].references++,l[d].updater(u)):l.push({identifier:m,updater:v(u,t),references:1}),s.push(m)}return s}function a(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var n=i.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var l=o(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var m,d=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function u(e,t,i,s){var n=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var o=document.createTextNode(n),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function c(e,t,i){var s=i.css,n=i.media,o=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var f=null,p=0;function v(e,t){var i,s,n;if(t.singleton){var o=p++;i=f||(f=a(t)),s=u.bind(null,i,o,!1),n=u.bind(null,i,o,!0)}else i=a(t),s=c.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=h(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<i.length;s++){var n=r(i[s]);l[n].references--}for(var o=h(e,t),a=0;a<i.length;a++){var m=r(i[a]);0===l[m].references&&(l[m].updater(),l.splice(m,1))}i=o}}}},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);class s{constructor(e,t){this.bindedOnMouseMove=this.onMouseMove.bind(this),this.bindedOnMouseUp=this.onMouseUp.bind(this),this.bindedOnMouseDown=this.onMouseDown.bind(this),this.bindedOnResize=this.onResize.bind(this),this.view=e,this.lineElem=this.view.init(),this.view.showSliderLine(),this.thumbElem=e.showSliderThumb(),this._options=t.getData(),this.valueElem=e.showSliderValue(),this._model=t,this.sliderRun()}onMouseMove(e){const t=this.thumbElem.offsetWidth/2;let i=e.clientX-this.lineElem.getBoundingClientRect().left-t;const{min:s,max:n}=this._options;i<-t&&(i=-t);const o=this.lineElem.offsetWidth-t;i>o&&(i=o),this.thumbElem.style.left=i+"px",this.lineElem.style.background=`linear-gradient(to right, red ${i}px, #e5e5e5 ${i}px)`,this.valueElem.style.left=i-(this.valueElem.offsetWidth-this.thumbElem.offsetWidth)/2+"px";const l=Math.round((i+t)*(n-s)/this.lineElem.offsetWidth+s),r=this._model.getData();r.values[0]=l;const h=this._model.getSelector();this._model.setData(r,h),this.valueElem.textContent=""+Math.round((i+t)*(n-s)/this.lineElem.offsetWidth+s)}onMouseUp(){document.removeEventListener("mouseup",this.bindedOnMouseUp),document.removeEventListener("mousemove",this.bindedOnMouseMove)}onMouseDown(e){e.preventDefault(),document.addEventListener("mousemove",this.bindedOnMouseMove),document.addEventListener("mouseup",this.bindedOnMouseUp)}static returnFalse(){return!1}sliderRun(){this.thumbElem.addEventListener("mousedown",this.bindedOnMouseDown),this.lineElem.addEventListener("click",this.bindedOnMouseMove),this.thumbElem.addEventListener("dragstart",s.returnFalse),window.addEventListener("resize",this.bindedOnResize)}destroy(){this.thumbElem.removeEventListener("mousedown",this.bindedOnMouseDown),this.lineElem.removeEventListener("click",this.bindedOnMouseMove),this.thumbElem.removeEventListener("dragstart",s.returnFalse),window.removeEventListener("resize",this.bindedOnResize)}onResize(){this.view.setOptions(this._options),this.view.showSliderThumb(),this.view.showSliderValue(),console.log(this.lineElem.offsetWidth)}communicate(e){this._selector=e.getSelector(),this._options=e.getData(),this.view.setOptions(this._options),this.thumbElem=this.view.showSliderThumb(),this.valueElem=this.view.showSliderValue(),console.log("ModelObserver: Reacted to the event.")}}class n{constructor(e,t){this._elemId=e.slice(1),this._options=t}init(){return this.lineElem=document.getElementById(this._elemId),this.thumbElem=document.createElement("DIV"),this.valueElem=document.createElement("DIV"),this.lineElem}showSliderLine(){this.lineElem.classList.add("slider-body")}getPositionElement(e,t){return(t-this._options.min)*this.lineElem.offsetWidth/(this._options.max-this._options.min)-e.offsetWidth/2+"px"}fillSliderLine(e){this.lineElem.style.background=`linear-gradient(to right, red ${e}px, #e5e5e5 ${e}px)`}showSliderThumb(){return this.thumbElem.classList.add("slider-thumb"),this.lineElem.append(this.thumbElem),console.log(this._options),this.thumbElem.style.left=this.getPositionElement(this.thumbElem,this._options.values[0]),this.fillSliderLine(Number(this.thumbElem.style.left.slice(0,-2))),this.thumbElem}getSliderValue(e){return Math.round((e.offsetLeft+e.offsetWidth/2-this.lineElem.offsetLeft)*(this._options.max-this._options.min)/this.lineElem.offsetWidth+this._options.min)}showSliderValue(){return this.valueElem.classList.add("tip-value"),this.lineElem.append(this.valueElem),this.valueElem.textContent=""+this.getSliderValue(this.thumbElem),this.valueElem.style.left=this.getPositionElement(this.valueElem,Number(this.valueElem.textContent)),this.valueElem}showSliderScale(){this.scaleElem=document.createElement("DIV"),this.scaleElem.classList.add("scale"),this.minElem=document.createElement("SPAN"),this.minElem.textContent=""+this._options.min,this.minElem.style.position="absolute",this.maxElem=document.createElement("SPAN"),this.maxElem.textContent=""+this._options.max,this.maxElem.style.position="absolute",this.lineElem.append(this.scaleElem),this.scaleElem.append(this.minElem),this.scaleElem.append(this.maxElem),this.minElem.style.left=this.scaleElem.offsetLeft-this.minElem.offsetWidth/2+"px",this.maxElem.style.left=this.scaleElem.offsetWidth+this.scaleElem.offsetLeft-this.maxElem.offsetWidth/2+"px",this.mark=(this._options.max-this._options.min)/this._options.step;for(let e=1;e<this.mark;e++)this.middleElem=document.createElement("SPAN"),this.middleElem.textContent=""+(this._options.step*e+this._options.min),this.middleElem.style.position="absolute",this.maxElem.insertAdjacentElement("beforebegin",this.middleElem),this.middleElem.style.left=(Number(this.middleElem.textContent)-this._options.min)*this.scaleElem.offsetWidth/(this._options.max-this._options.min)+this.scaleElem.offsetLeft-this.middleElem.offsetWidth/2+"px"}setOptions(e){this._options=e}}class o{constructor(){this.observers=[]}attach(e){this.observers.includes(e)&&console.log("Model: Presenter has been attached already."),console.log("Model: Attached a presenter."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);-1===t&&console.log("Subject: Nonexistent observer."),this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Model: Notifying observers...");for(const e of this.observers)e.communicate(this)}setData(e,t){this._min=e.min,this._max=e.max,this._step=e.step,this._kind=e.kind,this._isBasic=e.isBasic,this._values=e.values,this._selector=t,console.log("Model: My state has just changed"),this.notify()}getSelector(){return this._selector}getData(){return{min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values}}}class l{constructor(e,t){this._min=0,this._max=300,this._step=82,this._kind="horizontal",this._isBasic=!0,this._values=[this._step],this._selector=e,t&&(this._min=t.min?t.min:this._min,this._max=t.max?t.max:this._max,this._step=t.step?t.step:this._step,this._kind=t.kind?t.kind:this._kind,this._isBasic=t.isBasic?t.isBasic:this._isBasic,this._values=t.values?t.values:[this._step])}setData(){this._options={min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values}}init(){const e=new o;this.setData(),e.setData(this._options,this._selector);const t=new n(e.getSelector(),e.getData()),i=new s(t,e);e.attach(i)}}new l("#slider1").init();new l("#slider2",{min:40,step:60,max:245}).init();new l("#slider3",{values:[300]}).init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvcHJlc2VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwiUHJlc2VudGVyIiwidmlldyIsIm1vZGVsIiwidGhpcyIsImJpbmRlZE9uTW91c2VNb3ZlIiwib25Nb3VzZU1vdmUiLCJiaW5kZWRPbk1vdXNlVXAiLCJvbk1vdXNlVXAiLCJiaW5kZWRPbk1vdXNlRG93biIsIm9uTW91c2VEb3duIiwiYmluZGVkT25SZXNpemUiLCJvblJlc2l6ZSIsImxpbmVFbGVtIiwiaW5pdCIsInNob3dTbGlkZXJMaW5lIiwidGh1bWJFbGVtIiwic2hvd1NsaWRlclRodW1iIiwiX29wdGlvbnMiLCJnZXREYXRhIiwidmFsdWVFbGVtIiwic2hvd1NsaWRlclZhbHVlIiwiX21vZGVsIiwic2xpZGVyUnVuIiwiZXZlbnQiLCJkZWx0YSIsIm9mZnNldFdpZHRoIiwidGh1bWJQb2ludCIsImNsaWVudFgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwibWluIiwibWF4IiwicmlnaHRFZGdlIiwiYmFja2dyb3VuZCIsInZhbCIsIk1hdGgiLCJyb3VuZCIsImRhdGEiLCJ2YWx1ZXMiLCJzZWxlY3RvciIsImdldFNlbGVjdG9yIiwic2V0RGF0YSIsInRleHRDb250ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJldHVybkZhbHNlIiwic2V0T3B0aW9ucyIsImNvbnNvbGUiLCJsb2ciLCJfc2VsZWN0b3IiLCJWaWV3IiwiZWxlbUlkIiwiX2VsZW1JZCIsInNsaWNlIiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJlbGVtIiwiYXBwZW5kIiwiZ2V0UG9zaXRpb25FbGVtZW50IiwiZmlsbFNsaWRlckxpbmUiLCJOdW1iZXIiLCJvZmZzZXRMZWZ0IiwiZ2V0U2xpZGVyVmFsdWUiLCJzY2FsZUVsZW0iLCJtaW5FbGVtIiwicG9zaXRpb24iLCJtYXhFbGVtIiwibWFyayIsInN0ZXAiLCJtaWRkbGVFbGVtIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiTW9kZWwiLCJvYnNlcnZlcnMiLCJvYnNlcnZlciIsImluY2x1ZGVzIiwib2JzZXJ2ZXJJbmRleCIsImluZGV4T2YiLCJjb21tdW5pY2F0ZSIsIl9taW4iLCJfbWF4IiwiX3N0ZXAiLCJfa2luZCIsImtpbmQiLCJf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S0FBSzZFLEtBQU92SyxFQUFRcUgsSUFBTXJILEVBQVFxSCxJQUFNM0IsS0FBSzZFLEtBQzdDN0UsS0FBSzhFLEtBQU94SyxFQUFRc0gsSUFBTXRILEVBQVFzSCxJQUFNNUIsS0FBSzhFLEtBQzdDOUUsS0FBSytFLE1BQVF6SyxFQUFRNkosS0FBTzdKLEVBQVE2SixLQUFPbkUsS0FBSytFLE1BQ2hEL0UsS0FBS2dGLE1BQVExSyxFQUFRMkssS0FBTzNLLEVBQVEySyxLQUFPakYsS0FBS2dGLE1BQ2hEaEYsS0FBS2tGLFNBQVc1SyxFQUFRNkssUUFBVTdLLEVBQVE2SyxRQUFVbkYsS0FBS2tGLFNBQ3pEbEYsS0FBS29GLFFBQVU5SyxFQUFRNkgsT0FBUzdILEVBQVE2SCxPQUFTLENBQUNuQyxLQUFLK0UsUUFJM0QsVUFDRS9FLEtBQUtjLFNBQVcsQ0FDZGEsSUFBSzNCLEtBQUs2RSxLQUNWakQsSUFBSzVCLEtBQUs4RSxLQUNWWCxLQUFNbkUsS0FBSytFLE1BQ1hFLEtBQU1qRixLQUFLZ0YsTUFDWEcsUUFBU25GLEtBQUtrRixTQUNkL0MsT0FBUW5DLEtBQUtvRixTQUlqQixPQUNFLE1BQU1yRixFQUFlLElBQUl1RSxFQUN6QnRFLEtBQUtzQyxVQUNMdkMsRUFBTXVDLFFBQVF0QyxLQUFLYyxTQUFVZCxLQUFLK0MsV0FDbEMsTUFBTWpELEVBQU8sSUFBSWtELEVBQUtqRCxFQUFNc0MsY0FBZXRDLEVBQU1nQixXQUMzQ3VFLEVBQVksSUFBSXpGLEVBQVVDLEVBQU1DLEdBQ3RDQSxFQUFNd0YsT0FBT0QsSUM3Q08sSUFBSSxFQUFPLFlBQzNCNUUsT0FFZ0IsSUFBSSxFQUFPLFdBQVksQ0FBRWlCLElBQUssR0FBSXdDLEtBQU0sR0FBSXZDLElBQUssTUFDakVsQixPQUVnQixJQUFJLEVBQU8sV0FBWSxDQUFFeUIsT0FBUSxDQUFDLE9BQ2xEekIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3RcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbmltcG9ydCBTdWJqZWN0IGZyb20gJy4vYXBwJztcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJztcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XHJcblxyXG50eXBlIG9wdGlvbnNUeXBlID0ge1xyXG4gIG1pbj86IG51bWJlcixcclxuICBtYXg/OiBudW1iZXIsXHJcbiAgc3RlcD86IG51bWJlcixcclxuICBraW5kPzogc3RyaW5nLFxyXG4gIGlzQmFzaWM/OiBib29sZWFuLFxyXG4gIHZhbHVlcz86IG51bWJlcltdXHJcbn07XHJcblxyXG4vKipcclxuKiDQmNC90YLQtdGA0YTQtdC50YEg0J3QsNCx0LvRjtC00LDRgtC10LvRjyDQvtCx0YrRj9Cy0LvRj9C10YIg0LzQtdGC0L7QtCDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPLCDQutC+0YLQvtGA0YvQuSDQuNC30LTQsNGC0LXQu9C4XHJcbiog0LjRgdC/0L7Qu9GM0LfRg9GO0YIg0LTQu9GPINC+0L/QvtCy0LXRidC10L3QuNGPINGB0LLQvtC40YUg0L/QvtC00L/QuNGB0YfQuNC60L7Qsi5cclxuKi9cclxuaW50ZXJmYWNlIE9ic2VydmVyIHtcclxuICAvLyDQn9C+0LvRg9GH0LjRgtGMINC+0LHQvdC+0LLQu9C10L3QuNC1INC+0YIg0YHRg9Cx0YrQtdC60YLQsC5cclxuICBjb21tdW5pY2F0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiog0JrQvtC90LrRgNC10YLQvdGL0LUg0J3QsNCx0LvRjtC00LDRgtC10LvQuCDRgNC10LDQs9C40YDRg9GO0YIg0L3QsCDQvtCx0L3QvtCy0LvQtdC90LjRjywg0LLRi9C/0YPRidC10L3QvdGL0LUg0JjQt9C00LDRgtC10LvQtdC8LCDQulxyXG4qINC60L7RgtC+0YDQvtC80YMg0L7QvdC4INC/0YDQuNC60YDQtdC/0LvQtdC90YsuXHJcbiovXHJcbi8vIGNsYXNzIENvbmNyZXRlT2JzZXJ2ZXJBIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4vLyAgIHB1YmxpYyB1cGRhdGUoc3ViamVjdDogU3ViamVjdCk6IHZvaWQge1xyXG4vLyAgICAgaWYgKHN1YmplY3QgaW5zdGFuY2VvZiBDb25jcmV0ZVN1YmplY3QgJiYgc3ViamVjdC5zdGF0ZSA8IDMpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coJ0NvbmNyZXRlT2JzZXJ2ZXJBOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbmNsYXNzIFByZXNlbnRlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuICAvLyBtb2RlbE9wdGlvbnM6IHttaW46IG51bWJlciwgbWF4OiBudW1iZXIsIHN0ZXA6IG51bWJlcn07XHJcbiAgcHJpdmF0ZSBiaW5kZWRPbk1vdXNlTW92ZTtcclxuICBwcml2YXRlIGJpbmRlZE9uTW91c2VVcDtcclxuICBwcml2YXRlIGJpbmRlZE9uTW91c2VEb3duO1xyXG4gIHByaXZhdGUgYmluZGVkT25SZXNpemU7XHJcbiAgX3NlbGVjdG9yOiBzdHJpbmc7XHJcbiAgX29wdGlvbnM6IG9wdGlvbnNUeXBlO1xyXG4gIGxpbmVFbGVtOiBIVE1MRWxlbWVudDtcclxuICB0aHVtYkVsZW06IEhUTUxFbGVtZW50O1xyXG4gIHZhbHVlRWxlbTogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIHByaXZhdGUgdmlldzogVmlldztcclxuICBwcml2YXRlIF9tb2RlbDogTW9kZWw7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpZXc6IFZpZXcsIG1vZGVsOiBNb2RlbCkge1xyXG4gICAgdGhpcy5iaW5kZWRPbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuYmluZGVkT25Nb3VzZVVwID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuYmluZGVkT25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XHJcbiAgICAvLyB0aGlzLmJpbmRlZE9uUmVzaXplID0gUHJlc2VudGVyLm9uUmVzaXplLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmJpbmRlZE9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgIHRoaXMubGluZUVsZW0gPSB0aGlzLnZpZXcuaW5pdCgpO1xyXG4gICAgdGhpcy52aWV3LnNob3dTbGlkZXJMaW5lKCk7XHJcbiAgICB0aGlzLnRodW1iRWxlbSA9IHZpZXcuc2hvd1NsaWRlclRodW1iKCk7XHJcblxyXG4gICAgdGhpcy5fb3B0aW9ucyA9IG1vZGVsLmdldERhdGEoKTtcclxuICAgIHRoaXMudmFsdWVFbGVtID0gdmlldy5zaG93U2xpZGVyVmFsdWUoKTtcclxuICAgIHRoaXMuX21vZGVsID0gbW9kZWw7XHJcblxyXG4gICAgdGhpcy5zbGlkZXJSdW4oKTtcclxuICB9XHJcblxyXG4gIC8vIHByaXZhdGUgYmluZGVkT25Nb3VzZVVwID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcclxuXHJcbiAgb25Nb3VzZU1vdmUoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IGRlbHRhID0gdGhpcy50aHVtYkVsZW0ub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgbGV0IHRodW1iUG9pbnQgPSBldmVudC5jbGllbnRYIC0gdGhpcy5saW5lRWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gZGVsdGE7XHJcbiAgICAvLyBjb25zdCBtaW4gPSB0aGlzLl9vcHRpb25zLm1pbjtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbWluLFxyXG4gICAgICBtYXgsXHJcbiAgICAgIC8vIHN0ZXAsXHJcbiAgICAgIC8vIGtpbmQsXHJcbiAgICAgIC8vIGlzQmFzaWMsXHJcbiAgICAgIC8vIHZhbHVlc1xyXG4gICAgfSA9IHRoaXMuX29wdGlvbnM7XHJcblxyXG4gICAgLy8g0LrRg9GA0YHQvtGAINCy0YvRiNC10Lsg0LjQtyDRgdC70LDQudC00LXRgNCwID0+INC+0YHRgtCw0LLQuNGC0Ywg0LHQtdCz0YPQvdC+0Log0LIg0LXQs9C+INCz0YDQsNC90LjRhtCw0YUuXHJcbiAgICBpZiAodGh1bWJQb2ludCA8IC1kZWx0YSkge1xyXG4gICAgICB0aHVtYlBvaW50ID0gLWRlbHRhO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmlnaHRFZGdlID0gdGhpcy5saW5lRWxlbS5vZmZzZXRXaWR0aCAtIGRlbHRhO1xyXG4gICAgaWYgKHRodW1iUG9pbnQgPiByaWdodEVkZ2UpIHtcclxuICAgICAgdGh1bWJQb2ludCA9IHJpZ2h0RWRnZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRodW1iRWxlbS5zdHlsZS5sZWZ0ID0gYCR7dGh1bWJQb2ludH1weGA7XHJcbiAgICB0aGlzLmxpbmVFbGVtLnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZWQgJHt0aHVtYlBvaW50fXB4LCAjZTVlNWU1ICR7dGh1bWJQb2ludH1weClgO1xyXG4gICAgdGhpcy52YWx1ZUVsZW0uc3R5bGUubGVmdCA9IGAke3RodW1iUG9pbnQgLSAodGhpcy52YWx1ZUVsZW0ub2Zmc2V0V2lkdGggLSB0aGlzLnRodW1iRWxlbS5vZmZzZXRXaWR0aCkgLyAyfXB4YDtcclxuXHJcbiAgICBjb25zdCB2YWwgPSBNYXRoLnJvdW5kKCgodGh1bWJQb2ludFxyXG4gICAgICArIGRlbHRhKSAqIChtYXggLSBtaW4pKSAvIHRoaXMubGluZUVsZW0ub2Zmc2V0V2lkdGggKyBtaW4pO1xyXG5cclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9tb2RlbC5nZXREYXRhKCk7XHJcbiAgICBkYXRhLnZhbHVlc1swXSA9IHZhbDtcclxuICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5fbW9kZWwuZ2V0U2VsZWN0b3IoKTtcclxuICAgIHRoaXMuX21vZGVsLnNldERhdGEoZGF0YSwgc2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMudmFsdWVFbGVtLnRleHRDb250ZW50ID0gYCR7TWF0aC5yb3VuZCgoKHRodW1iUG9pbnRcclxuICAgICAgKyBkZWx0YSkgKiAobWF4IC0gbWluKSkgLyB0aGlzLmxpbmVFbGVtLm9mZnNldFdpZHRoICsgbWluKX1gO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZVVwKCk6IHZvaWQge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuYmluZGVkT25Nb3VzZVVwKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuYmluZGVkT25Nb3VzZU1vdmUpO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5iaW5kZWRPbk1vdXNlTW92ZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5iaW5kZWRPbk1vdXNlVXApO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJldHVybkZhbHNlKCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgc2xpZGVyUnVuKCkge1xyXG4gICAgdGhpcy50aHVtYkVsZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5iaW5kZWRPbk1vdXNlRG93bik7XHJcbiAgICB0aGlzLmxpbmVFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5iaW5kZWRPbk1vdXNlTW92ZSk7XHJcbiAgICB0aGlzLnRodW1iRWxlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBQcmVzZW50ZXIucmV0dXJuRmFsc2UpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuYmluZGVkT25SZXNpemUpO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMudGh1bWJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuYmluZGVkT25Nb3VzZURvd24pO1xyXG4gICAgdGhpcy5saW5lRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYmluZGVkT25Nb3VzZU1vdmUpO1xyXG4gICAgdGhpcy50aHVtYkVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgUHJlc2VudGVyLnJldHVybkZhbHNlKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmJpbmRlZE9uUmVzaXplKTtcclxuICB9XHJcblxyXG4gIC8vIHN0YXRpYyBvblJlc2l6ZSh2aWV3OiBWaWV3KSB7XHJcbiAgLy8gICB2aWV3LnNob3dTbGlkZXJMaW5lKCk7XHJcbiAgLy8gICB0aGlzLnRodW1iRWxlbSA9IHZpZXcuc2hvd1NsaWRlclRodW1iKCk7XHJcbiAgLy8gICB0aGlzLnZhbHVlRWxlbSA9IHZpZXcuc2hvd1NsaWRlclZhbHVlKCk7XHJcbiAgLy8gfVxyXG5cclxuICBvblJlc2l6ZSgpIHtcclxuICAgIHRoaXMudmlldy5zZXRPcHRpb25zKHRoaXMuX29wdGlvbnMpO1xyXG5cclxuICAgIHRoaXMudmlldy5zaG93U2xpZGVyVGh1bWIoKTtcclxuICAgIHRoaXMudmlldy5zaG93U2xpZGVyVmFsdWUoKTtcclxuXHJcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGNyZWF0ZSBuZXcgZWxlbW50c1xyXG4gICAgLy8gVE9ETzogdXNlIGV4aXN0IGVsZW1lbnRzXHJcbiAgICAvLyB0aGlzLnZpZXcuc2hvd1NsaWRlclNjYWxlKCk7XHJcblxyXG4gICAgY29uc29sZS5sb2codGhpcy5saW5lRWxlbS5vZmZzZXRXaWR0aCk7XHJcbiAgfVxyXG5cclxuICBjb21tdW5pY2F0ZShtb2RlbDogTW9kZWwpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gbW9kZWwuZ2V0U2VsZWN0b3IoKTtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBtb2RlbC5nZXREYXRhKCk7XHJcbiAgICB0aGlzLnZpZXcuc2V0T3B0aW9ucyh0aGlzLl9vcHRpb25zKTtcclxuICAgIHRoaXMudGh1bWJFbGVtID0gdGhpcy52aWV3LnNob3dTbGlkZXJUaHVtYigpO1xyXG4gICAgdGhpcy52YWx1ZUVsZW0gPSB0aGlzLnZpZXcuc2hvd1NsaWRlclZhbHVlKCk7XHJcblxyXG4gICAgLy8gdGhpcyBmdW5jdGlvbiBjcmVhdGUgbmV3IGVsZW1udHNcclxuICAgIC8vIFRPRE86IHVzZSBleGlzdCBlbGVtZW50c1xyXG4gICAgLy8gdGhpcy52aWV3LnNob3dTbGlkZXJTY2FsZSgpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdNb2RlbE9ic2VydmVyOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGNsYXNzIFZpZXdPYnNlcnZlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuLy8gICB1cGRhdGUodmlldykge1xyXG5cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGNsYXNzIENvbmNyZXRlT2JzZXJ2ZXJCIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4vLyAgIGlzU3ViamVjdFNhdGlzZmllcyhzdWJqZWN0KSB7XHJcbi8vICAgICByZXR1cm4gc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiAoc3ViamVjdC5zdGF0ZSA9PT0gMCB8fCBzdWJqZWN0LnN0YXRlID49IDIpO1xyXG4vLyAgIH1cclxuXHJcbi8vICAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XHJcbi8vICAgICBpZiAodGhpcy5pc1N1YmplY3RTYXRpc2ZpZXMoc3ViamVjdCkpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coJ0NvbmNyZXRlT2JzZXJ2ZXJCOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGV4cG9ydCB7IE9ic2VydmVyLCBDb25jcmV0ZU9ic2VydmVyQSwgQ29uY3JldGVPYnNlcnZlckIsIFByZXNlbnRlciB9O1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuZXhwb3J0IHsgT2JzZXJ2ZXIsIFByZXNlbnRlciB9O1xyXG4iLCIvLyBpbXBvcnQgU2NhbGUgZnJvbSAnLi9zY2FsZSc7XHJcblxyXG50eXBlIG9wdGlvbnNUeXBlID0ge1xyXG4gIG1pbj86IG51bWJlcixcclxuICBtYXg/OiBudW1iZXIsXHJcbiAgc3RlcD86IG51bWJlcixcclxuICBraW5kPzogc3RyaW5nLFxyXG4gIGlzQmFzaWM/OiBib29sZWFuLFxyXG4gIHZhbHVlcz86IG51bWJlcltdXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcclxuICBfZWxlbUlkOiBzdHJpbmc7XHJcbiAgX29wdGlvbnM6IG9wdGlvbnNUeXBlO1xyXG4gIGxpbmVFbGVtOiBIVE1MRWxlbWVudDtcclxuICB0aHVtYkVsZW06IEhUTUxFbGVtZW50O1xyXG4gIHZhbHVlRWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgc2NhbGVFbGVtOiBIVE1MRWxlbWVudDtcclxuICBtaW5FbGVtOiBIVE1MRWxlbWVudDtcclxuICBtYXhFbGVtOiBIVE1MRWxlbWVudDtcclxuICBtaWRkbGVFbGVtOiBIVE1MRWxlbWVudDtcclxuICBtYXJrOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGVsZW1JZDogc3RyaW5nLCBvcHRpb25zOiBvcHRpb25zVHlwZSkge1xyXG4gICAgdGhpcy5fZWxlbUlkID0gZWxlbUlkLnNsaWNlKDEpO1xyXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5saW5lRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2VsZW1JZCk7XHJcbiAgICB0aGlzLnRodW1iRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgdGhpcy52YWx1ZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcclxuICAgIHJldHVybiB0aGlzLmxpbmVFbGVtO1xyXG4gIH1cclxuXHJcbiAgc2hvd1NsaWRlckxpbmUoKSB7XHJcbiAgICB0aGlzLmxpbmVFbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1ib2R5Jyk7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbkVsZW1lbnQoZWxlbTogSFRNTEVsZW1lbnQsIHZhbDogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gYCR7KCh2YWwgLSB0aGlzLl9vcHRpb25zLm1pbikgKiB0aGlzLmxpbmVFbGVtLm9mZnNldFdpZHRoKVxyXG4gICAgICAvICh0aGlzLl9vcHRpb25zLm1heCAtIHRoaXMuX29wdGlvbnMubWluKSAtIGVsZW0ub2Zmc2V0V2lkdGggLyAyfXB4YDtcclxuICB9XHJcblxyXG4gIGZpbGxTbGlkZXJMaW5lKGxlbmd0aDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmxpbmVFbGVtLnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZWQgJHtsZW5ndGh9cHgsICNlNWU1ZTUgJHtsZW5ndGh9cHgpYDtcclxuICB9XHJcblxyXG4gIHNob3dTbGlkZXJUaHVtYigpIHtcclxuICAgIHRoaXMudGh1bWJFbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci10aHVtYicpO1xyXG4gICAgdGhpcy5saW5lRWxlbS5hcHBlbmQodGhpcy50aHVtYkVsZW0pO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5fb3B0aW9ucyk7XHJcbiAgICB0aGlzLnRodW1iRWxlbS5zdHlsZS5sZWZ0ID0gdGhpcy5nZXRQb3NpdGlvbkVsZW1lbnQodGhpcy50aHVtYkVsZW0sIHRoaXMuX29wdGlvbnMudmFsdWVzWzBdKTtcclxuICAgIHRoaXMuZmlsbFNsaWRlckxpbmUoTnVtYmVyKHRoaXMudGh1bWJFbGVtLnN0eWxlLmxlZnQuc2xpY2UoMCwgLTIpKSk7XHJcbiAgICByZXR1cm4gdGhpcy50aHVtYkVsZW07XHJcbiAgfVxyXG5cclxuICBnZXRTbGlkZXJWYWx1ZShlbGVtOiBIVE1MRWxlbWVudCkge1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQoKChlbGVtLm9mZnNldExlZnRcclxuICAgICAgKyBlbGVtLm9mZnNldFdpZHRoIC8gMiAtIHRoaXMubGluZUVsZW0ub2Zmc2V0TGVmdClcclxuICAgICAgKiAodGhpcy5fb3B0aW9ucy5tYXggLSB0aGlzLl9vcHRpb25zLm1pbikpXHJcbiAgICAgIC8gdGhpcy5saW5lRWxlbS5vZmZzZXRXaWR0aCArIHRoaXMuX29wdGlvbnMubWluKTtcclxuICB9XHJcblxyXG4gIHNob3dTbGlkZXJWYWx1ZSgpIHtcclxuICAgIHRoaXMudmFsdWVFbGVtLmNsYXNzTGlzdC5hZGQoJ3RpcC12YWx1ZScpO1xyXG4gICAgdGhpcy5saW5lRWxlbS5hcHBlbmQodGhpcy52YWx1ZUVsZW0pO1xyXG4gICAgdGhpcy52YWx1ZUVsZW0udGV4dENvbnRlbnQgPSBgJHt0aGlzLmdldFNsaWRlclZhbHVlKHRoaXMudGh1bWJFbGVtKX1gO1xyXG4gICAgdGhpcy52YWx1ZUVsZW0uc3R5bGUubGVmdCA9IHRoaXMuZ2V0UG9zaXRpb25FbGVtZW50KHRoaXMudmFsdWVFbGVtLCBOdW1iZXIodGhpcy52YWx1ZUVsZW0udGV4dENvbnRlbnQpKTtcclxuICAgIHJldHVybiB0aGlzLnZhbHVlRWxlbTtcclxuICB9XHJcblxyXG4gIHNob3dTbGlkZXJTY2FsZSgpIHtcclxuICAgIHRoaXMuc2NhbGVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICB0aGlzLnNjYWxlRWxlbS5jbGFzc0xpc3QuYWRkKCdzY2FsZScpO1xyXG4gICAgdGhpcy5taW5FbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xyXG4gICAgdGhpcy5taW5FbGVtLnRleHRDb250ZW50ID0gYCR7dGhpcy5fb3B0aW9ucy5taW59YDtcclxuICAgIHRoaXMubWluRWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICB0aGlzLm1heEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTUEFOJyk7XHJcbiAgICB0aGlzLm1heEVsZW0udGV4dENvbnRlbnQgPSBgJHt0aGlzLl9vcHRpb25zLm1heH1gO1xyXG4gICAgdGhpcy5tYXhFbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgIHRoaXMubGluZUVsZW0uYXBwZW5kKHRoaXMuc2NhbGVFbGVtKTtcclxuICAgIHRoaXMuc2NhbGVFbGVtLmFwcGVuZCh0aGlzLm1pbkVsZW0pO1xyXG4gICAgdGhpcy5zY2FsZUVsZW0uYXBwZW5kKHRoaXMubWF4RWxlbSk7XHJcbiAgICB0aGlzLm1pbkVsZW0uc3R5bGUubGVmdCA9IGAke3RoaXMuc2NhbGVFbGVtLm9mZnNldExlZnQgLSB0aGlzLm1pbkVsZW0ub2Zmc2V0V2lkdGggLyAyfXB4YDtcclxuICAgIHRoaXMubWF4RWxlbS5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5zY2FsZUVsZW0ub2Zmc2V0V2lkdGggKyB0aGlzLnNjYWxlRWxlbS5vZmZzZXRMZWZ0XHJcbiAgICAgIC0gdGhpcy5tYXhFbGVtLm9mZnNldFdpZHRoIC8gMn1weGA7XHJcbiAgICB0aGlzLm1hcmsgPSAodGhpcy5fb3B0aW9ucy5tYXggLSB0aGlzLl9vcHRpb25zLm1pbikgLyB0aGlzLl9vcHRpb25zLnN0ZXA7XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMubWFyazsgaSsrKSB7XHJcbiAgICAgIHRoaXMubWlkZGxlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcclxuICAgICAgdGhpcy5taWRkbGVFbGVtLnRleHRDb250ZW50ID0gYCR7dGhpcy5fb3B0aW9ucy5zdGVwICogaSArIHRoaXMuX29wdGlvbnMubWlufWA7XHJcbiAgICAgIHRoaXMubWlkZGxlRWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgIHRoaXMubWF4RWxlbS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWJlZ2luJywgdGhpcy5taWRkbGVFbGVtKTtcclxuICAgICAgdGhpcy5taWRkbGVFbGVtLnN0eWxlLmxlZnQgPSBgJHsoKChOdW1iZXIodGhpcy5taWRkbGVFbGVtLnRleHRDb250ZW50KSAtIHRoaXMuX29wdGlvbnMubWluKVxyXG4gICAgICAgICogdGhpcy5zY2FsZUVsZW0ub2Zmc2V0V2lkdGgpIC8gKHRoaXMuX29wdGlvbnMubWF4IC0gdGhpcy5fb3B0aW9ucy5taW4pKVxyXG4gICAgICAgICsgdGhpcy5zY2FsZUVsZW0ub2Zmc2V0TGVmdCAtIHRoaXMubWlkZGxlRWxlbS5vZmZzZXRXaWR0aCAvIDJ9cHhgO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIC8vIHNob3dTY2FsZShtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIHN0ZXA6IG51bWJlcikge1xyXG4gIC8vICAgdGhpcy5fbWluVmFsdWUgPSBtaW47XHJcbiAgLy8gICB0aGlzLl9tYXhWYWx1ZSA9IG1heDtcclxuICAvLyAgIHRoaXMuX3N0ZXBWYWx1ZSA9IHN0ZXA7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgLy8gICBjb25zdCBzY2FsZTogU2NhbGUgPSBuZXcgU2NhbGUodGhpcy5fc2VsZWN0b3IsIHRoaXMuX21pblZhbHVlLCB0aGlzLl9tYXhWYWx1ZSwgdGhpcy5fc3RlcFZhbHVlKTtcclxuICAvLyAgIHNjYWxlLmluaXQoKTtcclxuICAvLyB9XHJcbn1cclxuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbmltcG9ydCBTdWJqZWN0IGZyb20gJy4vYXBwJztcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbmltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSAnLi9wcmVzZW50ZXInO1xyXG5cclxudHlwZSBvcHRpb25zID0ge1xyXG4gIG1pbj86IG51bWJlcjtcclxuICBtYXg/OiBudW1iZXI7XHJcbiAgc3RlcD86IG51bWJlcjtcclxuICBraW5kPzogc3RyaW5nO1xyXG4gIGlzQmFzaWM/OiBib29sZWFuO1xyXG4gIHZhbHVlcz86IG51bWJlcltdO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kZWwgaW1wbGVtZW50cyBTdWJqZWN0IHtcclxuICBwcml2YXRlIF9taW46IG51bWJlcjtcclxuICBwcml2YXRlIF9tYXg6IG51bWJlcjtcclxuICBwcml2YXRlIF9zdGVwOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfa2luZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2lzQmFzaWM6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfdmFsdWVzOiBudW1iZXJbXTtcclxuICBfc2VsZWN0b3I6IHN0cmluZztcclxuXHJcbiAgLy8gY29uc3RydWN0b3Iob3B0aW9ucz86IG9wdGlvbnMpIHtcclxuICAvLyAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9XHJcbiAgLy8gICB0aGlzLl9taW4gPSBvcHRpb25zLm1pbiA/IG9wdGlvbnMubWluIDogMDtcclxuICAvLyAgIHRoaXMuX21heCA9IG9wdGlvbnMubWF4ID8gb3B0aW9ucy5tYXggOiAzMDA7XHJcbiAgLy8gICB0aGlzLl9zdGVwID0gb3B0aW9ucy5zdGVwID8gb3B0aW9ucy5zdGVwIDogNTA7XHJcbiAgLy8gICB0aGlzLl9raW5kID0gb3B0aW9ucy5raW5kID8gb3B0aW9ucy5raW5kIDogJ2hvcml6b250YWwnO1xyXG4gIC8vICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYyA/IG9wdGlvbnMuaXNCYXNpYyA6IHRydWU7XHJcbiAgLy8gdGhpcy5ub3RpZnkoKTtcclxuICAvLyB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtPYnNlcnZlcltdfSDQodC/0LjRgdC+0Log0L/QvtC00L/QuNGB0YfQuNC60L7Qsi4g0JIg0YDQtdCw0LvRjNC90L7QuSDQttC40LfQvdC4INGB0L/QuNGB0L7QulxyXG4gICAqINC/0L7QtNC/0LjRgdGH0LjQutC+0LIg0LzQvtC20LXRgiDRhdGA0LDQvdC40YLRjNGB0Y8g0LIg0LHQvtC70LXQtSDQv9C+0LTRgNC+0LHQvdC+0Lwg0LLQuNC00LUgKNC60LvQsNGB0YHQuNGE0LjRhtC40YDRg9C10YLRgdGPINC/0L5cclxuICAgKiDRgtC40L/RgyDRgdC+0LHRi9GC0LjRjyDQuCDRgi7QtC4pXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBvYnNlcnZlcnM6IE9ic2VydmVyW10gPSBbXTtcclxuXHJcbiAgLyoqXHJcbiAgICog0JzQtdGC0L7QtNGLINGD0L/RgNCw0LLQu9C10L3QuNGPINC/0L7QtNC/0LjRgdC60L7QuS5cclxuICAgKi9cclxuICBwdWJsaWMgYXR0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xyXG4gICAgY29uc3QgaXNFeGlzdCA9IHRoaXMub2JzZXJ2ZXJzLmluY2x1ZGVzKG9ic2VydmVyKTtcclxuICAgIGlmIChpc0V4aXN0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNb2RlbDogUHJlc2VudGVyIGhhcyBiZWVuIGF0dGFjaGVkIGFscmVhZHkuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ01vZGVsOiBBdHRhY2hlZCBhIHByZXNlbnRlci4nKTtcclxuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRldGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IG9ic2VydmVySW5kZXggPSB0aGlzLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcclxuICAgIGlmIChvYnNlcnZlckluZGV4ID09PSAtMSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnU3ViamVjdDogTm9uZXhpc3RlbnQgb2JzZXJ2ZXIuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vYnNlcnZlcnMuc3BsaWNlKG9ic2VydmVySW5kZXgsIDEpO1xyXG4gICAgY29uc29sZS5sb2coJ1N1YmplY3Q6IERldGFjaGVkIGFuIG9ic2VydmVyLicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog0JfQsNC/0YPRgdC6INC+0LHQvdC+0LLQu9C10L3QuNGPINCyINC60LDQttC00L7QvCDQv9C+0LTQv9C40YHRh9C40LrQtS5cclxuICAgKi9cclxuICBwdWJsaWMgbm90aWZ5KCk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coJ01vZGVsOiBOb3RpZnlpbmcgb2JzZXJ2ZXJzLi4uJyk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcclxuICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgdGhpcy5vYnNlcnZlcnMpIHtcclxuICAgICAgb2JzZXJ2ZXIuY29tbXVuaWNhdGUodGhpcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXREYXRhKG9wdGlvbnM6IG9wdGlvbnMsIHNlbGVjdG9yOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX21pbiA9IG9wdGlvbnMubWluO1xyXG4gICAgdGhpcy5fbWF4ID0gb3B0aW9ucy5tYXg7XHJcbiAgICB0aGlzLl9zdGVwID0gb3B0aW9ucy5zdGVwO1xyXG4gICAgdGhpcy5fa2luZCA9IG9wdGlvbnMua2luZDtcclxuICAgIHRoaXMuX2lzQmFzaWMgPSBvcHRpb25zLmlzQmFzaWM7XHJcbiAgICB0aGlzLl92YWx1ZXMgPSBvcHRpb25zLnZhbHVlcztcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICBjb25zb2xlLmxvZygnTW9kZWw6IE15IHN0YXRlIGhhcyBqdXN0IGNoYW5nZWQnKTtcclxuICAgIHRoaXMubm90aWZ5KCk7XHJcbiAgfVxyXG5cclxuICBnZXRTZWxlY3RvcigpIHtcclxuICAgIHJldHVybiB0aGlzLl9zZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIGdldERhdGEoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtaW46IHRoaXMuX21pbixcclxuICAgICAgbWF4OiB0aGlzLl9tYXgsXHJcbiAgICAgIHN0ZXA6IHRoaXMuX3N0ZXAsXHJcbiAgICAgIGtpbmQ6IHRoaXMuX2tpbmQsXHJcbiAgICAgIGlzQmFzaWM6IHRoaXMuX2lzQmFzaWMsXHJcbiAgICAgIHZhbHVlczogdGhpcy5fdmFsdWVzLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUHJlc2VudGVyIH0gZnJvbSAnLi9wcmVzZW50ZXInO1xyXG5pbXBvcnQgVmlldyBmcm9tICcuL3ZpZXcnO1xyXG5pbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbCc7XHJcblxyXG50eXBlIG9wdGlvbnNUeXBlID0ge1xyXG4gIG1pbj86IG51bWJlcixcclxuICBtYXg/OiBudW1iZXIsXHJcbiAgc3RlcD86IG51bWJlcixcclxuICBraW5kPzogc3RyaW5nLFxyXG4gIGlzQmFzaWM/OiBib29sZWFuLFxyXG4gIHZhbHVlcz86IG51bWJlcltdXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXIge1xyXG4gIF9zZWxlY3Rvcjogc3RyaW5nO1xyXG4gIF9vcHRpb25zOiBvcHRpb25zVHlwZTtcclxuXHJcbiAgX21pbiA9IDA7XHJcbiAgX21heCA9IDMwMDtcclxuICBfc3RlcCA9IDgyO1xyXG4gIF9raW5kID0gJ2hvcml6b250YWwnO1xyXG4gIF9pc0Jhc2ljID0gdHJ1ZTtcclxuICBfdmFsdWVzID0gW3RoaXMuX3N0ZXBdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihlbGVtSWQ6IHN0cmluZywgb3B0aW9ucz86IG9wdGlvbnNUeXBlKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IGVsZW1JZDtcclxuICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgIHRoaXMuX21pbiA9IG9wdGlvbnMubWluID8gb3B0aW9ucy5taW4gOiB0aGlzLl9taW47XHJcbiAgICAgIHRoaXMuX21heCA9IG9wdGlvbnMubWF4ID8gb3B0aW9ucy5tYXggOiB0aGlzLl9tYXg7XHJcbiAgICAgIHRoaXMuX3N0ZXAgPSBvcHRpb25zLnN0ZXAgPyBvcHRpb25zLnN0ZXAgOiB0aGlzLl9zdGVwO1xyXG4gICAgICB0aGlzLl9raW5kID0gb3B0aW9ucy5raW5kID8gb3B0aW9ucy5raW5kIDogdGhpcy5fa2luZDtcclxuICAgICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYyA/IG9wdGlvbnMuaXNCYXNpYyA6IHRoaXMuX2lzQmFzaWM7XHJcbiAgICAgIHRoaXMuX3ZhbHVlcyA9IG9wdGlvbnMudmFsdWVzID8gb3B0aW9ucy52YWx1ZXMgOiBbdGhpcy5fc3RlcF07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXREYXRhKCkge1xyXG4gICAgdGhpcy5fb3B0aW9ucyA9IHtcclxuICAgICAgbWluOiB0aGlzLl9taW4sXHJcbiAgICAgIG1heDogdGhpcy5fbWF4LFxyXG4gICAgICBzdGVwOiB0aGlzLl9zdGVwLFxyXG4gICAgICBraW5kOiB0aGlzLl9raW5kLFxyXG4gICAgICBpc0Jhc2ljOiB0aGlzLl9pc0Jhc2ljLFxyXG4gICAgICB2YWx1ZXM6IHRoaXMuX3ZhbHVlcyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgY29uc3QgbW9kZWw6IE1vZGVsID0gbmV3IE1vZGVsKCk7XHJcbiAgICB0aGlzLnNldERhdGEoKTtcclxuICAgIG1vZGVsLnNldERhdGEodGhpcy5fb3B0aW9ucywgdGhpcy5fc2VsZWN0b3IpO1xyXG4gICAgY29uc3QgdmlldyA9IG5ldyBWaWV3KG1vZGVsLmdldFNlbGVjdG9yKCksIG1vZGVsLmdldERhdGEoKSk7XHJcbiAgICBjb25zdCBwcmVzZW50ZXIgPSBuZXcgUHJlc2VudGVyKHZpZXcsIG1vZGVsKTtcclxuICAgIG1vZGVsLmF0dGFjaChwcmVzZW50ZXIpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XHJcbmltcG9ydCBTbGlkZXIgZnJvbSAnLi9tb2R1bGVzL3NsaWRlcic7XHJcblxyXG4vLyBpbXBvcnQgeyBDb25jcmV0ZVN1YmplY3QgfSBmcm9tICcuL21vZHVsZXMvYXBwJztcclxuLy8gaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kdWxlcy9tb2RlbCc7XHJcbi8vIGltcG9ydCB7IENvbmNyZXRlT2JzZXJ2ZXJBLCBDb25jcmV0ZU9ic2VydmVyQiwgUHJlc2VudGVyIH0gZnJvbSAnLi9tb2R1bGVzL3ByZXNlbnRlcic7XHJcbi8vIGltcG9ydCB7IFByZXNlbnRlciB9IGZyb20gJy4vbW9kdWxlcy9wcmVzZW50ZXInO1xyXG5cclxuY29uc3Qgc2xpZGVyMTogU2xpZGVyID0gbmV3IFNsaWRlcignI3NsaWRlcjEnKTtcclxuc2xpZGVyMS5pbml0KCk7XHJcblxyXG5jb25zdCBzbGlkZXIyOiBTbGlkZXIgPSBuZXcgU2xpZGVyKCcjc2xpZGVyMicsIHsgbWluOiA0MCwgc3RlcDogNjAsIG1heDogMjQ1IH0pO1xyXG5zbGlkZXIyLmluaXQoKTtcclxuXHJcbmNvbnN0IHNsaWRlcjM6IFNsaWRlciA9IG5ldyBTbGlkZXIoJyNzbGlkZXIzJywgeyB2YWx1ZXM6IFszMDBdIH0pO1xyXG5zbGlkZXIzLmluaXQoKTtcclxuXHJcbi8qKlxyXG4qINCa0LvQuNC10L3RgtGB0LrQuNC5INC60L7QtC5cclxuKi9cclxuXHJcbi8vIGNvbnN0IHN1YmplY3QgPSBuZXcgQ29uY3JldGVTdWJqZWN0KCk7XHJcblxyXG4vLyBjb25zdCBvYnNlcnZlcjEgPSBuZXcgQ29uY3JldGVPYnNlcnZlckEoKTtcclxuLy8gc3ViamVjdC5hdHRhY2gob2JzZXJ2ZXIxKTtcclxuXHJcbi8vIGNvbnN0IG9ic2VydmVyMiA9IG5ldyBDb25jcmV0ZU9ic2VydmVyQigpO1xyXG4vLyBzdWJqZWN0LmF0dGFjaChvYnNlcnZlcjIpO1xyXG5cclxuLy8gc3ViamVjdC5zb21lQnVzaW5lc3NMb2dpYygpO1xyXG4vLyBzdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcblxyXG4vLyBzdWJqZWN0LmRldGFjaChvYnNlcnZlcjIpO1xyXG5cclxuLy8gc3ViamVjdC5zb21lQnVzaW5lc3NMb2dpYygpO1xyXG5cclxuLyogY29uc3QgTVZQID0ge1xyXG4gIG1ha2VPYnNlcnZhYmxlU3ViamVjdCgpIHtcclxuICAgIGNvbnN0IG9ic2VydmVycyA9IFtdO1xyXG4gICAgY29uc3QgYWRkT2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICBpZiAodHlwZW9mIG8gIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBvYnNlcnZlcnNbaV07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyID09PSBvKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIGFscmVhZHkgaW4gdGhlIGxpc3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgb2JzZXJ2ZXJzLnB1c2gobyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVtb3ZlT2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIGlmIChvYnNlcnZlciA9PT0gbykge1xyXG4gICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgZmluZCBvYnNlcnZlciBpbiBsaXN0IG9mIG9ic2VydmVycycpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IG5vdGlmeU9ic2VydmVycyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgIC8vIE1ha2UgYSBjb3B5IG9mIG9ic2VydmVyIGxpc3QgaW4gY2FzZSB0aGUgbGlzdFxyXG4gICAgICAvLyBpcyBtdXRhdGVkIGR1cmluZyB0aGUgbm90aWZpY2F0aW9ucy5cclxuICAgICAgY29uc3Qgb2JzZXJ2ZXJzU25hcHNob3QgPSBvYnNlcnZlcnMuc2xpY2UoMCk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzU25hcHNob3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBvYnNlcnZlcnNTbmFwc2hvdFtpXShkYXRhKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGFkZE9ic2VydmVyLFxyXG4gICAgICByZW1vdmVPYnNlcnZlcixcclxuICAgICAgbm90aWZ5T2JzZXJ2ZXJzLFxyXG4gICAgICBub3RpZnk6IG5vdGlmeU9ic2VydmVycyxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgTW9kZWwob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAvLyBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgIC8vIGNvbnN0IGl0ZW1zID0gW107XHJcbiAgICB0aGlzLm9wdGlvbnMgPSAhb3B0aW9ucyA/IHt9IDogb3B0aW9ucztcclxuICAgIHRoaXMubW9kZWxDaGFuZ2VkU3ViamVjdCA9IE1WUC5tYWtlT2JzZXJ2YWJsZVN1YmplY3QoKTtcclxuICAgIHRoaXMubWluVmFsdWUgPSAwO1xyXG4gICAgdGhpcy5tYXhWYWx1ZSA9IDMwMDtcclxuICAgIHRoaXMuc3RlcCA9IDUwO1xyXG4gICAgdGhpcy5tb2RlID0gJ2hvcml6b250YWwnO1xyXG4gICAgdGhpcy50eXBlID0gJ3NpbmdsZSc7XHJcbiAgICAvLyB0aGlzLmFkZEl0ZW0gPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIC8vICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgLy8gICAgIHJldHVybjtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpdGVtcy5wdXNoKHZhbHVlKTtcclxuICAgIC8vICAgdGhhdC5tb2RlbENoYW5nZWRTdWJqZWN0Lm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMucmVtb3ZlQ3VycmVudEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIGlmICh0aGF0LnNlbGVjdGVkSW5kZXggPT09IC0xKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGl0ZW1zLnNwbGljZSh0aGF0LnNlbGVjdGVkSW5kZXgsIDEpO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC0xO1xyXG4gICAgLy8gdGhpcy5nZXRTZWxlY3RlZEluZGV4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICByZXR1cm4gdGhhdC5zZWxlY3RlZEluZGV4O1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMuc2V0U2VsZWN0ZWRJbmRleCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgLy8gICB0aGF0LnNlbGVjdGVkSW5kZXggPSB2YWx1ZTtcclxuICAgIC8vICAgdGhhdC5tb2RlbENoYW5nZWRTdWJqZWN0Lm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgLy8gfTtcclxuICB9LFxyXG5cclxuICBWaWV3KCkge1xyXG4gICAgLy8gY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSgpO1xyXG4gICAgICBzbGlkZXJCb2R5LmluaXQoKTtcclxuXHJcbiAgICAgIGNvbnN0IHNsaWRlclRodW1iOiBTbGlkZXJUaHVtYiA9IG5ldyBTbGlkZXJUaHVtYigpO1xyXG4gICAgICBzbGlkZXJUaHVtYi5pbml0KCk7XHJcblxyXG4gICAgICBjb25zdCB0aXBWYWx1ZTogVGlwVmFsdWUgPSBuZXcgVGlwVmFsdWUoKTtcclxuICAgICAgdGlwVmFsdWUuaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0aGF0LnNlbGVjdCA9ICQoJzxzZWxlY3QvPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpO1xyXG4gICAgLy8gdGhhdC5zZWxlY3QuYXR0cignc2l6ZScsICc0Jyk7XHJcbiAgICAvLyB0aGF0LmJ1dHRvbkFkZCA9ICQoJzxidXR0b24+KzwvYnV0dG9uPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpLmhlaWdodCgyMCk7XHJcbiAgICAvLyB0aGF0LmJ1dHRvblJlbW92ZSA9ICQoJzxidXR0b24+LTwvYnV0dG9uPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpLmhlaWdodCgyMCk7XHJcbiAgICAvLyBtb2RlbC5tb2RlbENoYW5nZWRTdWJqZWN0LmFkZE9ic2VydmVyKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgdmFyIGl0ZW1zID0gbW9kZWwuZ2V0SXRlbXMoKTtcclxuICAgIC8vICAgdmFyIGlubmVySFRNTCA9ICcnO1xyXG4gICAgLy8gICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAvLyAgICAgaW5uZXJIVE1MICs9IFwiPG9wdGlvbj5cIiArIGl0ZW1zW2ldICsgXCI8L29wdGlvbj5cIjtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICB0aGF0LnNlbGVjdC5odG1sKGlubmVySFRNTCk7XHJcbiAgICAvLyB9KTtcclxuICB9LFxyXG5cclxuICBDb250cm9sbGVyKG1vZGVsLCB2aWV3KSB7XHJcbiAgICB2aWV3LmluaXQoKTtcclxuICAgIC8vIHZpZXcuYnV0dG9uQWRkLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBtb2RlbC5hZGRJdGVtKHByb21wdCgnYWRkdmFsdWUnKSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHZpZXcuYnV0dG9uUmVtb3ZlLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBtb2RlbC5yZW1vdmVDdXJyZW50SXRlbSgpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyB2aWV3LnNlbGVjdC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwuc2V0U2VsZWN0ZWRJbmRleCh2aWV3LnNlbGVjdFswXS5zZWxlY3RlZEluZGV4KTtcclxuICAgIC8vIH0pO1xyXG4gIH0sXHJcbn07ICovXHJcblxyXG4vKiAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIG1vZGVsID0gbmV3IE9NVkMuTW9kZWwoKTtcclxuICB2YXIgdmlldyA9IG5ldyBPTVZDLlZpZXcobW9kZWwsICQoJzxkaXYvPicpLmFwcGVuZFRvKCQoXCJib2R5XCIpKSk7XHJcbiAgdmFyIGNvbnRyb2xsZXIgPSBuZXcgT01WQy5Db250cm9sbGVyKG1vZGVsLCB2aWV3KTtcclxufSk7ICovXHJcblxyXG4vLyBjb25zdCBtb2RlbCA9IG5ldyBNVlAuTW9kZWwoKTtcclxuLy8gY29uc3QgdmlldyA9IG5ldyBNVlAuVmlldygpO1xyXG4vLyBjb25zdCBjb250cm9sbGVyID0gbmV3IE1WUC5Db250cm9sbGVyKG1vZGVsLCB2aWV3KTtcclxuXHJcbi8vIGNvbnRyb2xsZXIoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==