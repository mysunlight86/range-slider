!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist",i(i.s=3)}([function(e,t,i){var s=i(1),n=i(2);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};s(n,o);e.exports=n.locals||{}},function(e,t,i){"use strict";var s,n=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),r=[];function a(e){for(var t=-1,i=0;i<r.length;i++)if(r[i].identifier===e){t=i;break}return t}function l(e,t){for(var i={},s=[],n=0;n<e.length;n++){var o=e[n],l=t.base?o[0]+t.base:o[0],c=i[l]||0,u="".concat(l," ").concat(c);i[l]=c+1;var d=a(u),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(r[d].references++,r[d].updater(h)):r.push({identifier:u,updater:v(h,t),references:1}),s.push(u)}return s}function c(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var n=i.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,i,s){var n=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var o=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function f(e,t,i){var s=i.css,n=i.media,o=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var m=null,p=0;function v(e,t){var i,s,n;if(t.singleton){var o=p++;i=m||(m=c(t)),s=h.bind(null,i,o,!1),n=h.bind(null,i,o,!0)}else i=c(t),s=f.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<i.length;s++){var n=a(i[s]);r[n].references--}for(var o=l(e,t),c=0;c<i.length;c++){var u=a(i[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}i=o}}}},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);class s{constructor(e,t){this._elemId=e.slice(1),this._options=t}init(){this.lineElem=document.getElementById(this._elemId),this.thumbElem=document.createElement("DIV")}showSliderLine(){this.lineElem.classList.add("slider-body")}showSliderThumb(){this.thumbElem.classList.add("slider-thumb"),this.lineElem.append(this.thumbElem),this.thumbElem.style.left=(this._options.values[0]-this._options.min)*this.lineElem.offsetWidth/(this._options.max-this._options.min)-this.thumbElem.offsetWidth/2+"px",console.log(this._options.values)}}class n{communicate(e){this._selector=e._selector,this._options=e.getData();const t=new s(this._selector,this._options);t.init(),t.showSliderLine(),t.showSliderThumb(),console.log("ModelObserver: Reacted to the event.")}}class o{constructor(){this.observers=[]}attach(e){if(this.observers.includes(e))return console.log("Model: Presenter has been attached already.");console.log("Model: Attached a presenter."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Model: Notifying observers...");for(const e of this.observers)e.communicate(this)}setData(e,t){this._min=e.min,this._max=e.max,this._step=e.step,this._kind=e.kind,this._isBasic=e.isBasic,this._values=e.values,this._selector=t,console.log("Model: My state has just changed"),this.notify()}getData(){return{min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values,selector:this._selector}}}class r{constructor(e,t){this._selector=e,t||(t={}),this._min=t.min?t.min:0,this._max=t.max?t.max:300,this._step=t.step?t.step:57,this._kind=t.kind?t.kind:"horizontal",this._isBasic=!t.isBasic||t.isBasic,this._values=t.values?t.values:[this._step]}init(){const e=new o,t=new n;e.attach(t),this.setData(),e.setData(this._options,this._selector)}setData(){this._options={min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values},console.log(this._options)}}new r("#slider1").init();new r("#slider2",{min:40,step:60,max:245}).init();new r("#slider3",{values:[300]}).init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9wcmVzZW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwiVmlldyIsImVsZW1JZCIsInRoaXMiLCJfZWxlbUlkIiwic2xpY2UiLCJfb3B0aW9ucyIsImxpbmVFbGVtIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aHVtYkVsZW0iLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmQiLCJsZWZ0IiwidmFsdWVzIiwibWluIiwib2Zmc2V0V2lkdGgiLCJtYXgiLCJjb25zb2xlIiwibG9nIiwibW9kZWwiLCJfc2VsZWN0b3IiLCJnZXREYXRhIiwidmlldyIsImluaXQiLCJzaG93U2xpZGVyTGluZSIsInNob3dTbGlkZXJUaHVtYiIsIk1vZGVsIiwib2JzZXJ2ZXJzIiwib2JzZXJ2ZXIiLCJpbmNsdWRlcyIsIm9ic2VydmVySW5kZXgiLCJpbmRleE9mIiwiY29tbXVuaWNhdGUiLCJzZWxlY3RvciIsIl9taW4iLCJfbWF4IiwiX3N0ZXAiLCJzdGVwIiwiX2tpbmQiLCJraW5kIiwiX2lzQmFzaWMiLCJpc0Jhc2ljIiwiX3ZhbHVlcyIsIm5vdGlmeSIsInByZXNlbnRlciIsImF0dGFjaCIsInNldERhdGEiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFB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LFNBRWZ6QixRQUFRQyxJQUFJaEIsS0FBS0csV0N6Q0csSUFBSSxFQUFPLFlBQzNCa0IsT0FFZ0IsSUFBSSxFQUFPLFdBQVksQ0FBQ1QsSUFBSyxHQUFJdUIsS0FBTSxHQUFJckIsSUFBSyxNQUNoRU8sT0FFZ0IsSUFBSSxFQUFPLFdBQVksQ0FBQ1YsT0FBUSxDQUFDLE9BQ2pEVSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGlzdFwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCIvLyBpbXBvcnQgU2xpZGVyVGh1bWIgZnJvbSAnLi9zbGlkZXJUaHVtYic7XHJcbmltcG9ydCBUaXBWYWx1ZSBmcm9tICcuL3RpcFZhbHVlJztcclxuaW1wb3J0IFNjYWxlIGZyb20gJy4vc2NhbGUnO1xyXG5cclxudHlwZSBvcHRpb25zVHlwZSA9IHtcclxuICBtaW4/OiBudW1iZXIsXHJcbiAgbWF4PzogbnVtYmVyLFxyXG4gIHN0ZXA/OiBudW1iZXIsXHJcbiAga2luZD86IHN0cmluZyxcclxuICBpc0Jhc2ljPzogYm9vbGVhbixcclxuICB2YWx1ZXM/OiBudW1iZXJbXVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XHJcbiAgX2VsZW1JZDogc3RyaW5nO1xyXG4gIF9vcHRpb25zOiBvcHRpb25zVHlwZTtcclxuICBsaW5lRWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgdGh1bWJFbGVtOiBIVE1MRWxlbWVudDtcclxuICAvLyBfbWluVmFsdWU6IG51bWJlcjtcclxuICAvLyBfbWF4VmFsdWU6IG51bWJlcjtcclxuICAvLyBfc3RlcFZhbHVlOiBudW1iZXI7XHJcbiAgLy8gX3ZhbHVlczogbnVtYmVyW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKGVsZW1JZDogc3RyaW5nLCBvcHRpb25zOiBvcHRpb25zVHlwZSkge1xyXG4gICAgdGhpcy5fZWxlbUlkID0gZWxlbUlkLnNsaWNlKDEpO1xyXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAvLyB0aGlzLl9taW5WYWx1ZSA9XHJcbiAgfTtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMubGluZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9lbGVtSWQpO1xyXG4gICAgdGhpcy50aHVtYkVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcclxuICB9XHJcblxyXG4gIHNob3dTbGlkZXJMaW5lKCkge1xyXG4gICAgdGhpcy5saW5lRWxlbS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItYm9keScpO1xyXG4gIH1cclxuXHJcbiAgc2hvd1NsaWRlclRodW1iKCkge1xyXG4gICAgdGhpcy50aHVtYkVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyLXRodW1iJyk7XHJcbiAgICB0aGlzLmxpbmVFbGVtLmFwcGVuZCh0aGlzLnRodW1iRWxlbSk7XHJcbiAgICB0aGlzLnRodW1iRWxlbS5zdHlsZS5sZWZ0ID0gYCR7KHRoaXMuX29wdGlvbnMudmFsdWVzWzBdIC0gdGhpcy5fb3B0aW9ucy5taW4pICogdGhpcy5saW5lRWxlbS5vZmZzZXRXaWR0aCAvICh0aGlzLl9vcHRpb25zLm1heCAtIHRoaXMuX29wdGlvbnMubWluKSAtIHRoaXMudGh1bWJFbGVtLm9mZnNldFdpZHRoIC8gMn1weGA7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9vcHRpb25zLnZhbHVlcyk7XHJcbiAgfVxyXG5cclxuICAvLyBwb3NpdGlvbkVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCwgZWxlbTogSFRNTEVsZW1lbnQsIHZhbDogbnVtYmVyKSB7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhwYXJlbnQpO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2coZWxlbSk7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyh2YWwpO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5fbWluVmFsdWUpO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5fbWF4VmFsdWUpO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2cocGFyZW50Lm9mZnNldExlZnQpO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2coZWxlbS5vZmZzZXRXaWR0aCk7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhwYXJlbnQub2Zmc2V0V2lkdGgpO1xyXG4gIC8vICAgcmV0dXJuIGAkeygodmFsIC0gdGhpcy5fbWluVmFsdWUpICogcGFyZW50Lm9mZnNldFdpZHRoIC8gKHRoaXMuX21heFZhbHVlIC0gdGhpcy5fbWluVmFsdWUpKSArIHBhcmVudC5vZmZzZXRMZWZ0IC0gZWxlbS5vZmZzZXRXaWR0aCAvIDJ9cHhgO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gc2hvd1NsaWRlcigpIHtcclxuICAvLyAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSh0aGlzLl9zZWxlY3Rvcik7XHJcbiAgLy8gICB0aGlzLnNsaWRlckxpbmVDbGFzcyA9IHNsaWRlckJvZHkuaW5pdCgpO1xyXG4gIC8vICAgLy8gdGhpcy5zbGlkZXJMaW5lRWxlbSA9IHNsaWRlckJvZHkuaW5pdCgpLmVsZW1TbGlkZXJMaW5lO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5fdmFsdWVzKTtcclxuICAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX29wdGlvbnMudmFsdWVzKTtcclxuICAvLyAgIC8vIGNvbnN0IHNsaWRlclRodW1iOiBTbGlkZXJUaHVtYiA9IG5ldyBTbGlkZXJUaHVtYihgJHt0aGlzLl9zZWxlY3Rvcn0gPiAjJHt0aGlzLnNsaWRlckxpbmVJZH1gLCB0aGlzLl92YWx1ZXMpO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5zbGlkZXJMaW5lRWxlbSk7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhgJHt0aGlzLl9zZWxlY3Rvcn0gPiAuJHt0aGlzLnNsaWRlckxpbmVDbGFzc31gKTtcclxuICAvLyAgIGNvbnN0IHNsaWRlclRodW1iOiBTbGlkZXJUaHVtYiA9IG5ldyBTbGlkZXJUaHVtYihgJHt0aGlzLl9zZWxlY3Rvcn0gPiAuJHt0aGlzLnNsaWRlckxpbmVDbGFzc31gLCB0aGlzLl9vcHRpb25zKTtcclxuICAvLyAgIHNsaWRlclRodW1iLmluaXQoKTtcclxuICAvLyAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZShgJHt0aGlzLl9zZWxlY3Rvcn0gPiAuJHt0aGlzLnNsaWRlckxpbmVDbGFzc31gKTtcclxuICAvLyAgIHRpcFZhbHVlLmluaXQoKTtcclxuICAvLyB9XHJcblxyXG4gIC8vIHNob3dTY2FsZShtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIHN0ZXA6IG51bWJlcikge1xyXG4gIC8vICAgdGhpcy5fbWluVmFsdWUgPSBtaW47XHJcbiAgLy8gICB0aGlzLl9tYXhWYWx1ZSA9IG1heDtcclxuICAvLyAgIHRoaXMuX3N0ZXBWYWx1ZSA9IHN0ZXA7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgLy8gICBjb25zdCBzY2FsZTogU2NhbGUgPSBuZXcgU2NhbGUodGhpcy5fc2VsZWN0b3IsIHRoaXMuX21pblZhbHVlLCB0aGlzLl9tYXhWYWx1ZSwgdGhpcy5fc3RlcFZhbHVlKTtcclxuICAvLyAgIHNjYWxlLmluaXQoKTtcclxuICAvLyB9XHJcblxyXG4gIC8vIHNsaWRlckxlbmd0aDogbnVtYmVyO1xyXG4gIC8vIGluaXQoKSB7XHJcbiAgLy8gICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAvLyAgIHNsaWRlckJvZHkuaW5pdCgpO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gZ2V0V2lkdGhTbGlkZXIoKSB7XHJcbiAgLy8gICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAvLyAgIHRoaXMuc2xpZGVyTGVuZ3RoID0gc2xpZGVyQm9keS5nZXRXaWR0aCgpO1xyXG4gIC8vICAgcmV0dXJuIHRoaXMuc2xpZGVyTGVuZ3RoO1xyXG4gIC8vIH1cclxufVxyXG4iLCIvLyBpbXBvcnQgeyBTdWJqZWN0LCBDb25jcmV0ZVN1YmplY3QgfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCBTdWJqZWN0IGZyb20gJy4vYXBwJztcclxuLy8gaW1wb3J0IFNsaWRlckJvZHkgZnJvbSAnLi9zbGlkZXJCb2R5JztcclxuaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kZWwnO1xyXG5pbXBvcnQgVmlldyBmcm9tICcuL3ZpZXcnO1xyXG5cclxudHlwZSBvcHRpb25zVHlwZSA9IHtcclxuICBtaW4/OiBudW1iZXIsXHJcbiAgbWF4PzogbnVtYmVyLFxyXG4gIHN0ZXA/OiBudW1iZXIsXHJcbiAga2luZD86IHN0cmluZyxcclxuICBpc0Jhc2ljPzogYm9vbGVhbixcclxuICB2YWx1ZXM/OiBudW1iZXJbXVxyXG59O1xyXG5cclxuLyoqXHJcbiog0JjQvdGC0LXRgNGE0LXQudGBINCd0LDQsdC70Y7QtNCw0YLQtdC70Y8g0L7QsdGK0Y/QstC70Y/QtdGCINC80LXRgtC+0LQg0YPQstC10LTQvtC80LvQtdC90LjRjywg0LrQvtGC0L7RgNGL0Lkg0LjQt9C00LDRgtC10LvQuFxyXG4qINC40YHQv9C+0LvRjNC30YPRjtGCINC00LvRjyDQvtC/0L7QstC10YnQtdC90LjRjyDRgdCy0L7QuNGFINC/0L7QtNC/0LjRgdGH0LjQutC+0LIuXHJcbiovXHJcbmludGVyZmFjZSBPYnNlcnZlciB7XHJcbiAgLy8g0J/QvtC70YPRh9C40YLRjCDQvtCx0L3QvtCy0LvQtdC90LjQtSDQvtGCINGB0YPQsdGK0LXQutGC0LAuXHJcbiAgY29tbXVuaWNhdGUoc3ViamVjdDogU3ViamVjdCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4qINCa0L7QvdC60YDQtdGC0L3Ri9C1INCd0LDQsdC70Y7QtNCw0YLQtdC70Lgg0YDQtdCw0LPQuNGA0YPRjtGCINC90LAg0L7QsdC90L7QstC70LXQvdC40Y8sINCy0YvQv9GD0YnQtdC90L3Ri9C1INCY0LfQtNCw0YLQtdC70LXQvCwg0LpcclxuKiDQutC+0YLQvtGA0L7QvNGDINC+0L3QuCDQv9GA0LjQutGA0LXQv9C70LXQvdGLLlxyXG4qL1xyXG4vLyBjbGFzcyBDb25jcmV0ZU9ic2VydmVyQSBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuLy8gICBwdWJsaWMgdXBkYXRlKHN1YmplY3Q6IFN1YmplY3QpOiB2b2lkIHtcclxuLy8gICAgIGlmIChzdWJqZWN0IGluc3RhbmNlb2YgQ29uY3JldGVTdWJqZWN0ICYmIHN1YmplY3Quc3RhdGUgPCAzKSB7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKCdDb25jcmV0ZU9ic2VydmVyQTogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5jbGFzcyBQcmVzZW50ZXIgaW1wbGVtZW50cyBPYnNlcnZlciB7XHJcbiAgLy8gbW9kZWxPcHRpb25zOiB7bWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBzdGVwOiBudW1iZXJ9O1xyXG4gIF9zZWxlY3Rvcjogc3RyaW5nO1xyXG4gIF9vcHRpb25zOiBvcHRpb25zVHlwZTtcclxuXHJcbiAgLy8gY29uc3RydWN0b3Ioc2VsZWN0b3I/OiBzdHJpbmcsIG9wdGlvbnM/OiBvcHRpb25zVHlwZSkge1xyXG4gIC8vICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAvLyAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gc2V0RGF0YVRvTW9kZWwoKSB7XHJcbiAgLy8gICBjb25zdCBtb2RlbDogTW9kZWwgPSBuZXcgTW9kZWwoKTtcclxuICAvLyAgIG1vZGVsLmdldERhdGEoKTtcclxuICAvLyB9XHJcblxyXG4gIC8vIHRyYW5zZmVyTW9kZWxEYXRhKG1vZGVsOiBNb2RlbCwgdmlldzogVmlldykge1xyXG4gIC8vICAgdGhpcy5tb2RlbE9wdGlvbnMgPSBtb2RlbC5jYWxjVW5pdCgpO1xyXG4gIC8vICAgY29uc29sZS5sb2codGhpcy5tb2RlbE9wdGlvbnMpO1xyXG4gIC8vICAgdmlldy5zaG93U2NhbGUodGhpcy5tb2RlbE9wdGlvbnMubWluLCB0aGlzLm1vZGVsT3B0aW9ucy5tYXgsIHRoaXMubW9kZWxPcHRpb25zLnN0ZXApO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4gIC8vICAgLy8gaWYgKG1vZGVsIGluc3RhbmNlb2YgTW9kZWwpIHtcclxuICAvLyAgIC8vICAgdGhpcy5tb2RlbE9wdGlvbnMgPSBtb2RlbC5jYWxjVW5pdCgpO1xyXG4gIC8vICAgLy8gICBjb25zb2xlLmxvZyh0aGlzLm1vZGVsT3B0aW9ucyk7XHJcbiAgLy8gICAgIC8vIGNvbnN0IHZpZXcgPSBuZXcgVmlldygpO1xyXG4gIC8vICAgICAvLyB2aWV3LnNob3dTY2FsZSh0aGlzLm1vZGVsT3B0aW9ucy5taW4sIHRoaXMubW9kZWxPcHRpb25zLm1heCwgdGhpcy5tb2RlbE9wdGlvbnMuc3RlcCk7XHJcbiAgLy8gICAgIC8vIGNvbnNvbGUubG9nKCdNb2RlbE9ic2VydmVyOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuICAvLyAgIC8vIH1cclxuICAvLyB9XHJcblxyXG4gIC8vIHRyYW5zZmVyKCkge1xyXG4gIC8vICAgY29uc3QgdmlldzogVmlldyA9IG5ldyBWaWV3KCk7XHJcbiAgICAvLyByZXR1cm4gdmlldy5nZXRXaWR0aFNsaWRlcigpO1xyXG4gIC8vIH1cclxuXHJcbiAgY29tbXVuaWNhdGUobW9kZWw6IE1vZGVsKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IG1vZGVsLl9zZWxlY3RvcjtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBtb2RlbC5nZXREYXRhKCk7XHJcbiAgICBjb25zdCB2aWV3OiBWaWV3ID0gbmV3IFZpZXcodGhpcy5fc2VsZWN0b3IsIHRoaXMuX29wdGlvbnMpO1xyXG4gICAgdmlldy5pbml0KCk7XHJcbiAgICB2aWV3LnNob3dTbGlkZXJMaW5lKCk7XHJcbiAgICB2aWV3LnNob3dTbGlkZXJUaHVtYigpO1xyXG4gICAgY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4gICAgLy8gaWYgKG1vZGVsIGluc3RhbmNlb2YgTW9kZWwpIHtcclxuICAgIC8vICAgdGhpcy5tb2RlbE9wdGlvbnMgPSBtb2RlbC5jYWxjVW5pdCgpO1xyXG4gICAgLy8gICBjb25zb2xlLmxvZyh0aGlzLm1vZGVsT3B0aW9ucyk7XHJcbiAgICAvLyAgIGNvbnN0IHZpZXcgPSBuZXcgVmlldygpO1xyXG4gICAgLy8gICB2aWV3LnNob3dTY2FsZSh0aGlzLm1vZGVsT3B0aW9ucy5taW4sIHRoaXMubW9kZWxPcHRpb25zLm1heCwgdGhpcy5tb2RlbE9wdGlvbnMuc3RlcCk7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdNb2RlbE9ic2VydmVyOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuICAgIC8vIH1cclxuICB9XHJcblxyXG4gIC8vIGdldFNsaWRlckRhdGEoKSB7XHJcbiAgLy8gICByZXR1cm4ge1xyXG4gIC8vICAgICBzZWxlY3RvcjogdGhpcy5fc2VsZWN0b3IsXHJcbiAgLy8gICAgIG9wdGlvbnM6IHRoaXMuX29wdGlvbnNcclxuICAvLyAgIH07XHJcbiAgLy8gfVxyXG59XHJcblxyXG4vLyBjbGFzcyBWaWV3T2JzZXJ2ZXIgaW1wbGVtZW50cyBPYnNlcnZlciB7XHJcbi8vICAgdXBkYXRlKHZpZXcpIHtcclxuXHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG4vLyBjbGFzcyBDb25jcmV0ZU9ic2VydmVyQiBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuLy8gICBpc1N1YmplY3RTYXRpc2ZpZXMoc3ViamVjdCkge1xyXG4vLyAgICAgcmV0dXJuIHN1YmplY3QgaW5zdGFuY2VvZiBDb25jcmV0ZVN1YmplY3QgJiYgKHN1YmplY3Quc3RhdGUgPT09IDAgfHwgc3ViamVjdC5zdGF0ZSA+PSAyKTtcclxuLy8gICB9XHJcblxyXG4vLyAgIHB1YmxpYyB1cGRhdGUoc3ViamVjdDogU3ViamVjdCk6IHZvaWQge1xyXG4vLyAgICAgaWYgKHRoaXMuaXNTdWJqZWN0U2F0aXNmaWVzKHN1YmplY3QpKSB7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKCdDb25jcmV0ZU9ic2VydmVyQjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgeyBPYnNlcnZlciwgQ29uY3JldGVPYnNlcnZlckEsIENvbmNyZXRlT2JzZXJ2ZXJCLCBQcmVzZW50ZXIgfTtcclxuZXhwb3J0IHsgT2JzZXJ2ZXIsIFByZXNlbnRlciB9O1xyXG4iLCIvLyBpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgU3ViamVjdCBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSAnLi9wcmVzZW50ZXInO1xyXG5cclxudHlwZSBvcHRpb25zID0ge1xyXG4gIG1pbj86IG51bWJlcjtcclxuICBtYXg/OiBudW1iZXI7XHJcbiAgc3RlcD86IG51bWJlcjtcclxuICBraW5kPzogc3RyaW5nO1xyXG4gIGlzQmFzaWM/OiBib29sZWFuO1xyXG4gIHZhbHVlcz86IG51bWJlcltdO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kZWwgaW1wbGVtZW50cyBTdWJqZWN0IHtcclxuICBwcml2YXRlIF9taW46IG51bWJlcjtcclxuICBwcml2YXRlIF9tYXg6IG51bWJlcjtcclxuICBwcml2YXRlIF9zdGVwOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfa2luZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2lzQmFzaWM6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfdmFsdWVzOiBudW1iZXJbXTtcclxuICBfc2VsZWN0b3I6IHN0cmluZztcclxuXHJcbiAgLy8gY29uc3RydWN0b3Iob3B0aW9ucz86IG9wdGlvbnMpIHtcclxuICAvLyAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9XHJcbiAgLy8gICB0aGlzLl9taW4gPSBvcHRpb25zLm1pbiA/IG9wdGlvbnMubWluIDogMDtcclxuICAvLyAgIHRoaXMuX21heCA9IG9wdGlvbnMubWF4ID8gb3B0aW9ucy5tYXggOiAzMDA7XHJcbiAgLy8gICB0aGlzLl9zdGVwID0gb3B0aW9ucy5zdGVwID8gb3B0aW9ucy5zdGVwIDogNTA7XHJcbiAgLy8gICB0aGlzLl9raW5kID0gb3B0aW9ucy5raW5kID8gb3B0aW9ucy5raW5kIDogJ2hvcml6b250YWwnO1xyXG4gIC8vICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYyA/IG9wdGlvbnMuaXNCYXNpYyA6IHRydWU7XHJcbiAgICAvLyB0aGlzLm5vdGlmeSgpO1xyXG4gIC8vIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09ic2VydmVyW119INCh0L/QuNGB0L7QuiDQv9C+0LTQv9C40YHRh9C40LrQvtCyLiDQkiDRgNC10LDQu9GM0L3QvtC5INC20LjQt9C90Lgg0YHQv9C40YHQvtC6XHJcbiAgICog0L/QvtC00L/QuNGB0YfQuNC60L7QsiDQvNC+0LbQtdGCINGF0YDQsNC90LjRgtGM0YHRjyDQsiDQsdC+0LvQtdC1INC/0L7QtNGA0L7QsdC90L7QvCDQstC40LTQtSAo0LrQu9Cw0YHRgdC40YTQuNGG0LjRgNGD0LXRgtGB0Y8g0L/QvlxyXG4gICAqINGC0LjQv9GDINGB0L7QsdGL0YLQuNGPINC4INGCLtC0LilcclxuICAgKi9cclxuICBwcml2YXRlIG9ic2VydmVyczogT2JzZXJ2ZXJbXSA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiDQnNC10YLQvtC00Ysg0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QvtC00L/QuNGB0LrQvtC5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRhY2gob2JzZXJ2ZXI6IE9ic2VydmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBpc0V4aXN0ID0gdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpO1xyXG4gICAgaWYgKGlzRXhpc3QpIHtcclxuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdNb2RlbDogUHJlc2VudGVyIGhhcyBiZWVuIGF0dGFjaGVkIGFscmVhZHkuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ01vZGVsOiBBdHRhY2hlZCBhIHByZXNlbnRlci4nKTtcclxuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRldGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IG9ic2VydmVySW5kZXggPSB0aGlzLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcclxuICAgIGlmIChvYnNlcnZlckluZGV4ID09PSAtMSkge1xyXG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ1N1YmplY3Q6IE5vbmV4aXN0ZW50IG9ic2VydmVyLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShvYnNlcnZlckluZGV4LCAxKTtcclxuICAgIGNvbnNvbGUubG9nKCdTdWJqZWN0OiBEZXRhY2hlZCBhbiBvYnNlcnZlci4nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINCX0LDQv9GD0YHQuiDQvtCx0L3QvtCy0LvQtdC90LjRjyDQsiDQutCw0LbQtNC+0Lwg0L/QvtC00L/QuNGB0YfQuNC60LUuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGlmeSgpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCdNb2RlbDogTm90aWZ5aW5nIG9ic2VydmVycy4uLicpO1xyXG4gICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiB0aGlzLm9ic2VydmVycykge1xyXG4gICAgICBvYnNlcnZlci5jb21tdW5pY2F0ZSh0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldERhdGEob3B0aW9uczogb3B0aW9ucywgc2VsZWN0b3I6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbWluID0gb3B0aW9ucy5taW47XHJcbiAgICB0aGlzLl9tYXggPSBvcHRpb25zLm1heDtcclxuICAgIHRoaXMuX3N0ZXAgPSBvcHRpb25zLnN0ZXA7XHJcbiAgICB0aGlzLl9raW5kID0gb3B0aW9ucy5raW5kO1xyXG4gICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYztcclxuICAgIHRoaXMuX3ZhbHVlcyA9IG9wdGlvbnMudmFsdWVzO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIGNvbnNvbGUubG9nKGBNb2RlbDogTXkgc3RhdGUgaGFzIGp1c3QgY2hhbmdlZGApO1xyXG4gICAgdGhpcy5ub3RpZnkoKTtcclxuICB9XHJcblxyXG4gIGdldERhdGEoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtaW46IHRoaXMuX21pbixcclxuICAgICAgbWF4OiB0aGlzLl9tYXgsXHJcbiAgICAgIHN0ZXA6IHRoaXMuX3N0ZXAsXHJcbiAgICAgIGtpbmQ6IHRoaXMuX2tpbmQsXHJcbiAgICAgIGlzQmFzaWM6IHRoaXMuX2lzQmFzaWMsXHJcbiAgICAgIHZhbHVlczogdGhpcy5fdmFsdWVzLFxyXG4gICAgICBzZWxlY3RvcjogdGhpcy5fc2VsZWN0b3JcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGNhbGNVbml0KCkge1xyXG4gIC8vICAgY29uc29sZS5sb2coYE1vZGVsOiBNeSBzdGF0ZSBoYXMganVzdCBjaGFuZ2VkYCk7XHJcblxyXG4gIC8vICAgcmV0dXJuIHtcclxuICAvLyAgICAgbWluOiB0aGlzLl9taW4sXHJcbiAgLy8gICAgIG1heDogdGhpcy5fbWF4LFxyXG4gIC8vICAgICBzdGVwOiB0aGlzLl9zdGVwXHJcbiAgLy8gICB9O1xyXG4gIC8vIH1cclxufVxyXG4iLCIvLyBpbXBvcnQgVmlldyBmcm9tICcuL3ZpZXcnO1xyXG5pbXBvcnQgeyBQcmVzZW50ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJztcclxuXHJcbnR5cGUgb3B0aW9uc1R5cGUgPSB7XHJcbiAgbWluPzogbnVtYmVyLFxyXG4gIG1heD86IG51bWJlcixcclxuICBzdGVwPzogbnVtYmVyLFxyXG4gIGtpbmQ/OiBzdHJpbmcsXHJcbiAgaXNCYXNpYz86IGJvb2xlYW4sXHJcbiAgdmFsdWVzPzogbnVtYmVyW11cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlciB7XHJcbiAgX3NlbGVjdG9yOiBzdHJpbmc7XHJcbiAgX29wdGlvbnM6IG9wdGlvbnNUeXBlO1xyXG5cclxuICBfbWluOiBudW1iZXI7XHJcbiAgX21heDogbnVtYmVyO1xyXG4gIF9zdGVwOiBudW1iZXI7XHJcbiAgX2tpbmQ6IHN0cmluZztcclxuICBfaXNCYXNpYzogYm9vbGVhbjtcclxuICBfdmFsdWVzOiBudW1iZXJbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoZWxlbUlkOiBzdHJpbmcsIG9wdGlvbnM/OiBvcHRpb25zVHlwZSkge1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBlbGVtSWQ7XHJcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fVxyXG4gICAgdGhpcy5fbWluID0gb3B0aW9ucy5taW4gPyBvcHRpb25zLm1pbiA6IDA7XHJcbiAgICB0aGlzLl9tYXggPSBvcHRpb25zLm1heCA/IG9wdGlvbnMubWF4IDogMzAwO1xyXG4gICAgdGhpcy5fc3RlcCA9IG9wdGlvbnMuc3RlcCA/IG9wdGlvbnMuc3RlcCA6IDU3O1xyXG4gICAgdGhpcy5fa2luZCA9IG9wdGlvbnMua2luZCA/IG9wdGlvbnMua2luZCA6ICdob3Jpem9udGFsJztcclxuICAgIHRoaXMuX2lzQmFzaWMgPSBvcHRpb25zLmlzQmFzaWMgPyBvcHRpb25zLmlzQmFzaWMgOiB0cnVlO1xyXG4gICAgdGhpcy5fdmFsdWVzID0gb3B0aW9ucy52YWx1ZXMgPyBvcHRpb25zLnZhbHVlcyA6IFt0aGlzLl9zdGVwXTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICBjb25zdCBtb2RlbDogTW9kZWwgPSBuZXcgTW9kZWwoKTtcclxuICAgIGNvbnN0IHByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIoKTtcclxuICAgIG1vZGVsLmF0dGFjaChwcmVzZW50ZXIpO1xyXG4gICAgdGhpcy5zZXREYXRhKCk7XHJcbiAgICBtb2RlbC5zZXREYXRhKHRoaXMuX29wdGlvbnMsIHRoaXMuX3NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHNldERhdGEoKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0ge1xyXG4gICAgICBtaW46IHRoaXMuX21pbixcclxuICAgICAgbWF4OiB0aGlzLl9tYXgsXHJcbiAgICAgIHN0ZXA6IHRoaXMuX3N0ZXAsXHJcbiAgICAgIGtpbmQ6IHRoaXMuX2tpbmQsXHJcbiAgICAgIGlzQmFzaWM6IHRoaXMuX2lzQmFzaWMsXHJcbiAgICAgIHZhbHVlczogdGhpcy5fdmFsdWVzXHJcbiAgICB9O1xyXG4gICAgY29uc29sZS5sb2codGhpcy5fb3B0aW9ucyk7XHJcbiAgICAvLyBpZiAodGhpcy5faXNCYXNpYykge1xyXG5cclxuICAgIC8vIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX3NlbGVjdG9yKTtcclxuICAgIC8vIGNvbnN0IHZpZXc6IFZpZXcgPSBuZXcgVmlldyh0aGlzLl9zZWxlY3RvciwgdGhpcy5fb3B0aW9ucyk7XHJcbiAgICAvLyB2aWV3LnNob3dTbGlkZXIoKTtcclxuXHJcbiAgICAvLyBjb25zdCBwcmVzZW50ZXI6IFByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIodGhpcy5fc2VsZWN0b3IsIHRoaXMuX29wdGlvbnMpO1xyXG4gICAgLy8gcHJlc2VudGVyLnNldERhdGFUb01vZGVsKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAnLi9zdHlsZS5zY3NzJztcclxuaW1wb3J0IFNsaWRlciBmcm9tICcuL21vZHVsZXMvc2xpZGVyJztcclxuXHJcbi8vIGltcG9ydCBzbGlkZXJSdW4gZnJvbSAnLi9tb2R1bGVzL3NsaWRlclJ1bic7XHJcbi8vIGltcG9ydCBTY2FsZSBmcm9tICcuL21vZHVsZXMvc2NhbGUnO1xyXG4vLyBpbXBvcnQgeyBDb25jcmV0ZVN1YmplY3QgfSBmcm9tICcuL21vZHVsZXMvYXBwJztcclxuLy8gaW1wb3J0IFZpZXcgZnJvbSAnLi9tb2R1bGVzL3ZpZXcnO1xyXG4vLyBpbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2R1bGVzL21vZGVsJztcclxuLy8gaW1wb3J0IHsgQ29uY3JldGVPYnNlcnZlckEsIENvbmNyZXRlT2JzZXJ2ZXJCLCBQcmVzZW50ZXIgfSBmcm9tICcuL21vZHVsZXMvcHJlc2VudGVyJztcclxuLy8gaW1wb3J0IHsgUHJlc2VudGVyIH0gZnJvbSAnLi9tb2R1bGVzL3ByZXNlbnRlcic7XHJcblxyXG5jb25zdCBzbGlkZXIxOiBTbGlkZXIgPSBuZXcgU2xpZGVyKCcjc2xpZGVyMScpO1xyXG5zbGlkZXIxLmluaXQoKTtcclxuXHJcbmNvbnN0IHNsaWRlcjI6IFNsaWRlciA9IG5ldyBTbGlkZXIoJyNzbGlkZXIyJywge21pbjogNDAsIHN0ZXA6IDYwLCBtYXg6IDI0NX0pO1xyXG5zbGlkZXIyLmluaXQoKTtcclxuXHJcbmNvbnN0IHNsaWRlcjM6IFNsaWRlciA9IG5ldyBTbGlkZXIoJyNzbGlkZXIzJywge3ZhbHVlczogWzMwMF19KTtcclxuc2xpZGVyMy5pbml0KCk7XHJcblxyXG4vLyBjb25zdCB2aWV3OiBWaWV3ID0gbmV3IFZpZXcoJ3JhbmdlLXNsaWRlcicpO1xyXG4vLyB2aWV3LnNob3dTbGlkZXIoKTtcclxuXHJcblxyXG4vLyBjb25zdCBzbGlkZXIyOiBWaWV3ID0gbmV3IFZpZXcoKTtcclxuLy8gc2xpZGVyMi5oaWRlKCk7XHJcbi8vIGNvbnN0IHNsaWRlcjM6IFZpZXcgPSBuZXcgVmlldygnJyk7XHJcbi8vIHNsaWRlcjMuaGlkZSgpO1xyXG5cclxuLy8gY29uc3QgbW9kZWwgPSBuZXcgTW9kZWwoe1xyXG4vLyAgIG1pbjogNDAsXHJcbi8vICAgc3RlcDogNjAsXHJcbi8vICAgbWF4OiAyNjBcclxuLy8gfSk7XHJcblxyXG4vLyBjb25zdCBwcmVzZW50ZXIgPSBuZXcgUHJlc2VudGVyKCk7XHJcbi8vIG1vZGVsLmF0dGFjaChwcmVzZW50ZXIpO1xyXG5cclxuLy8gcHJlc2VudGVyLm1vZGVsT3B0aW9ucyA9IG1vZGVsLmNhbGNVbml0KCk7XHJcbi8vIHByZXNlbnRlci50cmFuc2Zlck1vZGVsRGF0YShtb2RlbCwgdmlldyk7XHJcbi8vIG1vZGVsLmNhbGNVbml0KCk7XHJcblxyXG4vLyB2aWV3LnNob3dTbGlkZXIoKTtcclxuXHJcbi8vIGNvbnN0IHNjYWxlOiBTY2FsZSA9IG5ldyBTY2FsZSgpO1xyXG4vLyBzY2FsZS5pbml0KCk7XHJcblxyXG4vLyBzbGlkZXJSdW4oKTtcclxuXHJcbi8vIGNvbnN0IHZpZXcyOiBWaWV3ID0gbmV3IFZpZXcoJ3NsaWRlcjInKTtcclxuLy8gdmlldzIuc2hvd1NsaWRlcigpO1xyXG5cclxuLyoqXHJcbiog0JrQu9C40LXQvdGC0YHQutC40Lkg0LrQvtC0LlxyXG4qL1xyXG5cclxuLy8gY29uc3Qgc3ViamVjdCA9IG5ldyBDb25jcmV0ZVN1YmplY3QoKTtcclxuXHJcbi8vIGNvbnN0IG9ic2VydmVyMSA9IG5ldyBDb25jcmV0ZU9ic2VydmVyQSgpO1xyXG4vLyBzdWJqZWN0LmF0dGFjaChvYnNlcnZlcjEpO1xyXG5cclxuLy8gY29uc3Qgb2JzZXJ2ZXIyID0gbmV3IENvbmNyZXRlT2JzZXJ2ZXJCKCk7XHJcbi8vIHN1YmplY3QuYXR0YWNoKG9ic2VydmVyMik7XHJcblxyXG4vLyBzdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcbi8vIHN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuXHJcbi8vIHN1YmplY3QuZGV0YWNoKG9ic2VydmVyMik7XHJcblxyXG4vLyBzdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcblxyXG4vLyBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XHJcblxyXG4vLyBjb25zdCB0b206IFVzZXIgPSBuZXcgVXNlcign0KLQvtC8JywgMjkpO1xyXG4vLyBlbC5pbm5lckhUTUwgPSBg0JjQvNGPOiAke3RvbS5uYW1lfSDQstC+0LfRgNCw0YHRgjogJHt0b20uYWdlfWA7XHJcblxyXG4vKiBjb25zdCBNVlAgPSB7XHJcbiAgbWFrZU9ic2VydmFibGVTdWJqZWN0KCkge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJzID0gW107XHJcbiAgICBjb25zdCBhZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbyAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb2JzZXJ2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IG8pIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignb2JzZXJ2ZXIgYWxyZWFkeSBpbiB0aGUgbGlzdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBvYnNlcnZlcnMucHVzaChvKTtcclxuICAgIH07XHJcbiAgICBjb25zdCByZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBvYnNlcnZlcnNbaV07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyID09PSBvKSB7XHJcbiAgICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBmaW5kIG9ic2VydmVyIGluIGxpc3Qgb2Ygb2JzZXJ2ZXJzJyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgbm90aWZ5T2JzZXJ2ZXJzID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgLy8gTWFrZSBhIGNvcHkgb2Ygb2JzZXJ2ZXIgbGlzdCBpbiBjYXNlIHRoZSBsaXN0XHJcbiAgICAgIC8vIGlzIG11dGF0ZWQgZHVyaW5nIHRoZSBub3RpZmljYXRpb25zLlxyXG4gICAgICBjb25zdCBvYnNlcnZlcnNTbmFwc2hvdCA9IG9ic2VydmVycy5zbGljZSgwKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnNTbmFwc2hvdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG9ic2VydmVyc1NuYXBzaG90W2ldKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWRkT2JzZXJ2ZXIsXHJcbiAgICAgIHJlbW92ZU9ic2VydmVyLFxyXG4gICAgICBub3RpZnlPYnNlcnZlcnMsXHJcbiAgICAgIG5vdGlmeTogbm90aWZ5T2JzZXJ2ZXJzLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBNb2RlbChvcHRpb25zID0ge30pIHtcclxuICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgLy8gY29uc3QgaXRlbXMgPSBbXTtcclxuICAgIHRoaXMub3B0aW9ucyA9ICFvcHRpb25zID8ge30gOiBvcHRpb25zO1xyXG4gICAgdGhpcy5tb2RlbENoYW5nZWRTdWJqZWN0ID0gTVZQLm1ha2VPYnNlcnZhYmxlU3ViamVjdCgpO1xyXG4gICAgdGhpcy5taW5WYWx1ZSA9IDA7XHJcbiAgICB0aGlzLm1heFZhbHVlID0gMzAwO1xyXG4gICAgdGhpcy5zdGVwID0gNTA7XHJcbiAgICB0aGlzLm1vZGUgPSAnaG9yaXpvbnRhbCc7XHJcbiAgICB0aGlzLnR5cGUgPSAnc2luZ2xlJztcclxuICAgIC8vIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgLy8gICBpZiAoIXZhbHVlKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGl0ZW1zLnB1c2godmFsdWUpO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5yZW1vdmVDdXJyZW50SXRlbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgaWYgKHRoYXQuc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaXRlbXMuc3BsaWNlKHRoYXQuc2VsZWN0ZWRJbmRleCwgMSk7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICByZXR1cm4gaXRlbXM7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5zZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICAvLyB0aGlzLmdldFNlbGVjdGVkSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHJldHVybiB0aGF0LnNlbGVjdGVkSW5kZXg7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5zZXRTZWxlY3RlZEluZGV4ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAvLyAgIHRoYXQuc2VsZWN0ZWRJbmRleCA9IHZhbHVlO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gIH0sXHJcblxyXG4gIFZpZXcoKSB7XHJcbiAgICAvLyBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XHJcbiAgICAgIHNsaWRlckJvZHkuaW5pdCgpO1xyXG5cclxuICAgICAgY29uc3Qgc2xpZGVyVGh1bWI6IFNsaWRlclRodW1iID0gbmV3IFNsaWRlclRodW1iKCk7XHJcbiAgICAgIHNsaWRlclRodW1iLmluaXQoKTtcclxuXHJcbiAgICAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZSgpO1xyXG4gICAgICB0aXBWYWx1ZS5pbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoYXQuc2VsZWN0ID0gJCgnPHNlbGVjdC8+JykuYXBwZW5kVG8ocm9vdE9iamVjdCk7XHJcbiAgICAvLyB0aGF0LnNlbGVjdC5hdHRyKCdzaXplJywgJzQnKTtcclxuICAgIC8vIHRoYXQuYnV0dG9uQWRkID0gJCgnPGJ1dHRvbj4rPC9idXR0b24+JykuYXBwZW5kVG8ocm9vdE9iamVjdCkuaGVpZ2h0KDIwKTtcclxuICAgIC8vIHRoYXQuYnV0dG9uUmVtb3ZlID0gJCgnPGJ1dHRvbj4tPC9idXR0b24+JykuYXBwZW5kVG8ocm9vdE9iamVjdCkuaGVpZ2h0KDIwKTtcclxuICAgIC8vIG1vZGVsLm1vZGVsQ2hhbmdlZFN1YmplY3QuYWRkT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICB2YXIgaXRlbXMgPSBtb2RlbC5nZXRJdGVtcygpO1xyXG4gICAgLy8gICB2YXIgaW5uZXJIVE1MID0gJyc7XHJcbiAgICAvLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIC8vICAgICBpbm5lckhUTUwgKz0gXCI8b3B0aW9uPlwiICsgaXRlbXNbaV0gKyBcIjwvb3B0aW9uPlwiO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIHRoYXQuc2VsZWN0Lmh0bWwoaW5uZXJIVE1MKTtcclxuICAgIC8vIH0pO1xyXG4gIH0sXHJcblxyXG4gIENvbnRyb2xsZXIobW9kZWwsIHZpZXcpIHtcclxuICAgIHZpZXcuaW5pdCgpO1xyXG4gICAgLy8gdmlldy5idXR0b25BZGQuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLmFkZEl0ZW0ocHJvbXB0KCdhZGR2YWx1ZScpKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gdmlldy5idXR0b25SZW1vdmUuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLnJlbW92ZUN1cnJlbnRJdGVtKCk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHZpZXcuc2VsZWN0LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBtb2RlbC5zZXRTZWxlY3RlZEluZGV4KHZpZXcuc2VsZWN0WzBdLnNlbGVjdGVkSW5kZXgpO1xyXG4gICAgLy8gfSk7XHJcbiAgfSxcclxufTsgKi9cclxuXHJcbi8qICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICB2YXIgbW9kZWwgPSBuZXcgT01WQy5Nb2RlbCgpO1xyXG4gIHZhciB2aWV3ID0gbmV3IE9NVkMuVmlldyhtb2RlbCwgJCgnPGRpdi8+JykuYXBwZW5kVG8oJChcImJvZHlcIikpKTtcclxuICB2YXIgY29udHJvbGxlciA9IG5ldyBPTVZDLkNvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xyXG59KTsgKi9cclxuXHJcbi8vIGNvbnN0IG1vZGVsID0gbmV3IE1WUC5Nb2RlbCgpO1xyXG4vLyBjb25zdCB2aWV3ID0gbmV3IE1WUC5WaWV3KCk7XHJcbi8vIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTVZQLkNvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xyXG5cclxuLy8gY29udHJvbGxlcigpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9