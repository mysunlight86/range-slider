!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=3)}([function(e,t,n){var i=n(1),s=n(2);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},function(e,t,n){"use strict";var i,s=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function a(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],s=0;s<e.length;s++){var o=e[s],l=t.base?o[0]+t.base:o[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=a(d),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(r[u].references++,r[u].updater(h)):r.push({identifier:d,updater:b(h,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,i){var s=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,s);else{var o=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function m(e,t,n){var i=n.css,s=n.media,o=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),o&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,p=0;function b(e,t){var n,i,s;if(t.singleton){var o=p++;n=f||(f=c(t)),i=h.bind(null,n,o,!1),s=h.bind(null,n,o,!0)}else n=c(t),i=m.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var s=a(n[i]);r[s].references--}for(var o=l(e,t),c=0;c<n.length;c++){var d=a(n[c]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}n=o}}}},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var i=function(){const e=document.getElementById("slider-body"),t=document.getElementById("slider-thumb"),n=document.getElementById("tip-value"),i=t.offsetWidth/2;function s(s){let o=s.clientX-e.getBoundingClientRect().left-i;o<-i&&(o=-i);const r=e.offsetWidth-i;var a;o>r&&(o=r),t.style.left=o+"px",n.textContent=""+(o+i),n.style.left=o-(n.offsetWidth-t.offsetWidth)/2+"px",a=o+i,e.style.background=`linear-gradient(to right, red ${a}px, #e5e5e5 ${a}px)`}function o(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",s)}n.textContent=""+(Number(getComputedStyle(t).left.slice(0,-2))+i),t.addEventListener("mousedown",(function(e){e.preventDefault(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)})),e.addEventListener("click",s),t.addEventListener("dragstart",(function(){return!1}))};var s=class{constructor(){this.container=document.getElementById("range-slider"),this.minValue=0,this.maxValue=300,this.step=50,this.mark=(this.maxValue-this.minValue)/this.step,this.scale=document.createElement("DIV"),this.scale.classList.add("scale"),this.min=document.createElement("SPAN"),this.min.textContent=""+this.minValue,this.min.style.position="absolute",this.min.style.left="24px",this.max=document.createElement("SPAN"),this.max.textContent=""+this.maxValue,this.max.style.position="absolute",this.max.style.left="316px"}init(){this.container.append(this.scale),this.scale.append(this.min),this.scale.append(this.max),console.log(this.max.offsetWidth);for(let e=1;e<this.mark;e++)this.elem=document.createElement("SPAN"),this.elem.textContent=""+this.step*e,this.elem.style.position="absolute",Number(this.elem.textContent)<100?this.elem.style.left=Number(this.elem.textContent)+20+"px":Number(this.elem.textContent)<1e3&&(this.elem.style.left=Number(this.elem.textContent)+16+"px"),this.max.insertAdjacentElement("beforebegin",this.elem)}destroy(){this.scale.remove()}};class o{constructor(){this.observers=[]}attach(e){if(this.observers.includes(e))return console.log("Subject: Observer has been attached already.");console.log("Subject: Attached an observer."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Subject: Notifying observers...");for(const e of this.observers)e.update(this)}someBusinessLogic(){console.log("\nSubject: I'm doing something important."),this.state=Math.floor(11*Math.random()),console.log("Subject: My state has just changed to: "+this.state),this.notify()}}class r{constructor(e){this.sliderLine="slider-body",this._parentId=e}init(){return this.container=document.getElementById(this._parentId),this.bodySlider=document.createElement("DIV"),this.bodySlider.classList.add("slider-body"),this.bodySlider.setAttribute("id",this.sliderLine),this.container.append(this.bodySlider),this.sliderLine}destroy(){this.bodySlider.remove()}}class a{constructor(e){this._parentId=e}init(){this.container=document.getElementById(this._parentId),this.thumbSlider=document.createElement("DIV"),this.thumbSlider.classList.add("slider-thumb"),this.thumbSlider.setAttribute("id","slider-thumb"),this.container.append(this.thumbSlider)}destroy(){this.thumbSlider.remove()}}class l{constructor(e){this._parentId=e}init(){this.container=document.getElementById(this._parentId),this.tipValue=document.createElement("DIV"),this.tipValue.classList.add("tip-value"),this.tipValue.setAttribute("id","tip-value"),this.container.append(this.tipValue)}destroy(){this.tipValue.remove()}}new class{constructor(e){this._parentId=e}show(){const e=new r(this._parentId);this.sliderLineId=e.init();new a(this.sliderLineId).init();new l(this.sliderLineId).init()}}("range-slider").show();(new s).init(),i();const c=new o,d=new class{update(e){e instanceof o&&e.state<3&&console.log("ConcreteObserverA: Reacted to the event.")}};c.attach(d);const u=new class{isSubjectSatisfies(e){return e instanceof o&&(0===e.state||e.state>=2)}update(e){this.isSubjectSatisfies(e)&&console.log("ConcreteObserverB: Reacted to the event.")}};c.attach(u),c.someBusinessLogic(),c.someBusinessLogic(),c.detach(u),c.someBusinessLogic()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NjYWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9zbGlkZXJCb2R5LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NsaWRlclRodW1iLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3RpcFZhbHVlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3ByZXNlbnRlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwic2xpZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aHVtYiIsInRpcCIsImRlbHRhIiwib2Zmc2V0V2lkdGgiLCJvbk1vdXNlTW92ZSIsImV2ZW50IiwidGh1bWJQb2ludCIsImNsaWVudFgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwicmlnaHRFZGdlIiwidGV4dENvbnRlbnQiLCJiYWNrZ3JvdW5kIiwib25Nb3VzZVVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIk51bWJlciIsImdldENvbXB1dGVkU3R5bGUiLCJzbGljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnRhaW5lciIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJzdGVwIiwibWFyayIsInRoaXMiLCJzY2FsZSIsImNsYXNzTGlzdCIsImFkZCIsIm1pbiIsInBvc2l0aW9uIiwibWF4IiwiYXBwZW5kIiwiY29uc29sZSIsImxvZyIsImVsZW0iLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJDb25jcmV0ZVN1YmplY3QiLCJvYnNlcnZlcnMiLCJvYnNlcnZlciIsImluY2x1ZGVzIiwib2JzZXJ2ZXJJbmRleCIsImluZGV4T2YiLCJzdGF0ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm5vdGlmeSIsIlNsaWRlckJvZHkiLCJwYXJlbnRJZCIsInNsaWRlckxpbmUiLCJfcGFyZW50SWQiLCJib2R5U2xpZGVyIiwiU2xpZGVyVGh1bWIiLCJ0aHVtYlNsaWRlciIsIlRpcFZhbHVlIiwidGlwVmFsdWUiLCJzbGlkZXJCb2R5Iiwic2xpZGVyTGluZUlkIiwiaW5pdCIsInNob3ciLCJvYnNlcnZlcjEiLCJzdWJqZWN0IiwiYXR0YWNoIiwib2JzZXJ2ZXIyIiwiaXNTdWJqZWN0U2F0aXNmaWVzIiwic29tZUJ1c2luZXNzTG9naWMiLCJkZXRhY2giXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1C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QU9DLEdBQ1JBLGFBQW1CekIsR0FBbUJ5QixFQUFRbkIsTUFBUSxHQUN4RFYsUUFBUUMsSUFBSSw4Q0ZVbEIsRUFBUTZCLE9BQU9GLEdBRWYsTUFBTUcsRUFBWSxJRVNsQixNQUNFLG1CQUFtQkYsR0FDakIsT0FBT0EsYUFBbUJ6QixJQUFzQyxJQUFsQnlCLEVBQVFuQixPQUFlbUIsRUFBUW5CLE9BQVMsR0FHakYsT0FBT21CLEdBQ1JyQyxLQUFLd0MsbUJBQW1CSCxJQUMxQjdCLFFBQVFDLElBQUksOENGZmxCLEVBQVE2QixPQUFPQyxHQUVmLEVBQVFFLG9CQUNSLEVBQVFBLG9CQUVSLEVBQVFDLE9BQU9ILEdBRWYsRUFBUUUiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3RcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiZnVuY3Rpb24gc2xpZGVyUnVuKCkge1xuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLWJvZHknKTtcbiAgY29uc3QgdGh1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLXRodW1iJyk7XG4gIGNvbnN0IHRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXAtdmFsdWUnKTtcblxuICBjb25zdCBkZWx0YSA9IHRodW1iLm9mZnNldFdpZHRoIC8gMjtcbiAgdGlwLnRleHRDb250ZW50ID0gYCR7TnVtYmVyKGdldENvbXB1dGVkU3R5bGUodGh1bWIpLmxlZnQuc2xpY2UoMCwgLTIpKSArIGRlbHRhfWA7XG5cbiAgZnVuY3Rpb24gZmlsbFNsaWRlckxpbmUobGVuZ3RoKSB7XG4gICAgc2xpZGVyLnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZWQgJHtsZW5ndGh9cHgsICNlNWU1ZTUgJHtsZW5ndGh9cHgpYDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgbGV0IHRodW1iUG9pbnQgPSBldmVudC5jbGllbnRYIC0gc2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBkZWx0YTtcblxuICAgIC8vINC60YPRgNGB0L7RgCDQstGL0YjQtdC7INC40Lcg0YHQu9Cw0LnQtNC10YDQsCA9PiDQvtGB0YLQsNCy0LjRgtGMINCx0LXQs9GD0L3QvtC6INCyINC10LPQviDQs9GA0LDQvdC40YbQsNGFLlxuICAgIGlmICh0aHVtYlBvaW50IDwgLWRlbHRhKSB7XG4gICAgICB0aHVtYlBvaW50ID0gLWRlbHRhO1xuICAgIH1cbiAgICBjb25zdCByaWdodEVkZ2UgPSBzbGlkZXIub2Zmc2V0V2lkdGggLSBkZWx0YTtcbiAgICBpZiAodGh1bWJQb2ludCA+IHJpZ2h0RWRnZSkge1xuICAgICAgdGh1bWJQb2ludCA9IHJpZ2h0RWRnZTtcbiAgICB9XG5cbiAgICB0aHVtYi5zdHlsZS5sZWZ0ID0gYCR7dGh1bWJQb2ludH1weGA7XG4gICAgdGlwLnRleHRDb250ZW50ID0gYCR7dGh1bWJQb2ludCArIGRlbHRhfWA7XG4gICAgdGlwLnN0eWxlLmxlZnQgPSBgJHt0aHVtYlBvaW50IC0gKHRpcC5vZmZzZXRXaWR0aCAtIHRodW1iLm9mZnNldFdpZHRoKSAvIDJ9cHhgO1xuICAgIGZpbGxTbGlkZXJMaW5lKHRodW1iUG9pbnQgKyBkZWx0YSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdXNlVXAoKTogdm9pZCB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbk1vdXNlTW92ZSk7XG4gIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHJldHVybkZhbHNlKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc2xpZGVyUnVuO1xuIiwiY2xhc3MgU2NhbGUge1xuICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFuZ2Utc2xpZGVyJyk7XG4gIG1pblZhbHVlID0gMDtcbiAgbWF4VmFsdWUgPSAzMDA7XG4gIHN0ZXAgPSA1MDtcbiAgbWFyayA9ICh0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZSkgLyB0aGlzLnN0ZXA7XG4gIHNjYWxlOiBIVE1MRWxlbWVudDtcbiAgbWluOiBIVE1MRWxlbWVudDtcbiAgbWF4OiBIVE1MRWxlbWVudDtcbiAgZWxlbTogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zY2FsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHRoaXMuc2NhbGUuY2xhc3NMaXN0LmFkZCgnc2NhbGUnKTtcbiAgICB0aGlzLm1pbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcbiAgICB0aGlzLm1pbi50ZXh0Q29udGVudCA9IGAke3RoaXMubWluVmFsdWV9YDtcbiAgICB0aGlzLm1pbi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgdGhpcy5taW4uc3R5bGUubGVmdCA9ICcyNHB4JztcbiAgICB0aGlzLm1heCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcbiAgICB0aGlzLm1heC50ZXh0Q29udGVudCA9IGAke3RoaXMubWF4VmFsdWV9YDtcbiAgICB0aGlzLm1heC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgdGhpcy5tYXguc3R5bGUubGVmdCA9ICczMTZweCc7XG4gIH1cblxuICBpbml0KCkge1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLnNjYWxlKTtcbiAgICB0aGlzLnNjYWxlLmFwcGVuZCh0aGlzLm1pbik7XG4gICAgdGhpcy5zY2FsZS5hcHBlbmQodGhpcy5tYXgpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMubWF4Lm9mZnNldFdpZHRoKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMubWFyazsgaSsrKSB7XG4gICAgICB0aGlzLmVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTUEFOJyk7XG4gICAgICB0aGlzLmVsZW0udGV4dENvbnRlbnQgPSBgJHt0aGlzLnN0ZXAgKiBpfWA7XG4gICAgICB0aGlzLmVsZW0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgaWYgKE51bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpIDwgMTAwKSB7XG4gICAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gYCR7TnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgKyAyMH1weGA7XG4gICAgICB9IGVsc2UgaWYgKE51bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpIDwgMTAwMCkge1xuICAgICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IGAke051bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpICsgMTZ9cHhgO1xuICAgICAgfVxuICAgICAgdGhpcy5tYXguaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIHRoaXMuZWxlbSk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNjYWxlLnJlbW92ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNjYWxlO1xuIiwiaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XG5cbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLXN5bnRheCAqL1xuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5cbi8vIGNsYXNzIFVzZXIge1xuLy8gICBuYW1lOiBzdHJpbmc7XG4vLyAgIGFnZTogbnVtYmVyO1xuXG4vLyAgIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcsIF9hZ2U6IG51bWJlcikge1xuLy8gICAgIHRoaXMubmFtZSA9IF9uYW1lO1xuLy8gICAgIHRoaXMuYWdlID0gX2FnZTtcbi8vICAgfVxuLy8gfVxuXG4vLyBleHBvcnQgZGVmYXVsdCBVc2VyO1xuXG4vKipcbiAqINCY0L3RgtGE0LXRgNGE0LXQudGBINC40LfQtNCw0YLQtdC70Y8g0L7QsdGK0Y/QstC70Y/QtdGCINC90LDQsdC+0YAg0LzQtdGC0L7QtNC+0LIg0LTQu9GPINGD0L/RgNCw0LLQu9C10L3QuNGP0LzQuCDQv9C+0LTQv9C40YHRh9C40LrQsNC80LguXG4gKi9cbmludGVyZmFjZSBTdWJqZWN0IHtcbiAgLy8g0J/RgNC40YHQvtC10LTQuNC90Y/QtdGCINC90LDQsdC70Y7QtNCw0YLQtdC70Y8g0Log0LjQt9C00LDRgtC10LvRji5cbiAgYXR0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQ7XG5cbiAgLy8g0J7RgtGB0L7QtdC00LjQvdGP0LXRgiDQvdCw0LHQu9GO0LTQsNGC0LXQu9GPINC+0YIg0LjQt9C00LDRgtC10LvRjy5cbiAgZGV0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQ7XG5cbiAgLy8g0KPQstC10LTQvtC80LvRj9C10YIg0LLRgdC10YUg0L3QsNCx0LvRjtC00LDRgtC10LvQtdC5INC+INGB0L7QsdGL0YLQuNC4LlxuICBub3RpZnkoKTogdm9pZDtcbn1cblxuLyoqXG4qINCY0LfQtNCw0YLQtdC70Ywg0LLQu9Cw0LTQtdC10YIg0L3QtdC60L7RgtC+0YDRi9C8INCy0LDQttC90YvQvCDRgdC+0YHRgtC+0Y/QvdC40LXQvCDQuCDQvtC/0L7QstC10YnQsNC10YIg0L3QsNCx0LvRjtC00LDRgtC10LvQtdC5INC+INC10LPQvlxuKiDQuNC30LzQtdC90LXQvdC40Y/RhS5cbiovXG5jbGFzcyBDb25jcmV0ZVN1YmplY3QgaW1wbGVtZW50cyBTdWJqZWN0IHtcbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9INCU0LvRjyDRg9C00L7QsdGB0YLQstCwINCyINGN0YLQvtC5INC/0LXRgNC10LzQtdC90L3QvtC5INGF0YDQsNC90LjRgtGB0Y8g0YHQvtGB0YLQvtGP0L3QuNC1XG4gICAqINCY0LfQtNCw0YLQtdC70Y8sINC90LXQvtCx0YXQvtC00LjQvNC+0LUg0LLRgdC10Lwg0L/QvtC00L/QuNGB0YfQuNC60LDQvC5cbiAgICovXG4gIHB1YmxpYyBzdGF0ZTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7T2JzZXJ2ZXJbXX0g0KHQv9C40YHQvtC6INC/0L7QtNC/0LjRgdGH0LjQutC+0LIuINCSINGA0LXQsNC70YzQvdC+0Lkg0LbQuNC30L3QuCDRgdC/0LjRgdC+0LpcbiAgICog0L/QvtC00L/QuNGB0YfQuNC60L7QsiDQvNC+0LbQtdGCINGF0YDQsNC90LjRgtGM0YHRjyDQsiDQsdC+0LvQtdC1INC/0L7QtNGA0L7QsdC90L7QvCDQstC40LTQtSAo0LrQu9Cw0YHRgdC40YTQuNGG0LjRgNGD0LXRgtGB0Y8g0L/QvlxuICAgKiDRgtC40L/RgyDRgdC+0LHRi9GC0LjRjyDQuCDRgi7QtC4pXG4gICAqL1xuICBwcml2YXRlIG9ic2VydmVyczogT2JzZXJ2ZXJbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiDQnNC10YLQvtC00Ysg0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QvtC00L/QuNGB0LrQvtC5LlxuICAgKi9cbiAgcHVibGljIGF0dGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcbiAgICBjb25zdCBpc0V4aXN0ID0gdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpO1xuICAgIGlmIChpc0V4aXN0KSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ1N1YmplY3Q6IE9ic2VydmVyIGhhcyBiZWVuIGF0dGFjaGVkIGFscmVhZHkuJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N1YmplY3Q6IEF0dGFjaGVkIGFuIG9ic2VydmVyLicpO1xuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICB9XG5cbiAgcHVibGljIGRldGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcbiAgICBjb25zdCBvYnNlcnZlckluZGV4ID0gdGhpcy5vYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlcik7XG4gICAgaWYgKG9ic2VydmVySW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ1N1YmplY3Q6IE5vbmV4aXN0ZW50IG9ic2VydmVyLicpO1xuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShvYnNlcnZlckluZGV4LCAxKTtcbiAgICBjb25zb2xlLmxvZygnU3ViamVjdDogRGV0YWNoZWQgYW4gb2JzZXJ2ZXIuJyk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YPRgdC6INC+0LHQvdC+0LLQu9C10L3QuNGPINCyINC60LDQttC00L7QvCDQv9C+0LTQv9C40YHRh9C40LrQtS5cbiAgICovXG4gIHB1YmxpYyBub3RpZnkoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1N1YmplY3Q6IE5vdGlmeWluZyBvYnNlcnZlcnMuLi4nKTtcbiAgICBmb3IgKGNvbnN0IG9ic2VydmVyIG9mIHRoaXMub2JzZXJ2ZXJzKSB7XG4gICAgICBvYnNlcnZlci51cGRhdGUodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCe0LHRi9GH0L3QviDQu9C+0LPQuNC60LAg0L/QvtC00L/QuNGB0LrQuCDigJMg0YLQvtC70YzQutC+INGH0LDRgdGC0Ywg0YLQvtCz0L4sINGH0YLQviDQtNC10LvQsNC10YIg0JjQt9C00LDRgtC10LvRjC4g0JjQt9C00LDRgtC10LvQuFxuICAgKiDRh9Cw0YHRgtC+INGB0L7QtNC10YDQttCw0YIg0L3QtdC60L7RgtC+0YDRg9GOINCy0LDQttC90YPRjiDQsdC40LfQvdC10YEt0LvQvtCz0LjQutGDLCDQutC+0YLQvtGA0LDRjyDQt9Cw0L/Rg9GB0LrQsNC10YIg0LzQtdGC0L7QtFxuICAgKiDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINCy0YHRj9C60LjQuSDRgNCw0LcsINC60L7Qs9C00LAg0LTQvtC70LbQvdC+INC/0YDQvtC40LfQvtC50YLQuCDRh9GC0L4t0YLQviDQstCw0LbQvdC+0LUgKNC40LvQuCDQv9C+0YHQu9C1XG4gICAqINGN0YLQvtCz0L4pLlxuICAgKi9cbiAgcHVibGljIHNvbWVCdXNpbmVzc0xvZ2ljKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdcXG5TdWJqZWN0OiBJXFwnbSBkb2luZyBzb21ldGhpbmcgaW1wb3J0YW50LicpO1xuICAgIHRoaXMuc3RhdGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMTAgKyAxKSk7XG5cbiAgICBjb25zb2xlLmxvZyhgU3ViamVjdDogTXkgc3RhdGUgaGFzIGp1c3QgY2hhbmdlZCB0bzogJHt0aGlzLnN0YXRlfWApO1xuICAgIHRoaXMubm90aWZ5KCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgU3ViamVjdCwgQ29uY3JldGVTdWJqZWN0IH07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJCb2R5IHtcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgYm9keVNsaWRlcjogSFRNTEVsZW1lbnQ7XG4gIHNsaWRlckxpbmUgPSAnc2xpZGVyLWJvZHknO1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudElkKSB7XG4gICAgdGhpcy5fcGFyZW50SWQgPSBwYXJlbnRJZDtcbiAgfTtcblxuICBpbml0KCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fcGFyZW50SWQpO1xuICAgIHRoaXMuYm9keVNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHRoaXMuYm9keVNsaWRlci5jbGFzc0xpc3QuYWRkKCdzbGlkZXItYm9keScpO1xuICAgIHRoaXMuYm9keVNsaWRlci5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5zbGlkZXJMaW5lKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5ib2R5U2xpZGVyKTtcbiAgICByZXR1cm4gdGhpcy5zbGlkZXJMaW5lO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmJvZHlTbGlkZXIucmVtb3ZlKCk7XG4gIH1cblxuICAvLyBnZXRXaWR0aCgpIHtcbiAgLy8gICByZXR1cm4gdGhpcy5ib2R5U2xpZGVyLm9mZnNldFdpZHRoO1xuICAvLyB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJUaHVtYiB7XG4gIHByaXZhdGUgX3BhcmVudElkOiBzdHJpbmc7XG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHRodW1iU2xpZGVyOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihwYXJlbnRJZCkge1xuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XG4gIH07XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX3BhcmVudElkKTtcbiAgICB0aGlzLnRodW1iU2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgdGhpcy50aHVtYlNsaWRlci5jbGFzc0xpc3QuYWRkKCdzbGlkZXItdGh1bWInKTtcbiAgICB0aGlzLnRodW1iU2xpZGVyLnNldEF0dHJpYnV0ZSgnaWQnLCAnc2xpZGVyLXRodW1iJyk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMudGh1bWJTbGlkZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnRodW1iU2xpZGVyLnJlbW92ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaXBWYWx1ZSB7XHJcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcclxuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHRpcFZhbHVlOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IocGFyZW50SWQpIHtcclxuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XHJcbiAgfTtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fcGFyZW50SWQpO1xyXG4gICAgdGhpcy50aXBWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgdGhpcy50aXBWYWx1ZS5jbGFzc0xpc3QuYWRkKCd0aXAtdmFsdWUnKTtcclxuICAgIHRoaXMudGlwVmFsdWUuc2V0QXR0cmlidXRlKCdpZCcsICd0aXAtdmFsdWUnKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLnRpcFZhbHVlKTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLnRpcFZhbHVlLnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XHJcblxyXG5pbXBvcnQgc2xpZGVyUnVuIGZyb20gJy4vbW9kdWxlcy9zbGlkZXInO1xyXG5pbXBvcnQgU2xpZGVyQm9keSBmcm9tICcuL21vZHVsZXMvc2xpZGVyQm9keSc7XHJcbmltcG9ydCBTbGlkZXJUaHVtYiBmcm9tICcuL21vZHVsZXMvc2xpZGVyVGh1bWInO1xyXG5pbXBvcnQgVGlwVmFsdWUgZnJvbSAnLi9tb2R1bGVzL3RpcFZhbHVlJztcclxuaW1wb3J0IFNjYWxlIGZyb20gJy4vbW9kdWxlcy9zY2FsZSc7XHJcbmltcG9ydCB7IENvbmNyZXRlU3ViamVjdCB9IGZyb20gJy4vbW9kdWxlcy9hcHAnO1xyXG5pbXBvcnQgVmlldyBmcm9tICcuL21vZHVsZXMvdmlldyc7XHJcbmltcG9ydCB7IENvbmNyZXRlT2JzZXJ2ZXJBLCBDb25jcmV0ZU9ic2VydmVyQiB9IGZyb20gJy4vbW9kdWxlcy9wcmVzZW50ZXInO1xyXG5cclxuY29uc3QgdmlldzogVmlldyA9IG5ldyBWaWV3KCdyYW5nZS1zbGlkZXInKTtcclxudmlldy5zaG93KCk7XHJcbi8vIGNvbnN0IHNsaWRlcjI6IFZpZXcgPSBuZXcgVmlldygpO1xyXG4vLyBzbGlkZXIyLmhpZGUoKTtcclxuLy8gY29uc3Qgc2xpZGVyMzogVmlldyA9IG5ldyBWaWV3KCcnKTtcclxuLy8gc2xpZGVyMy5oaWRlKCk7XHJcblxyXG5jb25zdCBzY2FsZTogU2NhbGUgPSBuZXcgU2NhbGUoKTtcclxuc2NhbGUuaW5pdCgpO1xyXG5cclxuc2xpZGVyUnVuKCk7XHJcblxyXG4vKipcclxuKiDQmtC70LjQtdC90YLRgdC60LjQuSDQutC+0LQuXHJcbiovXHJcblxyXG5jb25zdCBzdWJqZWN0ID0gbmV3IENvbmNyZXRlU3ViamVjdCgpO1xyXG5cclxuY29uc3Qgb2JzZXJ2ZXIxID0gbmV3IENvbmNyZXRlT2JzZXJ2ZXJBKCk7XHJcbnN1YmplY3QuYXR0YWNoKG9ic2VydmVyMSk7XHJcblxyXG5jb25zdCBvYnNlcnZlcjIgPSBuZXcgQ29uY3JldGVPYnNlcnZlckIoKTtcclxuc3ViamVjdC5hdHRhY2gob2JzZXJ2ZXIyKTtcclxuXHJcbnN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuc3ViamVjdC5zb21lQnVzaW5lc3NMb2dpYygpO1xyXG5cclxuc3ViamVjdC5kZXRhY2gob2JzZXJ2ZXIyKTtcclxuXHJcbnN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuXHJcbi8vIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcclxuXHJcbi8vIGNvbnN0IHRvbTogVXNlciA9IG5ldyBVc2VyKCfQotC+0LwnLCAyOSk7XHJcbi8vIGVsLmlubmVySFRNTCA9IGDQmNC80Y86ICR7dG9tLm5hbWV9INCy0L7Qt9GA0LDRgdGCOiAke3RvbS5hZ2V9YDtcclxuXHJcbi8qIGNvbnN0IE1WUCA9IHtcclxuICBtYWtlT2JzZXJ2YWJsZVN1YmplY3QoKSB7XHJcbiAgICBjb25zdCBvYnNlcnZlcnMgPSBbXTtcclxuICAgIGNvbnN0IGFkZE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgaWYgKHR5cGVvZiBvICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIGlmIChvYnNlcnZlciA9PT0gbykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBhbHJlYWR5IGluIHRoZSBsaXN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIG9ic2VydmVycy5wdXNoKG8pO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbW92ZU9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IG8pIHtcclxuICAgICAgICAgIG9ic2VydmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGZpbmQgb2JzZXJ2ZXIgaW4gbGlzdCBvZiBvYnNlcnZlcnMnKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBub3RpZnlPYnNlcnZlcnMgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAvLyBNYWtlIGEgY29weSBvZiBvYnNlcnZlciBsaXN0IGluIGNhc2UgdGhlIGxpc3RcclxuICAgICAgLy8gaXMgbXV0YXRlZCBkdXJpbmcgdGhlIG5vdGlmaWNhdGlvbnMuXHJcbiAgICAgIGNvbnN0IG9ic2VydmVyc1NuYXBzaG90ID0gb2JzZXJ2ZXJzLnNsaWNlKDApO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVyc1NuYXBzaG90Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgb2JzZXJ2ZXJzU25hcHNob3RbaV0oZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhZGRPYnNlcnZlcixcclxuICAgICAgcmVtb3ZlT2JzZXJ2ZXIsXHJcbiAgICAgIG5vdGlmeU9ic2VydmVycyxcclxuICAgICAgbm90aWZ5OiBub3RpZnlPYnNlcnZlcnMsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIE1vZGVsKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAvLyBjb25zdCBpdGVtcyA9IFtdO1xyXG4gICAgdGhpcy5vcHRpb25zID0gIW9wdGlvbnMgPyB7fSA6IG9wdGlvbnM7XHJcbiAgICB0aGlzLm1vZGVsQ2hhbmdlZFN1YmplY3QgPSBNVlAubWFrZU9ic2VydmFibGVTdWJqZWN0KCk7XHJcbiAgICB0aGlzLm1pblZhbHVlID0gMDtcclxuICAgIHRoaXMubWF4VmFsdWUgPSAzMDA7XHJcbiAgICB0aGlzLnN0ZXAgPSA1MDtcclxuICAgIHRoaXMubW9kZSA9ICdob3Jpem9udGFsJztcclxuICAgIHRoaXMudHlwZSA9ICdzaW5nbGUnO1xyXG4gICAgLy8gdGhpcy5hZGRJdGVtID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAvLyAgIGlmICghdmFsdWUpIHtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaXRlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnJlbW92ZUN1cnJlbnRJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBpZiAodGhhdC5zZWxlY3RlZEluZGV4ID09PSAtMSkge1xyXG4gICAgLy8gICAgIHJldHVybjtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpdGVtcy5zcGxpY2UodGhhdC5zZWxlY3RlZEluZGV4LCAxKTtcclxuICAgIC8vICAgdGhhdC5tb2RlbENoYW5nZWRTdWJqZWN0Lm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHJldHVybiBpdGVtcztcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgIC8vIHRoaXMuZ2V0U2VsZWN0ZWRJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgcmV0dXJuIHRoYXQuc2VsZWN0ZWRJbmRleDtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnNldFNlbGVjdGVkSW5kZXggPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIC8vICAgdGhhdC5zZWxlY3RlZEluZGV4ID0gdmFsdWU7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgfSxcclxuXHJcbiAgVmlldygpIHtcclxuICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAgICAgc2xpZGVyQm9keS5pbml0KCk7XHJcblxyXG4gICAgICBjb25zdCBzbGlkZXJUaHVtYjogU2xpZGVyVGh1bWIgPSBuZXcgU2xpZGVyVGh1bWIoKTtcclxuICAgICAgc2xpZGVyVGh1bWIuaW5pdCgpO1xyXG5cclxuICAgICAgY29uc3QgdGlwVmFsdWU6IFRpcFZhbHVlID0gbmV3IFRpcFZhbHVlKCk7XHJcbiAgICAgIHRpcFZhbHVlLmluaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhhdC5zZWxlY3QgPSAkKCc8c2VsZWN0Lz4nKS5hcHBlbmRUbyhyb290T2JqZWN0KTtcclxuICAgIC8vIHRoYXQuc2VsZWN0LmF0dHIoJ3NpemUnLCAnNCcpO1xyXG4gICAgLy8gdGhhdC5idXR0b25BZGQgPSAkKCc8YnV0dG9uPis8L2J1dHRvbj4nKS5hcHBlbmRUbyhyb290T2JqZWN0KS5oZWlnaHQoMjApO1xyXG4gICAgLy8gdGhhdC5idXR0b25SZW1vdmUgPSAkKCc8YnV0dG9uPi08L2J1dHRvbj4nKS5hcHBlbmRUbyhyb290T2JqZWN0KS5oZWlnaHQoMjApO1xyXG4gICAgLy8gbW9kZWwubW9kZWxDaGFuZ2VkU3ViamVjdC5hZGRPYnNlcnZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHZhciBpdGVtcyA9IG1vZGVsLmdldEl0ZW1zKCk7XHJcbiAgICAvLyAgIHZhciBpbm5lckhUTUwgPSAnJztcclxuICAgIC8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgLy8gICAgIGlubmVySFRNTCArPSBcIjxvcHRpb24+XCIgKyBpdGVtc1tpXSArIFwiPC9vcHRpb24+XCI7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgdGhhdC5zZWxlY3QuaHRtbChpbm5lckhUTUwpO1xyXG4gICAgLy8gfSk7XHJcbiAgfSxcclxuXHJcbiAgQ29udHJvbGxlcihtb2RlbCwgdmlldykge1xyXG4gICAgdmlldy5pbml0KCk7XHJcbiAgICAvLyB2aWV3LmJ1dHRvbkFkZC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwuYWRkSXRlbShwcm9tcHQoJ2FkZHZhbHVlJykpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyB2aWV3LmJ1dHRvblJlbW92ZS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwucmVtb3ZlQ3VycmVudEl0ZW0oKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gdmlldy5zZWxlY3QuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLnNldFNlbGVjdGVkSW5kZXgodmlldy5zZWxlY3RbMF0uc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAvLyB9KTtcclxuICB9LFxyXG59OyAqL1xyXG5cclxuLyogJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBtb2RlbCA9IG5ldyBPTVZDLk1vZGVsKCk7XHJcbiAgdmFyIHZpZXcgPSBuZXcgT01WQy5WaWV3KG1vZGVsLCAkKCc8ZGl2Lz4nKS5hcHBlbmRUbygkKFwiYm9keVwiKSkpO1xyXG4gIHZhciBjb250cm9sbGVyID0gbmV3IE9NVkMuQ29udHJvbGxlcihtb2RlbCwgdmlldyk7XHJcbn0pOyAqL1xyXG5cclxuLy8gY29uc3QgbW9kZWwgPSBuZXcgTVZQLk1vZGVsKCk7XHJcbi8vIGNvbnN0IHZpZXcgPSBuZXcgTVZQLlZpZXcoKTtcclxuLy8gY29uc3QgY29udHJvbGxlciA9IG5ldyBNVlAuQ29udHJvbGxlcihtb2RlbCwgdmlldyk7XHJcblxyXG4vLyBjb250cm9sbGVyKCk7XHJcbiIsImltcG9ydCBTbGlkZXJCb2R5IGZyb20gJy4vc2xpZGVyQm9keSc7XHJcbmltcG9ydCBTbGlkZXJUaHVtYiBmcm9tICcuL3NsaWRlclRodW1iJztcclxuaW1wb3J0IFRpcFZhbHVlIGZyb20gJy4vdGlwVmFsdWUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XHJcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcclxuICBzbGlkZXJMaW5lSWQ6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IocGFyZW50SWQ/KSB7XHJcbiAgICB0aGlzLl9wYXJlbnRJZCA9IHBhcmVudElkO1xyXG4gIH07XHJcblxyXG4gIHNob3coKSB7XHJcbiAgICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkodGhpcy5fcGFyZW50SWQpO1xyXG4gICAgdGhpcy5zbGlkZXJMaW5lSWQgPSBzbGlkZXJCb2R5LmluaXQoKTtcclxuICAgIGNvbnN0IHNsaWRlclRodW1iOiBTbGlkZXJUaHVtYiA9IG5ldyBTbGlkZXJUaHVtYih0aGlzLnNsaWRlckxpbmVJZCk7XHJcbiAgICBzbGlkZXJUaHVtYi5pbml0KCk7XHJcbiAgICBjb25zdCB0aXBWYWx1ZTogVGlwVmFsdWUgPSBuZXcgVGlwVmFsdWUodGhpcy5zbGlkZXJMaW5lSWQpO1xyXG4gICAgdGlwVmFsdWUuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gc2xpZGVyTGVuZ3RoOiBudW1iZXI7XHJcbiAgLy8gaW5pdCgpIHtcclxuICAvLyAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSgpO1xyXG4gIC8vICAgc2xpZGVyQm9keS5pbml0KCk7XHJcbiAgLy8gfVxyXG5cclxuICAvLyBnZXRXaWR0aFNsaWRlcigpIHtcclxuICAvLyAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSgpO1xyXG4gIC8vICAgdGhpcy5zbGlkZXJMZW5ndGggPSBzbGlkZXJCb2R5LmdldFdpZHRoKCk7XHJcbiAgLy8gICByZXR1cm4gdGhpcy5zbGlkZXJMZW5ndGg7XHJcbiAgLy8gfVxyXG59XHJcbiIsImltcG9ydCB7IFN1YmplY3QsIENvbmNyZXRlU3ViamVjdCB9IGZyb20gJy4vYXBwJztcbmltcG9ydCBTbGlkZXJCb2R5IGZyb20gJy4vc2xpZGVyQm9keSc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQgVmlldyBmcm9tICcuL3ZpZXcnO1xuLyoqXG4qINCY0L3RgtC10YDRhNC10LnRgSDQndCw0LHQu9GO0LTQsNGC0LXQu9GPINC+0LHRitGP0LLQu9GP0LXRgiDQvNC10YLQvtC0INGD0LLQtdC00L7QvNC70LXQvdC40Y8sINC60L7RgtC+0YDRi9C5INC40LfQtNCw0YLQtdC70Lhcbiog0LjRgdC/0L7Qu9GM0LfRg9GO0YIg0LTQu9GPINC+0L/QvtCy0LXRidC10L3QuNGPINGB0LLQvtC40YUg0L/QvtC00L/QuNGB0YfQuNC60L7Qsi5cbiovXG5pbnRlcmZhY2UgT2JzZXJ2ZXIge1xuICAvLyDQn9C+0LvRg9GH0LjRgtGMINC+0LHQvdC+0LLQu9C10L3QuNC1INC+0YIg0YHRg9Cx0YrQtdC60YLQsC5cbiAgdXBkYXRlKHN1YmplY3Q6IFN1YmplY3QpOiB2b2lkO1xufVxuXG4vKipcbiog0JrQvtC90LrRgNC10YLQvdGL0LUg0J3QsNCx0LvRjtC00LDRgtC10LvQuCDRgNC10LDQs9C40YDRg9GO0YIg0L3QsCDQvtCx0L3QvtCy0LvQtdC90LjRjywg0LLRi9C/0YPRidC10L3QvdGL0LUg0JjQt9C00LDRgtC10LvQtdC8LCDQulxuKiDQutC+0YLQvtGA0L7QvNGDINC+0L3QuCDQv9GA0LjQutGA0LXQv9C70LXQvdGLLlxuKi9cbmNsYXNzIENvbmNyZXRlT2JzZXJ2ZXJBIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xuICBwdWJsaWMgdXBkYXRlKHN1YmplY3Q6IFN1YmplY3QpOiB2b2lkIHtcbiAgICBpZiAoc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiBzdWJqZWN0LnN0YXRlIDwgMykge1xuICAgICAgY29uc29sZS5sb2coJ0NvbmNyZXRlT2JzZXJ2ZXJBOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgTW9kZWxPYnNlcnZlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcbiAgLy8gdHJhbnNmZXIoKSB7XG4gIC8vICAgY29uc3QgdmlldzogVmlldyA9IG5ldyBWaWV3KCk7XG4gICAgLy8gcmV0dXJuIHZpZXcuZ2V0V2lkdGhTbGlkZXIoKTtcbiAgLy8gfVxuICB1cGRhdGUobW9kZWwpIHtcblxuICB9XG59XG5cbmNsYXNzIFZpZXdPYnNlcnZlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcbiAgdXBkYXRlKHZpZXcpIHtcblxuICB9XG59XG5cbmNsYXNzIENvbmNyZXRlT2JzZXJ2ZXJCIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xuICBpc1N1YmplY3RTYXRpc2ZpZXMoc3ViamVjdCkge1xuICAgIHJldHVybiBzdWJqZWN0IGluc3RhbmNlb2YgQ29uY3JldGVTdWJqZWN0ICYmIChzdWJqZWN0LnN0YXRlID09PSAwIHx8IHN1YmplY3Quc3RhdGUgPj0gMik7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKHN1YmplY3Q6IFN1YmplY3QpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N1YmplY3RTYXRpc2ZpZXMoc3ViamVjdCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDb25jcmV0ZU9ic2VydmVyQjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IE9ic2VydmVyLCBDb25jcmV0ZU9ic2VydmVyQSwgQ29uY3JldGVPYnNlcnZlckIgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=