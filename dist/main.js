!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist",i(i.s=3)}([function(e,t,i){var s=i(1),n=i(2);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};s(n,o);e.exports=n.locals||{}},function(e,t,i){"use strict";var s,n=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),r=[];function a(e){for(var t=-1,i=0;i<r.length;i++)if(r[i].identifier===e){t=i;break}return t}function l(e,t){for(var i={},s=[],n=0;n<e.length;n++){var o=e[n],l=t.base?o[0]+t.base:o[0],c=i[l]||0,u="".concat(l," ").concat(c);i[l]=c+1;var h=a(u),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(r[h].references++,r[h].updater(d)):r.push({identifier:u,updater:v(d,t),references:1}),s.push(u)}return s}function c(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var n=i.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,i,s){var n=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=h(t,n);else{var o=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function f(e,t,i){var s=i.css,n=i.media,o=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var m=null,p=0;function v(e,t){var i,s,n;if(t.singleton){var o=p++;i=m||(m=c(t)),s=d.bind(null,i,o,!1),n=d.bind(null,i,o,!0)}else i=c(t),s=f.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<i.length;s++){var n=a(i[s]);r[n].references--}for(var o=l(e,t),c=0;c<i.length;c++){var u=a(i[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}i=o}}}},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);class s{constructor(e,t){this._elemId=e.slice(1),this._options=t}init(){this.lineElem=document.getElementById(this._elemId),this.thumbElem=document.createElement("DIV"),this.valueElem=document.createElement("DIV")}showSliderLine(){this.lineElem.classList.add("slider-body")}showSliderThumb(){this.thumbElem.classList.add("slider-thumb"),this.lineElem.append(this.thumbElem),this.thumbElem.style.left=(this._options.values[0]-this._options.min)*this.lineElem.offsetWidth/(this._options.max-this._options.min)-this.thumbElem.offsetWidth/2+"px"}showSliderValue(){this.valueElem.classList.add("tip-value"),this.lineElem.append(this.valueElem),this.valueElem.textContent=""+Math.round((this.thumbElem.offsetLeft+this.thumbElem.offsetWidth/2-this.lineElem.offsetLeft)*(this._options.max-this._options.min)/this.lineElem.offsetWidth+this._options.min),this.valueElem.style.left=(Number(this.valueElem.textContent)-this._options.min)*this.lineElem.offsetWidth/(this._options.max-this._options.min)-this.valueElem.offsetWidth/2+"px"}}class n{communicate(e){this._selector=e._selector,this._options=e.getData();const t=new s(this._selector,this._options);t.init(),t.showSliderLine(),t.showSliderThumb(),t.showSliderValue(),console.log("ModelObserver: Reacted to the event.")}}class o{constructor(){this.observers=[]}attach(e){if(this.observers.includes(e))return console.log("Model: Presenter has been attached already.");console.log("Model: Attached a presenter."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Model: Notifying observers...");for(const e of this.observers)e.communicate(this)}setData(e,t){this._min=e.min,this._max=e.max,this._step=e.step,this._kind=e.kind,this._isBasic=e.isBasic,this._values=e.values,this._selector=t,console.log("Model: My state has just changed"),this.notify()}getData(){return{min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values,selector:this._selector}}}class r{constructor(e,t){this._selector=e,t||(t={}),this._min=t.min?t.min:0,this._max=t.max?t.max:300,this._step=t.step?t.step:57,this._kind=t.kind?t.kind:"horizontal",this._isBasic=!t.isBasic||t.isBasic,this._values=t.values?t.values:[this._step]}init(){const e=new o,t=new n;e.attach(t),this.setData(),e.setData(this._options,this._selector)}setData(){this._options={min:this._min,max:this._max,step:this._step,kind:this._kind,isBasic:this._isBasic,values:this._values},console.log(this._options)}}new r("#slider1").init();new r("#slider2",{min:40,step:60,max:245}).init();new r("#slider3",{values:[300]}).init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9wcmVzZW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwiVmlldyIsImVsZW1JZCIsInRoaXMiLCJfZWxlbUlkIiwic2xpY2UiLCJfb3B0aW9ucyIsImxpbmVFbGVtIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aHVtYkVsZW0iLCJ2YWx1ZUVsZW0iLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmQiLCJsZWZ0IiwidmFsdWVzIiwibWluIiwib2Zmc2V0V2lkdGgiLCJtYXgiLCJ0ZXh0Q29udGVudCIsIk1hdGgiLCJyb3VuZCIsIm9mZnNldExlZnQiLCJOdW1iZXIiLCJtb2RlbCIsIl9zZWxlY3RvciIsImdldERhdGEiLCJ2aWV3IiwiaW5pdCIsInNob3dTbGlkZXJMaW5lIiwic2hvd1NsaWRlclRodW1iIiwic2hvd1NsaWRlclZhbHVlIiwiY29uc29sZSIsImxvZyIsIk1vZGVsIiwib2JzZXJ2ZXJzIiwib2JzZXJ2ZXIiLCJpbmNsdWRlcyIsIm9ic2VydmVySW5kZXgiLCJpbmRleE9mIiwiY29tbXVuaWNhdGUiLCJzZWxlY3RvciIsIl9taW4iLCJfbWF4IiwiX3N0ZXAiLCJzdGVwIiwiX2tpbmQiLCJraW5kIiwiX2lzQmFzaWMiLCJpc0Jhc2ljIiwiX3ZhbHVlcyIsIm5vdGlmeSIsInByZXNlbnRlciIsImF0dGFjaCIsInNldERhdGEiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEs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QVF3RyxJQUFNeEcsRUFBUXdHLElBQU0sSUFDeENmLEtBQUt5QyxNQUFRbEksRUFBUW1JLEtBQU9uSSxFQUFRbUksS0FBTyxHQUMzQzFDLEtBQUsyQyxNQUFRcEksRUFBUXFJLEtBQU9ySSxFQUFRcUksS0FBTyxhQUMzQzVDLEtBQUs2QyxVQUFXdEksRUFBUXVJLFNBQVV2SSxFQUFRdUksUUFDMUM5QyxLQUFLK0MsUUFBVXhJLEVBQVFxRyxPQUFTckcsRUFBUXFHLE9BQVMsQ0FBQ1osS0FBS3lDLE9BR3pELE9BQ0UsTUFBTXBCLEVBQWUsSUFBSVUsRUFDbkJrQixFQUFZLElBQUksRUFDdEI1QixFQUFNNkIsT0FBT0QsR0FDYmpELEtBQUttRCxVQUNMOUIsRUFBTThCLFFBQVFuRCxLQUFLRyxTQUFVSCxLQUFLc0IsV0FHcEMsVUFDRXRCLEtBQUtHLFNBQVcsQ0FDZFUsSUFBS2IsS0FBS3VDLEtBQ1Z4QixJQUFLZixLQUFLd0MsS0FDVkUsS0FBTTFDLEtBQUt5QyxNQUNYRyxLQUFNNUMsS0FBSzJDLE1BQ1hHLFFBQVM5QyxLQUFLNkMsU0FDZGpDLE9BQVFaLEtBQUsrQyxTQUVmbEIsUUFBUUMsSUFBSTlCLEtBQUtHLFdDekNHLElBQUksRUFBTyxZQUMzQnNCLE9BRWdCLElBQUksRUFBTyxXQUFZLENBQUNaLElBQUssR0FBSTZCLEtBQU0sR0FBSTNCLElBQUssTUFDaEVVLE9BRWdCLElBQUksRUFBTyxXQUFZLENBQUNiLE9BQVEsQ0FBQyxPQUNqRGEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3RcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLy8gaW1wb3J0IFRpcFZhbHVlIGZyb20gJy4vdGlwVmFsdWUnO1xyXG5pbXBvcnQgU2NhbGUgZnJvbSAnLi9zY2FsZSc7XHJcblxyXG50eXBlIG9wdGlvbnNUeXBlID0ge1xyXG4gIG1pbj86IG51bWJlcixcclxuICBtYXg/OiBudW1iZXIsXHJcbiAgc3RlcD86IG51bWJlcixcclxuICBraW5kPzogc3RyaW5nLFxyXG4gIGlzQmFzaWM/OiBib29sZWFuLFxyXG4gIHZhbHVlcz86IG51bWJlcltdXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcclxuICBfZWxlbUlkOiBzdHJpbmc7XHJcbiAgX29wdGlvbnM6IG9wdGlvbnNUeXBlO1xyXG4gIGxpbmVFbGVtOiBIVE1MRWxlbWVudDtcclxuICB0aHVtYkVsZW06IEhUTUxFbGVtZW50O1xyXG4gIHZhbHVlRWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gX21pblZhbHVlOiBudW1iZXI7XHJcbiAgLy8gX21heFZhbHVlOiBudW1iZXI7XHJcbiAgLy8gX3N0ZXBWYWx1ZTogbnVtYmVyO1xyXG4gIC8vIF92YWx1ZXM6IG51bWJlcltdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihlbGVtSWQ6IHN0cmluZywgb3B0aW9uczogb3B0aW9uc1R5cGUpIHtcclxuICAgIHRoaXMuX2VsZW1JZCA9IGVsZW1JZC5zbGljZSgxKTtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgLy8gdGhpcy5fbWluVmFsdWUgPVxyXG4gIH07XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLmxpbmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fZWxlbUlkKTtcclxuICAgIHRoaXMudGh1bWJFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICB0aGlzLnZhbHVlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gIH1cclxuXHJcbiAgc2hvd1NsaWRlckxpbmUoKSB7XHJcbiAgICB0aGlzLmxpbmVFbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1ib2R5Jyk7XHJcbiAgfVxyXG5cclxuICBzaG93U2xpZGVyVGh1bWIoKSB7XHJcbiAgICB0aGlzLnRodW1iRWxlbS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItdGh1bWInKTtcclxuICAgIHRoaXMubGluZUVsZW0uYXBwZW5kKHRoaXMudGh1bWJFbGVtKTtcclxuICAgIHRoaXMudGh1bWJFbGVtLnN0eWxlLmxlZnQgPSBgJHsodGhpcy5fb3B0aW9ucy52YWx1ZXNbMF0gLSB0aGlzLl9vcHRpb25zLm1pbikgKiB0aGlzLmxpbmVFbGVtLm9mZnNldFdpZHRoIC8gKHRoaXMuX29wdGlvbnMubWF4IC0gdGhpcy5fb3B0aW9ucy5taW4pIC0gdGhpcy50aHVtYkVsZW0ub2Zmc2V0V2lkdGggLyAyfXB4YDtcclxuICB9XHJcblxyXG4gIHNob3dTbGlkZXJWYWx1ZSgpIHtcclxuICAgIHRoaXMudmFsdWVFbGVtLmNsYXNzTGlzdC5hZGQoJ3RpcC12YWx1ZScpO1xyXG4gICAgdGhpcy5saW5lRWxlbS5hcHBlbmQodGhpcy52YWx1ZUVsZW0pO1xyXG4gICAgdGhpcy52YWx1ZUVsZW0udGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKCh0aGlzLnRodW1iRWxlbS5vZmZzZXRMZWZ0ICsgdGhpcy50aHVtYkVsZW0ub2Zmc2V0V2lkdGggLyAyIC0gdGhpcy5saW5lRWxlbS5vZmZzZXRMZWZ0KSAqICh0aGlzLl9vcHRpb25zLm1heCAtIHRoaXMuX29wdGlvbnMubWluKSAvIHRoaXMubGluZUVsZW0ub2Zmc2V0V2lkdGggKyB0aGlzLl9vcHRpb25zLm1pbil9YDtcclxuICAgIHRoaXMudmFsdWVFbGVtLnN0eWxlLmxlZnQgPSBgJHsoTnVtYmVyKHRoaXMudmFsdWVFbGVtLnRleHRDb250ZW50KSAtIHRoaXMuX29wdGlvbnMubWluKSAqIHRoaXMubGluZUVsZW0ub2Zmc2V0V2lkdGggLyAodGhpcy5fb3B0aW9ucy5tYXggLSB0aGlzLl9vcHRpb25zLm1pbikgLSB0aGlzLnZhbHVlRWxlbS5vZmZzZXRXaWR0aCAvIDJ9cHhgO1xyXG4gIH1cclxuXHJcbiAgLy8gc2hvd1NsaWRlcigpIHtcclxuICAvLyAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSh0aGlzLl9zZWxlY3Rvcik7XHJcbiAgLy8gICB0aGlzLnNsaWRlckxpbmVDbGFzcyA9IHNsaWRlckJvZHkuaW5pdCgpO1xyXG4gIC8vICAgLy8gdGhpcy5zbGlkZXJMaW5lRWxlbSA9IHNsaWRlckJvZHkuaW5pdCgpLmVsZW1TbGlkZXJMaW5lO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5fdmFsdWVzKTtcclxuICAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX29wdGlvbnMudmFsdWVzKTtcclxuICAvLyAgIC8vIGNvbnN0IHNsaWRlclRodW1iOiBTbGlkZXJUaHVtYiA9IG5ldyBTbGlkZXJUaHVtYihgJHt0aGlzLl9zZWxlY3Rvcn0gPiAjJHt0aGlzLnNsaWRlckxpbmVJZH1gLCB0aGlzLl92YWx1ZXMpO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5zbGlkZXJMaW5lRWxlbSk7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhgJHt0aGlzLl9zZWxlY3Rvcn0gPiAuJHt0aGlzLnNsaWRlckxpbmVDbGFzc31gKTtcclxuICAvLyAgIGNvbnN0IHNsaWRlclRodW1iOiBTbGlkZXJUaHVtYiA9IG5ldyBTbGlkZXJUaHVtYihgJHt0aGlzLl9zZWxlY3Rvcn0gPiAuJHt0aGlzLnNsaWRlckxpbmVDbGFzc31gLCB0aGlzLl9vcHRpb25zKTtcclxuICAvLyAgIHNsaWRlclRodW1iLmluaXQoKTtcclxuICAvLyAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZShgJHt0aGlzLl9zZWxlY3Rvcn0gPiAuJHt0aGlzLnNsaWRlckxpbmVDbGFzc31gKTtcclxuICAvLyAgIHRpcFZhbHVlLmluaXQoKTtcclxuICAvLyB9XHJcblxyXG4gIC8vIHNob3dTY2FsZShtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIHN0ZXA6IG51bWJlcikge1xyXG4gIC8vICAgdGhpcy5fbWluVmFsdWUgPSBtaW47XHJcbiAgLy8gICB0aGlzLl9tYXhWYWx1ZSA9IG1heDtcclxuICAvLyAgIHRoaXMuX3N0ZXBWYWx1ZSA9IHN0ZXA7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgLy8gICBjb25zdCBzY2FsZTogU2NhbGUgPSBuZXcgU2NhbGUodGhpcy5fc2VsZWN0b3IsIHRoaXMuX21pblZhbHVlLCB0aGlzLl9tYXhWYWx1ZSwgdGhpcy5fc3RlcFZhbHVlKTtcclxuICAvLyAgIHNjYWxlLmluaXQoKTtcclxuICAvLyB9XHJcbn1cclxuIiwiLy8gaW1wb3J0IHsgU3ViamVjdCwgQ29uY3JldGVTdWJqZWN0IH0gZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgU3ViamVjdCBmcm9tICcuL2FwcCc7XHJcbi8vIGltcG9ydCBTbGlkZXJCb2R5IGZyb20gJy4vc2xpZGVyQm9keSc7XHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJztcclxuaW1wb3J0IFZpZXcgZnJvbSAnLi92aWV3JztcclxuXHJcbnR5cGUgb3B0aW9uc1R5cGUgPSB7XHJcbiAgbWluPzogbnVtYmVyLFxyXG4gIG1heD86IG51bWJlcixcclxuICBzdGVwPzogbnVtYmVyLFxyXG4gIGtpbmQ/OiBzdHJpbmcsXHJcbiAgaXNCYXNpYz86IGJvb2xlYW4sXHJcbiAgdmFsdWVzPzogbnVtYmVyW11cclxufTtcclxuXHJcbi8qKlxyXG4qINCY0L3RgtC10YDRhNC10LnRgSDQndCw0LHQu9GO0LTQsNGC0LXQu9GPINC+0LHRitGP0LLQu9GP0LXRgiDQvNC10YLQvtC0INGD0LLQtdC00L7QvNC70LXQvdC40Y8sINC60L7RgtC+0YDRi9C5INC40LfQtNCw0YLQtdC70LhcclxuKiDQuNGB0L/QvtC70YzQt9GD0Y7RgiDQtNC70Y8g0L7Qv9C+0LLQtdGJ0LXQvdC40Y8g0YHQstC+0LjRhSDQv9C+0LTQv9C40YHRh9C40LrQvtCyLlxyXG4qL1xyXG5pbnRlcmZhY2UgT2JzZXJ2ZXIge1xyXG4gIC8vINCf0L7Qu9GD0YfQuNGC0Ywg0L7QsdC90L7QstC70LXQvdC40LUg0L7RgiDRgdGD0LHRitC10LrRgtCwLlxyXG4gIGNvbW11bmljYXRlKHN1YmplY3Q6IFN1YmplY3QpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuKiDQmtC+0L3QutGA0LXRgtC90YvQtSDQndCw0LHQu9GO0LTQsNGC0LXQu9C4INGA0LXQsNCz0LjRgNGD0Y7RgiDQvdCwINC+0LHQvdC+0LLQu9C10L3QuNGPLCDQstGL0L/Rg9GJ0LXQvdC90YvQtSDQmNC30LTQsNGC0LXQu9C10LwsINC6XHJcbiog0LrQvtGC0L7RgNC+0LzRgyDQvtC90Lgg0L/RgNC40LrRgNC10L/Qu9C10L3Riy5cclxuKi9cclxuLy8gY2xhc3MgQ29uY3JldGVPYnNlcnZlckEgaW1wbGVtZW50cyBPYnNlcnZlciB7XHJcbi8vICAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XHJcbi8vICAgICBpZiAoc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiBzdWJqZWN0LnN0YXRlIDwgMykge1xyXG4vLyAgICAgICBjb25zb2xlLmxvZygnQ29uY3JldGVPYnNlcnZlckE6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH1cclxuLy8gfVxyXG5cclxuY2xhc3MgUHJlc2VudGVyIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4gIC8vIG1vZGVsT3B0aW9uczoge21pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgc3RlcDogbnVtYmVyfTtcclxuICBfc2VsZWN0b3I6IHN0cmluZztcclxuICBfb3B0aW9uczogb3B0aW9uc1R5cGU7XHJcblxyXG4gIC8vIGNvbnN0cnVjdG9yKHNlbGVjdG9yPzogc3RyaW5nLCBvcHRpb25zPzogb3B0aW9uc1R5cGUpIHtcclxuICAvLyAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgLy8gICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAvLyB9XHJcblxyXG4gIC8vIHNldERhdGFUb01vZGVsKCkge1xyXG4gIC8vICAgY29uc3QgbW9kZWw6IE1vZGVsID0gbmV3IE1vZGVsKCk7XHJcbiAgLy8gICBtb2RlbC5nZXREYXRhKCk7XHJcbiAgLy8gfVxyXG5cclxuICAvLyB0cmFuc2Zlck1vZGVsRGF0YShtb2RlbDogTW9kZWwsIHZpZXc6IFZpZXcpIHtcclxuICAvLyAgIHRoaXMubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcclxuICAvLyAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWxPcHRpb25zKTtcclxuICAvLyAgIHZpZXcuc2hvd1NjYWxlKHRoaXMubW9kZWxPcHRpb25zLm1pbiwgdGhpcy5tb2RlbE9wdGlvbnMubWF4LCB0aGlzLm1vZGVsT3B0aW9ucy5zdGVwKTtcclxuICAvLyAgIC8vIGNvbnNvbGUubG9nKCdNb2RlbE9ic2VydmVyOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuICAvLyAgIC8vIGlmIChtb2RlbCBpbnN0YW5jZW9mIE1vZGVsKSB7XHJcbiAgLy8gICAvLyAgIHRoaXMubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcclxuICAvLyAgIC8vICAgY29uc29sZS5sb2codGhpcy5tb2RlbE9wdGlvbnMpO1xyXG4gIC8vICAgICAvLyBjb25zdCB2aWV3ID0gbmV3IFZpZXcoKTtcclxuICAvLyAgICAgLy8gdmlldy5zaG93U2NhbGUodGhpcy5tb2RlbE9wdGlvbnMubWluLCB0aGlzLm1vZGVsT3B0aW9ucy5tYXgsIHRoaXMubW9kZWxPcHRpb25zLnN0ZXApO1xyXG4gIC8vICAgICAvLyBjb25zb2xlLmxvZygnTW9kZWxPYnNlcnZlcjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XHJcbiAgLy8gICAvLyB9XHJcbiAgLy8gfVxyXG5cclxuICAvLyB0cmFuc2ZlcigpIHtcclxuICAvLyAgIGNvbnN0IHZpZXc6IFZpZXcgPSBuZXcgVmlldygpO1xyXG4gICAgLy8gcmV0dXJuIHZpZXcuZ2V0V2lkdGhTbGlkZXIoKTtcclxuICAvLyB9XHJcblxyXG4gIGNvbW11bmljYXRlKG1vZGVsOiBNb2RlbCkge1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBtb2RlbC5fc2VsZWN0b3I7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gbW9kZWwuZ2V0RGF0YSgpO1xyXG4gICAgY29uc3QgdmlldzogVmlldyA9IG5ldyBWaWV3KHRoaXMuX3NlbGVjdG9yLCB0aGlzLl9vcHRpb25zKTtcclxuICAgIHZpZXcuaW5pdCgpO1xyXG4gICAgdmlldy5zaG93U2xpZGVyTGluZSgpO1xyXG4gICAgdmlldy5zaG93U2xpZGVyVGh1bWIoKTtcclxuICAgIHZpZXcuc2hvd1NsaWRlclZhbHVlKCk7XHJcbiAgICBjb25zb2xlLmxvZygnTW9kZWxPYnNlcnZlcjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XHJcbiAgICAvLyBpZiAobW9kZWwgaW5zdGFuY2VvZiBNb2RlbCkge1xyXG4gICAgLy8gICB0aGlzLm1vZGVsT3B0aW9ucyA9IG1vZGVsLmNhbGNVbml0KCk7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWxPcHRpb25zKTtcclxuICAgIC8vICAgY29uc3QgdmlldyA9IG5ldyBWaWV3KCk7XHJcbiAgICAvLyAgIHZpZXcuc2hvd1NjYWxlKHRoaXMubW9kZWxPcHRpb25zLm1pbiwgdGhpcy5tb2RlbE9wdGlvbnMubWF4LCB0aGlzLm1vZGVsT3B0aW9ucy5zdGVwKTtcclxuICAgIC8vICAgY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgLy8gZ2V0U2xpZGVyRGF0YSgpIHtcclxuICAvLyAgIHJldHVybiB7XHJcbiAgLy8gICAgIHNlbGVjdG9yOiB0aGlzLl9zZWxlY3RvcixcclxuICAvLyAgICAgb3B0aW9uczogdGhpcy5fb3B0aW9uc1xyXG4gIC8vICAgfTtcclxuICAvLyB9XHJcbn1cclxuXHJcbi8vIGNsYXNzIFZpZXdPYnNlcnZlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuLy8gICB1cGRhdGUodmlldykge1xyXG5cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGNsYXNzIENvbmNyZXRlT2JzZXJ2ZXJCIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4vLyAgIGlzU3ViamVjdFNhdGlzZmllcyhzdWJqZWN0KSB7XHJcbi8vICAgICByZXR1cm4gc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiAoc3ViamVjdC5zdGF0ZSA9PT0gMCB8fCBzdWJqZWN0LnN0YXRlID49IDIpO1xyXG4vLyAgIH1cclxuXHJcbi8vICAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XHJcbi8vICAgICBpZiAodGhpcy5pc1N1YmplY3RTYXRpc2ZpZXMoc3ViamVjdCkpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coJ0NvbmNyZXRlT2JzZXJ2ZXJCOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGV4cG9ydCB7IE9ic2VydmVyLCBDb25jcmV0ZU9ic2VydmVyQSwgQ29uY3JldGVPYnNlcnZlckIsIFByZXNlbnRlciB9O1xyXG5leHBvcnQgeyBPYnNlcnZlciwgUHJlc2VudGVyIH07XHJcbiIsIi8vIGltcG9ydCB7IFN1YmplY3QgfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCBTdWJqZWN0IGZyb20gJy4vYXBwJztcclxuaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XHJcblxyXG50eXBlIG9wdGlvbnMgPSB7XHJcbiAgbWluPzogbnVtYmVyO1xyXG4gIG1heD86IG51bWJlcjtcclxuICBzdGVwPzogbnVtYmVyO1xyXG4gIGtpbmQ/OiBzdHJpbmc7XHJcbiAgaXNCYXNpYz86IGJvb2xlYW47XHJcbiAgdmFsdWVzPzogbnVtYmVyW107XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RlbCBpbXBsZW1lbnRzIFN1YmplY3Qge1xyXG4gIHByaXZhdGUgX21pbjogbnVtYmVyO1xyXG4gIHByaXZhdGUgX21heDogbnVtYmVyO1xyXG4gIHByaXZhdGUgX3N0ZXA6IG51bWJlcjtcclxuICBwcml2YXRlIF9raW5kOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfaXNCYXNpYzogYm9vbGVhbjtcclxuICBwcml2YXRlIF92YWx1ZXM6IG51bWJlcltdO1xyXG4gIF9zZWxlY3Rvcjogc3RyaW5nO1xyXG5cclxuICAvLyBjb25zdHJ1Y3RvcihvcHRpb25zPzogb3B0aW9ucykge1xyXG4gIC8vICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge31cclxuICAvLyAgIHRoaXMuX21pbiA9IG9wdGlvbnMubWluID8gb3B0aW9ucy5taW4gOiAwO1xyXG4gIC8vICAgdGhpcy5fbWF4ID0gb3B0aW9ucy5tYXggPyBvcHRpb25zLm1heCA6IDMwMDtcclxuICAvLyAgIHRoaXMuX3N0ZXAgPSBvcHRpb25zLnN0ZXAgPyBvcHRpb25zLnN0ZXAgOiA1MDtcclxuICAvLyAgIHRoaXMuX2tpbmQgPSBvcHRpb25zLmtpbmQgPyBvcHRpb25zLmtpbmQgOiAnaG9yaXpvbnRhbCc7XHJcbiAgLy8gICB0aGlzLl9pc0Jhc2ljID0gb3B0aW9ucy5pc0Jhc2ljID8gb3B0aW9ucy5pc0Jhc2ljIDogdHJ1ZTtcclxuICAgIC8vIHRoaXMubm90aWZ5KCk7XHJcbiAgLy8gfVxyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7T2JzZXJ2ZXJbXX0g0KHQv9C40YHQvtC6INC/0L7QtNC/0LjRgdGH0LjQutC+0LIuINCSINGA0LXQsNC70YzQvdC+0Lkg0LbQuNC30L3QuCDRgdC/0LjRgdC+0LpcclxuICAgKiDQv9C+0LTQv9C40YHRh9C40LrQvtCyINC80L7QttC10YIg0YXRgNCw0L3QuNGC0YzRgdGPINCyINCx0L7Qu9C10LUg0L/QvtC00YDQvtCx0L3QvtC8INCy0LjQtNC1ICjQutC70LDRgdGB0LjRhNC40YbQuNGA0YPQtdGC0YHRjyDQv9C+XHJcbiAgICog0YLQuNC/0YMg0YHQvtCx0YvRgtC40Y8g0Lgg0YIu0LQuKVxyXG4gICAqL1xyXG4gIHByaXZhdGUgb2JzZXJ2ZXJzOiBPYnNlcnZlcltdID0gW107XHJcblxyXG4gIC8qKlxyXG4gICAqINCc0LXRgtC+0LTRiyDRg9C/0YDQsNCy0LvQtdC90LjRjyDQv9C+0LTQv9C40YHQutC+0LkuXHJcbiAgICovXHJcbiAgcHVibGljIGF0dGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IGlzRXhpc3QgPSB0aGlzLm9ic2VydmVycy5pbmNsdWRlcyhvYnNlcnZlcik7XHJcbiAgICBpZiAoaXNFeGlzdCkge1xyXG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ01vZGVsOiBQcmVzZW50ZXIgaGFzIGJlZW4gYXR0YWNoZWQgYWxyZWFkeS4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnTW9kZWw6IEF0dGFjaGVkIGEgcHJlc2VudGVyLicpO1xyXG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGV0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJJbmRleCA9IHRoaXMub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xyXG4gICAgaWYgKG9ic2VydmVySW5kZXggPT09IC0xKSB7XHJcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZygnU3ViamVjdDogTm9uZXhpc3RlbnQgb2JzZXJ2ZXIuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vYnNlcnZlcnMuc3BsaWNlKG9ic2VydmVySW5kZXgsIDEpO1xyXG4gICAgY29uc29sZS5sb2coJ1N1YmplY3Q6IERldGFjaGVkIGFuIG9ic2VydmVyLicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog0JfQsNC/0YPRgdC6INC+0LHQvdC+0LLQu9C10L3QuNGPINCyINC60LDQttC00L7QvCDQv9C+0LTQv9C40YHRh9C40LrQtS5cclxuICAgKi9cclxuICBwdWJsaWMgbm90aWZ5KCk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coJ01vZGVsOiBOb3RpZnlpbmcgb2JzZXJ2ZXJzLi4uJyk7XHJcbiAgICBmb3IgKGNvbnN0IG9ic2VydmVyIG9mIHRoaXMub2JzZXJ2ZXJzKSB7XHJcbiAgICAgIG9ic2VydmVyLmNvbW11bmljYXRlKHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RGF0YShvcHRpb25zOiBvcHRpb25zLCBzZWxlY3Rvcjogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9taW4gPSBvcHRpb25zLm1pbjtcclxuICAgIHRoaXMuX21heCA9IG9wdGlvbnMubWF4O1xyXG4gICAgdGhpcy5fc3RlcCA9IG9wdGlvbnMuc3RlcDtcclxuICAgIHRoaXMuX2tpbmQgPSBvcHRpb25zLmtpbmQ7XHJcbiAgICB0aGlzLl9pc0Jhc2ljID0gb3B0aW9ucy5pc0Jhc2ljO1xyXG4gICAgdGhpcy5fdmFsdWVzID0gb3B0aW9ucy52YWx1ZXM7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgY29uc29sZS5sb2coYE1vZGVsOiBNeSBzdGF0ZSBoYXMganVzdCBjaGFuZ2VkYCk7XHJcbiAgICB0aGlzLm5vdGlmeSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGF0YSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1pbjogdGhpcy5fbWluLFxyXG4gICAgICBtYXg6IHRoaXMuX21heCxcclxuICAgICAgc3RlcDogdGhpcy5fc3RlcCxcclxuICAgICAga2luZDogdGhpcy5fa2luZCxcclxuICAgICAgaXNCYXNpYzogdGhpcy5faXNCYXNpYyxcclxuICAgICAgdmFsdWVzOiB0aGlzLl92YWx1ZXMsXHJcbiAgICAgIHNlbGVjdG9yOiB0aGlzLl9zZWxlY3RvclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gY2FsY1VuaXQoKSB7XHJcbiAgLy8gICBjb25zb2xlLmxvZyhgTW9kZWw6IE15IHN0YXRlIGhhcyBqdXN0IGNoYW5nZWRgKTtcclxuXHJcbiAgLy8gICByZXR1cm4ge1xyXG4gIC8vICAgICBtaW46IHRoaXMuX21pbixcclxuICAvLyAgICAgbWF4OiB0aGlzLl9tYXgsXHJcbiAgLy8gICAgIHN0ZXA6IHRoaXMuX3N0ZXBcclxuICAvLyAgIH07XHJcbiAgLy8gfVxyXG59XHJcbiIsIi8vIGltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XHJcbmltcG9ydCB7IFByZXNlbnRlciB9IGZyb20gJy4vcHJlc2VudGVyJztcclxuaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kZWwnO1xyXG5cclxudHlwZSBvcHRpb25zVHlwZSA9IHtcclxuICBtaW4/OiBudW1iZXIsXHJcbiAgbWF4PzogbnVtYmVyLFxyXG4gIHN0ZXA/OiBudW1iZXIsXHJcbiAga2luZD86IHN0cmluZyxcclxuICBpc0Jhc2ljPzogYm9vbGVhbixcclxuICB2YWx1ZXM/OiBudW1iZXJbXVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVyIHtcclxuICBfc2VsZWN0b3I6IHN0cmluZztcclxuICBfb3B0aW9uczogb3B0aW9uc1R5cGU7XHJcblxyXG4gIF9taW46IG51bWJlcjtcclxuICBfbWF4OiBudW1iZXI7XHJcbiAgX3N0ZXA6IG51bWJlcjtcclxuICBfa2luZDogc3RyaW5nO1xyXG4gIF9pc0Jhc2ljOiBib29sZWFuO1xyXG4gIF92YWx1ZXM6IG51bWJlcltdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihlbGVtSWQ6IHN0cmluZywgb3B0aW9ucz86IG9wdGlvbnNUeXBlKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IGVsZW1JZDtcclxuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9XHJcbiAgICB0aGlzLl9taW4gPSBvcHRpb25zLm1pbiA/IG9wdGlvbnMubWluIDogMDtcclxuICAgIHRoaXMuX21heCA9IG9wdGlvbnMubWF4ID8gb3B0aW9ucy5tYXggOiAzMDA7XHJcbiAgICB0aGlzLl9zdGVwID0gb3B0aW9ucy5zdGVwID8gb3B0aW9ucy5zdGVwIDogNTc7XHJcbiAgICB0aGlzLl9raW5kID0gb3B0aW9ucy5raW5kID8gb3B0aW9ucy5raW5kIDogJ2hvcml6b250YWwnO1xyXG4gICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYyA/IG9wdGlvbnMuaXNCYXNpYyA6IHRydWU7XHJcbiAgICB0aGlzLl92YWx1ZXMgPSBvcHRpb25zLnZhbHVlcyA/IG9wdGlvbnMudmFsdWVzIDogW3RoaXMuX3N0ZXBdO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIGNvbnN0IG1vZGVsOiBNb2RlbCA9IG5ldyBNb2RlbCgpO1xyXG4gICAgY29uc3QgcHJlc2VudGVyID0gbmV3IFByZXNlbnRlcigpO1xyXG4gICAgbW9kZWwuYXR0YWNoKHByZXNlbnRlcik7XHJcbiAgICB0aGlzLnNldERhdGEoKTtcclxuICAgIG1vZGVsLnNldERhdGEodGhpcy5fb3B0aW9ucywgdGhpcy5fc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGF0YSgpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSB7XHJcbiAgICAgIG1pbjogdGhpcy5fbWluLFxyXG4gICAgICBtYXg6IHRoaXMuX21heCxcclxuICAgICAgc3RlcDogdGhpcy5fc3RlcCxcclxuICAgICAga2luZDogdGhpcy5fa2luZCxcclxuICAgICAgaXNCYXNpYzogdGhpcy5faXNCYXNpYyxcclxuICAgICAgdmFsdWVzOiB0aGlzLl92YWx1ZXNcclxuICAgIH07XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9vcHRpb25zKTtcclxuICAgIC8vIGlmICh0aGlzLl9pc0Jhc2ljKSB7XHJcblxyXG4gICAgLy8gfVxyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5fc2VsZWN0b3IpO1xyXG4gICAgLy8gY29uc3QgdmlldzogVmlldyA9IG5ldyBWaWV3KHRoaXMuX3NlbGVjdG9yLCB0aGlzLl9vcHRpb25zKTtcclxuICAgIC8vIHZpZXcuc2hvd1NsaWRlcigpO1xyXG5cclxuICAgIC8vIGNvbnN0IHByZXNlbnRlcjogUHJlc2VudGVyID0gbmV3IFByZXNlbnRlcih0aGlzLl9zZWxlY3RvciwgdGhpcy5fb3B0aW9ucyk7XHJcbiAgICAvLyBwcmVzZW50ZXIuc2V0RGF0YVRvTW9kZWwoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xyXG5pbXBvcnQgU2xpZGVyIGZyb20gJy4vbW9kdWxlcy9zbGlkZXInO1xyXG5cclxuLy8gaW1wb3J0IHNsaWRlclJ1biBmcm9tICcuL21vZHVsZXMvc2xpZGVyUnVuJztcclxuLy8gaW1wb3J0IFNjYWxlIGZyb20gJy4vbW9kdWxlcy9zY2FsZSc7XHJcbi8vIGltcG9ydCB7IENvbmNyZXRlU3ViamVjdCB9IGZyb20gJy4vbW9kdWxlcy9hcHAnO1xyXG4vLyBpbXBvcnQgVmlldyBmcm9tICcuL21vZHVsZXMvdmlldyc7XHJcbi8vIGltcG9ydCBNb2RlbCBmcm9tICcuL21vZHVsZXMvbW9kZWwnO1xyXG4vLyBpbXBvcnQgeyBDb25jcmV0ZU9ic2VydmVyQSwgQ29uY3JldGVPYnNlcnZlckIsIFByZXNlbnRlciB9IGZyb20gJy4vbW9kdWxlcy9wcmVzZW50ZXInO1xyXG4vLyBpbXBvcnQgeyBQcmVzZW50ZXIgfSBmcm9tICcuL21vZHVsZXMvcHJlc2VudGVyJztcclxuXHJcbmNvbnN0IHNsaWRlcjE6IFNsaWRlciA9IG5ldyBTbGlkZXIoJyNzbGlkZXIxJyk7XHJcbnNsaWRlcjEuaW5pdCgpO1xyXG5cclxuY29uc3Qgc2xpZGVyMjogU2xpZGVyID0gbmV3IFNsaWRlcignI3NsaWRlcjInLCB7bWluOiA0MCwgc3RlcDogNjAsIG1heDogMjQ1fSk7XHJcbnNsaWRlcjIuaW5pdCgpO1xyXG5cclxuY29uc3Qgc2xpZGVyMzogU2xpZGVyID0gbmV3IFNsaWRlcignI3NsaWRlcjMnLCB7dmFsdWVzOiBbMzAwXX0pO1xyXG5zbGlkZXIzLmluaXQoKTtcclxuXHJcbi8vIGNvbnN0IHZpZXc6IFZpZXcgPSBuZXcgVmlldygncmFuZ2Utc2xpZGVyJyk7XHJcbi8vIHZpZXcuc2hvd1NsaWRlcigpO1xyXG5cclxuXHJcbi8vIGNvbnN0IHNsaWRlcjI6IFZpZXcgPSBuZXcgVmlldygpO1xyXG4vLyBzbGlkZXIyLmhpZGUoKTtcclxuLy8gY29uc3Qgc2xpZGVyMzogVmlldyA9IG5ldyBWaWV3KCcnKTtcclxuLy8gc2xpZGVyMy5oaWRlKCk7XHJcblxyXG4vLyBjb25zdCBtb2RlbCA9IG5ldyBNb2RlbCh7XHJcbi8vICAgbWluOiA0MCxcclxuLy8gICBzdGVwOiA2MCxcclxuLy8gICBtYXg6IDI2MFxyXG4vLyB9KTtcclxuXHJcbi8vIGNvbnN0IHByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIoKTtcclxuLy8gbW9kZWwuYXR0YWNoKHByZXNlbnRlcik7XHJcblxyXG4vLyBwcmVzZW50ZXIubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcclxuLy8gcHJlc2VudGVyLnRyYW5zZmVyTW9kZWxEYXRhKG1vZGVsLCB2aWV3KTtcclxuLy8gbW9kZWwuY2FsY1VuaXQoKTtcclxuXHJcbi8vIHZpZXcuc2hvd1NsaWRlcigpO1xyXG5cclxuLy8gY29uc3Qgc2NhbGU6IFNjYWxlID0gbmV3IFNjYWxlKCk7XHJcbi8vIHNjYWxlLmluaXQoKTtcclxuXHJcbi8vIHNsaWRlclJ1bigpO1xyXG5cclxuLy8gY29uc3QgdmlldzI6IFZpZXcgPSBuZXcgVmlldygnc2xpZGVyMicpO1xyXG4vLyB2aWV3Mi5zaG93U2xpZGVyKCk7XHJcblxyXG4vKipcclxuKiDQmtC70LjQtdC90YLRgdC60LjQuSDQutC+0LQuXHJcbiovXHJcblxyXG4vLyBjb25zdCBzdWJqZWN0ID0gbmV3IENvbmNyZXRlU3ViamVjdCgpO1xyXG5cclxuLy8gY29uc3Qgb2JzZXJ2ZXIxID0gbmV3IENvbmNyZXRlT2JzZXJ2ZXJBKCk7XHJcbi8vIHN1YmplY3QuYXR0YWNoKG9ic2VydmVyMSk7XHJcblxyXG4vLyBjb25zdCBvYnNlcnZlcjIgPSBuZXcgQ29uY3JldGVPYnNlcnZlckIoKTtcclxuLy8gc3ViamVjdC5hdHRhY2gob2JzZXJ2ZXIyKTtcclxuXHJcbi8vIHN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuLy8gc3ViamVjdC5zb21lQnVzaW5lc3NMb2dpYygpO1xyXG5cclxuLy8gc3ViamVjdC5kZXRhY2gob2JzZXJ2ZXIyKTtcclxuXHJcbi8vIHN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuXHJcbi8vIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcclxuXHJcbi8vIGNvbnN0IHRvbTogVXNlciA9IG5ldyBVc2VyKCfQotC+0LwnLCAyOSk7XHJcbi8vIGVsLmlubmVySFRNTCA9IGDQmNC80Y86ICR7dG9tLm5hbWV9INCy0L7Qt9GA0LDRgdGCOiAke3RvbS5hZ2V9YDtcclxuXHJcbi8qIGNvbnN0IE1WUCA9IHtcclxuICBtYWtlT2JzZXJ2YWJsZVN1YmplY3QoKSB7XHJcbiAgICBjb25zdCBvYnNlcnZlcnMgPSBbXTtcclxuICAgIGNvbnN0IGFkZE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgaWYgKHR5cGVvZiBvICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIGlmIChvYnNlcnZlciA9PT0gbykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBhbHJlYWR5IGluIHRoZSBsaXN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIG9ic2VydmVycy5wdXNoKG8pO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbW92ZU9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IG8pIHtcclxuICAgICAgICAgIG9ic2VydmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGZpbmQgb2JzZXJ2ZXIgaW4gbGlzdCBvZiBvYnNlcnZlcnMnKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBub3RpZnlPYnNlcnZlcnMgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAvLyBNYWtlIGEgY29weSBvZiBvYnNlcnZlciBsaXN0IGluIGNhc2UgdGhlIGxpc3RcclxuICAgICAgLy8gaXMgbXV0YXRlZCBkdXJpbmcgdGhlIG5vdGlmaWNhdGlvbnMuXHJcbiAgICAgIGNvbnN0IG9ic2VydmVyc1NuYXBzaG90ID0gb2JzZXJ2ZXJzLnNsaWNlKDApO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVyc1NuYXBzaG90Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgb2JzZXJ2ZXJzU25hcHNob3RbaV0oZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhZGRPYnNlcnZlcixcclxuICAgICAgcmVtb3ZlT2JzZXJ2ZXIsXHJcbiAgICAgIG5vdGlmeU9ic2VydmVycyxcclxuICAgICAgbm90aWZ5OiBub3RpZnlPYnNlcnZlcnMsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIE1vZGVsKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAvLyBjb25zdCBpdGVtcyA9IFtdO1xyXG4gICAgdGhpcy5vcHRpb25zID0gIW9wdGlvbnMgPyB7fSA6IG9wdGlvbnM7XHJcbiAgICB0aGlzLm1vZGVsQ2hhbmdlZFN1YmplY3QgPSBNVlAubWFrZU9ic2VydmFibGVTdWJqZWN0KCk7XHJcbiAgICB0aGlzLm1pblZhbHVlID0gMDtcclxuICAgIHRoaXMubWF4VmFsdWUgPSAzMDA7XHJcbiAgICB0aGlzLnN0ZXAgPSA1MDtcclxuICAgIHRoaXMubW9kZSA9ICdob3Jpem9udGFsJztcclxuICAgIHRoaXMudHlwZSA9ICdzaW5nbGUnO1xyXG4gICAgLy8gdGhpcy5hZGRJdGVtID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAvLyAgIGlmICghdmFsdWUpIHtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaXRlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnJlbW92ZUN1cnJlbnRJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBpZiAodGhhdC5zZWxlY3RlZEluZGV4ID09PSAtMSkge1xyXG4gICAgLy8gICAgIHJldHVybjtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpdGVtcy5zcGxpY2UodGhhdC5zZWxlY3RlZEluZGV4LCAxKTtcclxuICAgIC8vICAgdGhhdC5tb2RlbENoYW5nZWRTdWJqZWN0Lm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHJldHVybiBpdGVtcztcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgIC8vIHRoaXMuZ2V0U2VsZWN0ZWRJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgcmV0dXJuIHRoYXQuc2VsZWN0ZWRJbmRleDtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnNldFNlbGVjdGVkSW5kZXggPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIC8vICAgdGhhdC5zZWxlY3RlZEluZGV4ID0gdmFsdWU7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgfSxcclxuXHJcbiAgVmlldygpIHtcclxuICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAgICAgc2xpZGVyQm9keS5pbml0KCk7XHJcblxyXG4gICAgICBjb25zdCBzbGlkZXJUaHVtYjogU2xpZGVyVGh1bWIgPSBuZXcgU2xpZGVyVGh1bWIoKTtcclxuICAgICAgc2xpZGVyVGh1bWIuaW5pdCgpO1xyXG5cclxuICAgICAgY29uc3QgdGlwVmFsdWU6IFRpcFZhbHVlID0gbmV3IFRpcFZhbHVlKCk7XHJcbiAgICAgIHRpcFZhbHVlLmluaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhhdC5zZWxlY3QgPSAkKCc8c2VsZWN0Lz4nKS5hcHBlbmRUbyhyb290T2JqZWN0KTtcclxuICAgIC8vIHRoYXQuc2VsZWN0LmF0dHIoJ3NpemUnLCAnNCcpO1xyXG4gICAgLy8gdGhhdC5idXR0b25BZGQgPSAkKCc8YnV0dG9uPis8L2J1dHRvbj4nKS5hcHBlbmRUbyhyb290T2JqZWN0KS5oZWlnaHQoMjApO1xyXG4gICAgLy8gdGhhdC5idXR0b25SZW1vdmUgPSAkKCc8YnV0dG9uPi08L2J1dHRvbj4nKS5hcHBlbmRUbyhyb290T2JqZWN0KS5oZWlnaHQoMjApO1xyXG4gICAgLy8gbW9kZWwubW9kZWxDaGFuZ2VkU3ViamVjdC5hZGRPYnNlcnZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHZhciBpdGVtcyA9IG1vZGVsLmdldEl0ZW1zKCk7XHJcbiAgICAvLyAgIHZhciBpbm5lckhUTUwgPSAnJztcclxuICAgIC8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgLy8gICAgIGlubmVySFRNTCArPSBcIjxvcHRpb24+XCIgKyBpdGVtc1tpXSArIFwiPC9vcHRpb24+XCI7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgdGhhdC5zZWxlY3QuaHRtbChpbm5lckhUTUwpO1xyXG4gICAgLy8gfSk7XHJcbiAgfSxcclxuXHJcbiAgQ29udHJvbGxlcihtb2RlbCwgdmlldykge1xyXG4gICAgdmlldy5pbml0KCk7XHJcbiAgICAvLyB2aWV3LmJ1dHRvbkFkZC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwuYWRkSXRlbShwcm9tcHQoJ2FkZHZhbHVlJykpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyB2aWV3LmJ1dHRvblJlbW92ZS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwucmVtb3ZlQ3VycmVudEl0ZW0oKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gdmlldy5zZWxlY3QuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLnNldFNlbGVjdGVkSW5kZXgodmlldy5zZWxlY3RbMF0uc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAvLyB9KTtcclxuICB9LFxyXG59OyAqL1xyXG5cclxuLyogJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBtb2RlbCA9IG5ldyBPTVZDLk1vZGVsKCk7XHJcbiAgdmFyIHZpZXcgPSBuZXcgT01WQy5WaWV3KG1vZGVsLCAkKCc8ZGl2Lz4nKS5hcHBlbmRUbygkKFwiYm9keVwiKSkpO1xyXG4gIHZhciBjb250cm9sbGVyID0gbmV3IE9NVkMuQ29udHJvbGxlcihtb2RlbCwgdmlldyk7XHJcbn0pOyAqL1xyXG5cclxuLy8gY29uc3QgbW9kZWwgPSBuZXcgTVZQLk1vZGVsKCk7XHJcbi8vIGNvbnN0IHZpZXcgPSBuZXcgTVZQLlZpZXcoKTtcclxuLy8gY29uc3QgY29udHJvbGxlciA9IG5ldyBNVlAuQ29udHJvbGxlcihtb2RlbCwgdmlldyk7XHJcblxyXG4vLyBjb250cm9sbGVyKCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=