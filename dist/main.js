!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist",s(s.s=3)}([function(e,t,s){var n=s(1),i=s(2);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};n(i,o);e.exports=i.locals||{}},function(e,t,s){"use strict";var n,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),r=[];function a(e){for(var t=-1,s=0;s<r.length;s++)if(r[s].identifier===e){t=s;break}return t}function l(e,t){for(var s={},n=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],c=s[l]||0,d="".concat(l," ").concat(c);s[l]=c+1;var u=a(d),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(r[u].references++,r[u].updater(h)):r.push({identifier:d,updater:b(h,t),references:1}),n.push(d)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=s.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,s,n){var i=s?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function m(e,t,s){var n=s.css,i=s.media,o=s.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,p=0;function b(e,t){var s,n,i;if(t.singleton){var o=p++;s=f||(f=c(t)),n=h.bind(null,s,o,!1),i=h.bind(null,s,o,!0)}else s=c(t),n=m.bind(null,s,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var s=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<s.length;n++){var i=a(s[n]);r[i].references--}for(var o=l(e,t),c=0;c<s.length;c++){var d=a(s[c]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}s=o}}}},function(e,t,s){},function(e,t,s){"use strict";s.r(t);s(0);var n=function(){const e=document.getElementById("slider-body"),t=document.getElementById("slider-thumb"),s=document.getElementById("tip-value"),n=t.offsetWidth/2;function i(i){let o=i.clientX-e.getBoundingClientRect().left-n;o<-n&&(o=-n);const r=e.offsetWidth-n;var a;o>r&&(o=r),t.style.left=o+"px",s.textContent=""+(o+n),s.style.left=o-(s.offsetWidth-t.offsetWidth)/2+"px",a=o+n,e.style.background=`linear-gradient(to right, red ${a}px, #e5e5e5 ${a}px)`}function o(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",i)}s.textContent=""+(Number(getComputedStyle(t).left.slice(0,-2))+n),t.addEventListener("mousedown",(function(e){e.preventDefault(),document.addEventListener("mousemove",i),document.addEventListener("mouseup",o)})),e.addEventListener("click",i),t.addEventListener("dragstart",(function(){return!1}))};class i{constructor(){this.observers=[]}attach(e){if(this.observers.includes(e))return console.log("Subject: Observer has been attached already.");console.log("Subject: Attached an observer."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Subject: Notifying observers...");for(const e of this.observers)e.update(this)}someBusinessLogic(){console.log("\nSubject: I'm doing something important."),this.state=Math.floor(11*Math.random()),console.log("Subject: My state has just changed to: "+this.state),this.notify()}}class o{constructor(e){this.sliderLine="slider-body",this._parentId=e}init(){return this.container=document.getElementById(this._parentId),this.bodySlider=document.createElement("DIV"),this.bodySlider.classList.add("slider-body"),this.bodySlider.setAttribute("id",this.sliderLine),this.container.append(this.bodySlider),this.sliderLine}destroy(){this.bodySlider.remove()}}class r{constructor(e){this._parentId=e}init(){this.container=document.getElementById(this._parentId),this.thumbSlider=document.createElement("DIV"),this.thumbSlider.classList.add("slider-thumb"),this.thumbSlider.setAttribute("id","slider-thumb"),this.container.append(this.thumbSlider)}destroy(){this.thumbSlider.remove()}}class a{constructor(e){this._parentId=e}init(){this.container=document.getElementById(this._parentId),this.tipValue=document.createElement("DIV"),this.tipValue.classList.add("tip-value"),this.tipValue.setAttribute("id","tip-value"),this.container.append(this.tipValue)}destroy(){this.tipValue.remove()}}class l{constructor(e,t,s,n){this._parentId=e,this._min=t,this._max=s,this._step=n,this.scale=document.createElement("DIV"),this.scale.classList.add("scale"),this.min=document.createElement("SPAN"),this.min.textContent=""+this._min,this.min.style.position="absolute",this.max=document.createElement("SPAN"),this.max.textContent=""+this._max,this.max.style.position="absolute"}init(){this.container=document.getElementById(this._parentId),this.container.append(this.scale),this.scale.append(this.min),this.scale.append(this.max),this.min.style.left=this.scale.offsetLeft-this.min.offsetWidth/2+"px",this.max.style.left=this.scale.offsetWidth+16+"px",this.mark=(this._max-this._min)/this._step,console.log(this.scale.offsetLeft),console.log(this.scale.offsetWidth),console.log(this.mark);for(let e=1;e<this.mark;e++)this.elem=document.createElement("SPAN"),this.elem.textContent=""+this._step*e,console.log(this.elem.textContent),this.elem.style.position="absolute",Number(this.elem.textContent)<100?this.elem.style.left=Number(this.elem.textContent)*this.scale.offsetWidth/this._max+20+"px":Number(this.elem.textContent)<1e3&&(this.elem.style.left=Number(this.elem.textContent)*this.scale.offsetWidth/this._max+16+"px"),this.max.insertAdjacentElement("beforebegin",this.elem)}destroy(){this.scale.remove()}}const c=new class{constructor(e){this._parentId=e}showSlider(){const e=new o(this._parentId);this.sliderLineId=e.init();new r(this.sliderLineId).init();new a(this.sliderLineId).init()}showScale(e,t,s){this._minValue=e,this._maxValue=t,this._stepValue=s;new l(this._parentId,this._minValue,this._maxValue,this._stepValue).init()}}("range-slider");c.showSlider();const d=new class{constructor(e){this.observers=[],e||(e={}),this._min=e.min?e.min:0,this._max=e.max?e.max:300,this._step=e.step?e.step:50,this._kind=e.kind?e.kind:"horizontal",this._isBasic=!e.isBasic||e.isBasic}attach(e){if(this.observers.includes(e))return console.log("Model: Presenter has been attached already.");console.log("Model: Attached a presenter."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Model: Notifying observers...");for(const e of this.observers)e.update(this)}calcUnit(){return console.log("Model: My state has just changed"),{min:this._min,max:this._max,step:this._step}}},u=new class{transferModelData(e,t){this.modelOptions=e.calcUnit(),console.log(this.modelOptions),t.showScale(this.modelOptions.min,this.modelOptions.max,this.modelOptions.step)}update(e){console.log("ModelObserver: Reacted to the event.")}};d.attach(u),u.transferModelData(d,c),n();const h=new i,m=new class{update(e){e instanceof i&&e.state<3&&console.log("ConcreteObserverA: Reacted to the event.")}};h.attach(m);const f=new class{isSubjectSatisfies(e){return e instanceof i&&(0===e.state||e.state>=2)}update(e){this.isSubjectSatisfies(e)&&console.log("ConcreteObserverB: Reacted to the event.")}};h.attach(f),h.someBusinessLogic(),h.someBusinessLogic(),h.detach(f),h.someBusinessLogic()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9zbGlkZXJCb2R5LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NsaWRlclRodW1iLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3RpcFZhbHVlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NjYWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL21vZGVsLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3ByZXNlbnRlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwic2xpZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aHVtYiIsInRpcCIsImRlbHRhIiwib2Zmc2V0V2lkdGgiLCJvbk1vdXNlTW92ZSIsImV2ZW50IiwidGh1bWJQb2ludCIsImNsaWVudFgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwicmlnaHRFZGdlIiwidGV4dENvbnRlbnQiLCJiYWNrZ3JvdW5kIiwib25Nb3VzZVVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIk51bWJlciIsImdldENvbXB1dGVkU3R5bGUiLCJzbGljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsIkNvbmNyZXRlU3ViamVjdCIsIm9ic2VydmVycyIsIm9ic2VydmVyIiwidGhpcyIsImluY2x1ZGVzIiwiY29uc29sZSIsImxvZyIsIm9ic2VydmVySW5kZXgiLCJpbmRleE9mIiwic3RhdGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJub3RpZnkiLCJTbGlkZXJCb2R5IiwicGFyZW50SWQiLCJzbGlkZXJMaW5lIiwiX3BhcmVudElkIiwiY29udGFpbmVyIiwiYm9keVNsaWRlciIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZCIsIlNsaWRlclRodW1iIiwidGh1bWJTbGlkZXIiLCJUaXBWYWx1ZSIsInRpcFZhbHVlIiwiU2NhbGUiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwic3RlcFZhbHVlIiwiX21pbiIsIl9tYXgiLCJfc3RlcCIsInNjYWxlIiwibWluIiwicG9zaXRpb24iLCJtYXgiLCJvZmZzZXRMZWZ0IiwibWFyayIsImVsZW0iLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJ2aWV3Iiwic2xpZGVyQm9keSIsInNsaWRlckxpbmVJZCIsImluaXQiLCJzdGVwIiwiX21pblZhbHVlIiwiX21heFZhbHVlIiwiX3N0ZXBWYWx1ZSIsInNob3dTbGlkZXIiLCJtb2RlbCIsIl9raW5kIiwia2luZCIsIl9pc0Jhc2ljIiwiaXNCYXNpYyIsInByZXNlbnRlciIsIm1vZGVsT3B0aW9ucyIsImNhbGNVbml0Iiwic2hvd1NjYWxlIiwiYXR0YWNoIiwidHJhbnNmZXJNb2RlbERhdGEiLCJvYnNlcnZlcjEiLCJzdWJqZWN0Iiwib2JzZXJ2ZXIyIiwiaXNTdWJqZWN0U2F0aXNmaWVzIiwic29tZUJ1c2luZXNzTG9naWMiLCJkZXRhY2giXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JB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QUFPRSxHQUVmLE1BQU1FLEVBQVksSUd3QmxCLE1BQ0UsbUJBQW1CRCxHQUNqQixPQUFPQSxhQUFtQi9ELElBQXNDLElBQWxCK0QsRUFBUXRELE9BQWVzRCxFQUFRdEQsT0FBUyxHQUdqRixPQUFPc0QsR0FDUjVELEtBQUs4RCxtQkFBbUJGLElBQzFCMUQsUUFBUUMsSUFBSSw4Q0g5QmxCLEVBQVFzRCxPQUFPSSxHQUVmLEVBQVFFLG9CQUNSLEVBQVFBLG9CQUVSLEVBQVFDLE9BQU9ILEdBRWYsRUFBUUUiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3RcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiZnVuY3Rpb24gc2xpZGVyUnVuKCkge1xuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLWJvZHknKTtcbiAgY29uc3QgdGh1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLXRodW1iJyk7XG4gIGNvbnN0IHRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXAtdmFsdWUnKTtcblxuICBjb25zdCBkZWx0YSA9IHRodW1iLm9mZnNldFdpZHRoIC8gMjtcbiAgdGlwLnRleHRDb250ZW50ID0gYCR7TnVtYmVyKGdldENvbXB1dGVkU3R5bGUodGh1bWIpLmxlZnQuc2xpY2UoMCwgLTIpKSArIGRlbHRhfWA7XG5cbiAgZnVuY3Rpb24gZmlsbFNsaWRlckxpbmUobGVuZ3RoKSB7XG4gICAgc2xpZGVyLnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZWQgJHtsZW5ndGh9cHgsICNlNWU1ZTUgJHtsZW5ndGh9cHgpYDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgbGV0IHRodW1iUG9pbnQgPSBldmVudC5jbGllbnRYIC0gc2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBkZWx0YTtcblxuICAgIC8vINC60YPRgNGB0L7RgCDQstGL0YjQtdC7INC40Lcg0YHQu9Cw0LnQtNC10YDQsCA9PiDQvtGB0YLQsNCy0LjRgtGMINCx0LXQs9GD0L3QvtC6INCyINC10LPQviDQs9GA0LDQvdC40YbQsNGFLlxuICAgIGlmICh0aHVtYlBvaW50IDwgLWRlbHRhKSB7XG4gICAgICB0aHVtYlBvaW50ID0gLWRlbHRhO1xuICAgIH1cbiAgICBjb25zdCByaWdodEVkZ2UgPSBzbGlkZXIub2Zmc2V0V2lkdGggLSBkZWx0YTtcbiAgICBpZiAodGh1bWJQb2ludCA+IHJpZ2h0RWRnZSkge1xuICAgICAgdGh1bWJQb2ludCA9IHJpZ2h0RWRnZTtcbiAgICB9XG5cbiAgICB0aHVtYi5zdHlsZS5sZWZ0ID0gYCR7dGh1bWJQb2ludH1weGA7XG4gICAgdGlwLnRleHRDb250ZW50ID0gYCR7dGh1bWJQb2ludCArIGRlbHRhfWA7XG4gICAgdGlwLnN0eWxlLmxlZnQgPSBgJHt0aHVtYlBvaW50IC0gKHRpcC5vZmZzZXRXaWR0aCAtIHRodW1iLm9mZnNldFdpZHRoKSAvIDJ9cHhgO1xuICAgIGZpbGxTbGlkZXJMaW5lKHRodW1iUG9pbnQgKyBkZWx0YSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdXNlVXAoKTogdm9pZCB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbk1vdXNlTW92ZSk7XG4gIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHJldHVybkZhbHNlKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc2xpZGVyUnVuO1xuIiwiaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XG5cbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLXN5bnRheCAqL1xuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5cbi8vIGNsYXNzIFVzZXIge1xuLy8gICBuYW1lOiBzdHJpbmc7XG4vLyAgIGFnZTogbnVtYmVyO1xuXG4vLyAgIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcsIF9hZ2U6IG51bWJlcikge1xuLy8gICAgIHRoaXMubmFtZSA9IF9uYW1lO1xuLy8gICAgIHRoaXMuYWdlID0gX2FnZTtcbi8vICAgfVxuLy8gfVxuXG4vLyBleHBvcnQgZGVmYXVsdCBVc2VyO1xuXG4vKipcbiAqINCY0L3RgtGE0LXRgNGE0LXQudGBINC40LfQtNCw0YLQtdC70Y8g0L7QsdGK0Y/QstC70Y/QtdGCINC90LDQsdC+0YAg0LzQtdGC0L7QtNC+0LIg0LTQu9GPINGD0L/RgNCw0LLQu9C10L3QuNGP0LzQuCDQv9C+0LTQv9C40YHRh9C40LrQsNC80LguXG4gKi9cbmludGVyZmFjZSBTdWJqZWN0IHtcbiAgLy8g0J/RgNC40YHQvtC10LTQuNC90Y/QtdGCINC90LDQsdC70Y7QtNCw0YLQtdC70Y8g0Log0LjQt9C00LDRgtC10LvRji5cbiAgYXR0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQ7XG5cbiAgLy8g0J7RgtGB0L7QtdC00LjQvdGP0LXRgiDQvdCw0LHQu9GO0LTQsNGC0LXQu9GPINC+0YIg0LjQt9C00LDRgtC10LvRjy5cbiAgZGV0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQ7XG5cbiAgLy8g0KPQstC10LTQvtC80LvRj9C10YIg0LLRgdC10YUg0L3QsNCx0LvRjtC00LDRgtC10LvQtdC5INC+INGB0L7QsdGL0YLQuNC4LlxuICBub3RpZnkoKTogdm9pZDtcbn1cblxuLyoqXG4qINCY0LfQtNCw0YLQtdC70Ywg0LLQu9Cw0LTQtdC10YIg0L3QtdC60L7RgtC+0YDRi9C8INCy0LDQttC90YvQvCDRgdC+0YHRgtC+0Y/QvdC40LXQvCDQuCDQvtC/0L7QstC10YnQsNC10YIg0L3QsNCx0LvRjtC00LDRgtC10LvQtdC5INC+INC10LPQvlxuKiDQuNC30LzQtdC90LXQvdC40Y/RhS5cbiovXG5jbGFzcyBDb25jcmV0ZVN1YmplY3QgaW1wbGVtZW50cyBTdWJqZWN0IHtcbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9INCU0LvRjyDRg9C00L7QsdGB0YLQstCwINCyINGN0YLQvtC5INC/0LXRgNC10LzQtdC90L3QvtC5INGF0YDQsNC90LjRgtGB0Y8g0YHQvtGB0YLQvtGP0L3QuNC1XG4gICAqINCY0LfQtNCw0YLQtdC70Y8sINC90LXQvtCx0YXQvtC00LjQvNC+0LUg0LLRgdC10Lwg0L/QvtC00L/QuNGB0YfQuNC60LDQvC5cbiAgICovXG4gIHB1YmxpYyBzdGF0ZTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7T2JzZXJ2ZXJbXX0g0KHQv9C40YHQvtC6INC/0L7QtNC/0LjRgdGH0LjQutC+0LIuINCSINGA0LXQsNC70YzQvdC+0Lkg0LbQuNC30L3QuCDRgdC/0LjRgdC+0LpcbiAgICog0L/QvtC00L/QuNGB0YfQuNC60L7QsiDQvNC+0LbQtdGCINGF0YDQsNC90LjRgtGM0YHRjyDQsiDQsdC+0LvQtdC1INC/0L7QtNGA0L7QsdC90L7QvCDQstC40LTQtSAo0LrQu9Cw0YHRgdC40YTQuNGG0LjRgNGD0LXRgtGB0Y8g0L/QvlxuICAgKiDRgtC40L/RgyDRgdC+0LHRi9GC0LjRjyDQuCDRgi7QtC4pXG4gICAqL1xuICBwcml2YXRlIG9ic2VydmVyczogT2JzZXJ2ZXJbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiDQnNC10YLQvtC00Ysg0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QvtC00L/QuNGB0LrQvtC5LlxuICAgKi9cbiAgcHVibGljIGF0dGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcbiAgICBjb25zdCBpc0V4aXN0ID0gdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpO1xuICAgIGlmIChpc0V4aXN0KSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ1N1YmplY3Q6IE9ic2VydmVyIGhhcyBiZWVuIGF0dGFjaGVkIGFscmVhZHkuJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N1YmplY3Q6IEF0dGFjaGVkIGFuIG9ic2VydmVyLicpO1xuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICB9XG5cbiAgcHVibGljIGRldGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcbiAgICBjb25zdCBvYnNlcnZlckluZGV4ID0gdGhpcy5vYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlcik7XG4gICAgaWYgKG9ic2VydmVySW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ1N1YmplY3Q6IE5vbmV4aXN0ZW50IG9ic2VydmVyLicpO1xuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShvYnNlcnZlckluZGV4LCAxKTtcbiAgICBjb25zb2xlLmxvZygnU3ViamVjdDogRGV0YWNoZWQgYW4gb2JzZXJ2ZXIuJyk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YPRgdC6INC+0LHQvdC+0LLQu9C10L3QuNGPINCyINC60LDQttC00L7QvCDQv9C+0LTQv9C40YHRh9C40LrQtS5cbiAgICovXG4gIHB1YmxpYyBub3RpZnkoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1N1YmplY3Q6IE5vdGlmeWluZyBvYnNlcnZlcnMuLi4nKTtcbiAgICBmb3IgKGNvbnN0IG9ic2VydmVyIG9mIHRoaXMub2JzZXJ2ZXJzKSB7XG4gICAgICBvYnNlcnZlci51cGRhdGUodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCe0LHRi9GH0L3QviDQu9C+0LPQuNC60LAg0L/QvtC00L/QuNGB0LrQuCDigJMg0YLQvtC70YzQutC+INGH0LDRgdGC0Ywg0YLQvtCz0L4sINGH0YLQviDQtNC10LvQsNC10YIg0JjQt9C00LDRgtC10LvRjC4g0JjQt9C00LDRgtC10LvQuFxuICAgKiDRh9Cw0YHRgtC+INGB0L7QtNC10YDQttCw0YIg0L3QtdC60L7RgtC+0YDRg9GOINCy0LDQttC90YPRjiDQsdC40LfQvdC10YEt0LvQvtCz0LjQutGDLCDQutC+0YLQvtGA0LDRjyDQt9Cw0L/Rg9GB0LrQsNC10YIg0LzQtdGC0L7QtFxuICAgKiDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINCy0YHRj9C60LjQuSDRgNCw0LcsINC60L7Qs9C00LAg0LTQvtC70LbQvdC+INC/0YDQvtC40LfQvtC50YLQuCDRh9GC0L4t0YLQviDQstCw0LbQvdC+0LUgKNC40LvQuCDQv9C+0YHQu9C1XG4gICAqINGN0YLQvtCz0L4pLlxuICAgKi9cbiAgcHVibGljIHNvbWVCdXNpbmVzc0xvZ2ljKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdcXG5TdWJqZWN0OiBJXFwnbSBkb2luZyBzb21ldGhpbmcgaW1wb3J0YW50LicpO1xuICAgIHRoaXMuc3RhdGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMTAgKyAxKSk7XG5cbiAgICBjb25zb2xlLmxvZyhgU3ViamVjdDogTXkgc3RhdGUgaGFzIGp1c3QgY2hhbmdlZCB0bzogJHt0aGlzLnN0YXRlfWApO1xuICAgIHRoaXMubm90aWZ5KCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgU3ViamVjdCwgQ29uY3JldGVTdWJqZWN0IH07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJCb2R5IHtcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgYm9keVNsaWRlcjogSFRNTEVsZW1lbnQ7XG4gIHNsaWRlckxpbmUgPSAnc2xpZGVyLWJvZHknO1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudElkKSB7XG4gICAgdGhpcy5fcGFyZW50SWQgPSBwYXJlbnRJZDtcbiAgfTtcblxuICBpbml0KCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fcGFyZW50SWQpO1xuICAgIHRoaXMuYm9keVNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHRoaXMuYm9keVNsaWRlci5jbGFzc0xpc3QuYWRkKCdzbGlkZXItYm9keScpO1xuICAgIHRoaXMuYm9keVNsaWRlci5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5zbGlkZXJMaW5lKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5ib2R5U2xpZGVyKTtcbiAgICByZXR1cm4gdGhpcy5zbGlkZXJMaW5lO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmJvZHlTbGlkZXIucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlclRodW1iIHtcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgdGh1bWJTbGlkZXI6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudElkKSB7XG4gICAgdGhpcy5fcGFyZW50SWQgPSBwYXJlbnRJZDtcbiAgfTtcblxuICBpbml0KCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fcGFyZW50SWQpO1xuICAgIHRoaXMudGh1bWJTbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICB0aGlzLnRodW1iU2xpZGVyLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci10aHVtYicpO1xuICAgIHRoaXMudGh1bWJTbGlkZXIuc2V0QXR0cmlidXRlKCdpZCcsICdzbGlkZXItdGh1bWInKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy50aHVtYlNsaWRlcik7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMudGh1bWJTbGlkZXIucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpcFZhbHVlIHtcclxuICBwcml2YXRlIF9wYXJlbnRJZDogc3RyaW5nO1xyXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgdGlwVmFsdWU6IEhUTUxFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJlbnRJZCkge1xyXG4gICAgdGhpcy5fcGFyZW50SWQgPSBwYXJlbnRJZDtcclxuICB9O1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgICB0aGlzLnRpcFZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICB0aGlzLnRpcFZhbHVlLmNsYXNzTGlzdC5hZGQoJ3RpcC12YWx1ZScpO1xyXG4gICAgdGhpcy50aXBWYWx1ZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpcC12YWx1ZScpO1xyXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMudGlwVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMudGlwVmFsdWUucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjYWxlIHtcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgLy8gY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhbmdlLXNsaWRlcicpO1xuICBfbWluOiBudW1iZXI7XG4gIF9tYXg6IG51bWJlcjtcbiAgX3N0ZXA6IG51bWJlcjtcbiAgbWFyazogbnVtYmVyO1xuXG4gIC8vIG1heFZhbHVlID0gMzAwO1xuICAvLyBzdGVwID0gNTA7XG4gIC8vIG1hcmsgPSAodGhpcy5fbWF4IC0gdGhpcy5fbWluKSAvIHRoaXMuX3N0ZXA7XG4gIHNjYWxlOiBIVE1MRWxlbWVudDtcbiAgbWluOiBIVE1MRWxlbWVudDtcbiAgbWF4OiBIVE1MRWxlbWVudDtcbiAgZWxlbTogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IocGFyZW50SWQ6IHN0cmluZywgbWluVmFsdWU6IG51bWJlciwgbWF4VmFsdWU6IG51bWJlciwgc3RlcFZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9wYXJlbnRJZCA9IHBhcmVudElkO1xuICAgIHRoaXMuX21pbiA9IG1pblZhbHVlO1xuICAgIHRoaXMuX21heCA9IG1heFZhbHVlO1xuICAgIHRoaXMuX3N0ZXAgPSBzdGVwVmFsdWU7XG4gICAgdGhpcy5zY2FsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHRoaXMuc2NhbGUuY2xhc3NMaXN0LmFkZCgnc2NhbGUnKTtcbiAgICB0aGlzLm1pbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcbiAgICB0aGlzLm1pbi50ZXh0Q29udGVudCA9IGAke3RoaXMuX21pbn1gO1xuICAgIHRoaXMubWluLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAvLyB0aGlzLm1pbi5zdHlsZS5sZWZ0ID0gJzI0cHgnO1xuICAgIHRoaXMubWF4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xuICAgIHRoaXMubWF4LnRleHRDb250ZW50ID0gYCR7dGhpcy5fbWF4fWA7XG4gICAgdGhpcy5tYXguc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIC8vIHRoaXMubWF4LnN0eWxlLmxlZnQgPSAnMzE2cHgnO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX3BhcmVudElkKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5zY2FsZSk7XG4gICAgdGhpcy5zY2FsZS5hcHBlbmQodGhpcy5taW4pO1xuICAgIHRoaXMuc2NhbGUuYXBwZW5kKHRoaXMubWF4KTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1pbi5vZmZzZXRXaWR0aCk7XG4gICAgdGhpcy5taW4uc3R5bGUubGVmdCA9IGAke3RoaXMuc2NhbGUub2Zmc2V0TGVmdCAtIHRoaXMubWluLm9mZnNldFdpZHRoIC8gMn1weGA7XG4gICAgdGhpcy5tYXguc3R5bGUubGVmdCA9IGAke3RoaXMuc2NhbGUub2Zmc2V0V2lkdGggKyAxNn1weGA7XG4gICAgdGhpcy5tYXJrID0gKHRoaXMuX21heCAtIHRoaXMuX21pbikgLyB0aGlzLl9zdGVwO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc2NhbGUub2Zmc2V0TGVmdCk7XG4gICAgY29uc29sZS5sb2codGhpcy5zY2FsZS5vZmZzZXRXaWR0aCk7XG4gICAgY29uc29sZS5sb2codGhpcy5tYXJrKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMubWFyazsgaSsrKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnbG9vcCBmb3InKTtcbiAgICAgIHRoaXMuZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcbiAgICAgIHRoaXMuZWxlbS50ZXh0Q29udGVudCA9IGAke3RoaXMuX3N0ZXAgKiBpfWA7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW0udGV4dENvbnRlbnQpO1xuICAgICAgdGhpcy5lbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgIGlmIChOdW1iZXIodGhpcy5lbGVtLnRleHRDb250ZW50KSA8IDEwMCkge1xuICAgICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IGAke051bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpICogdGhpcy5zY2FsZS5vZmZzZXRXaWR0aCAvIHRoaXMuX21heCArIDIwfXB4YDtcbiAgICAgIH0gZWxzZSBpZiAoTnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgPCAxMDAwKSB7XG4gICAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gYCR7TnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgKiB0aGlzLnNjYWxlLm9mZnNldFdpZHRoIC8gdGhpcy5fbWF4ICsgMTZ9cHhgO1xuICAgICAgfVxuICAgICAgdGhpcy5tYXguaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIHRoaXMuZWxlbSk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNjYWxlLnJlbW92ZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XHJcblxyXG5pbXBvcnQgc2xpZGVyUnVuIGZyb20gJy4vbW9kdWxlcy9zbGlkZXInO1xyXG4vLyBpbXBvcnQgU2NhbGUgZnJvbSAnLi9tb2R1bGVzL3NjYWxlJztcclxuaW1wb3J0IHsgQ29uY3JldGVTdWJqZWN0IH0gZnJvbSAnLi9tb2R1bGVzL2FwcCc7XHJcbmltcG9ydCBWaWV3IGZyb20gJy4vbW9kdWxlcy92aWV3JztcclxuaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kdWxlcy9tb2RlbCc7XHJcbmltcG9ydCB7IENvbmNyZXRlT2JzZXJ2ZXJBLCBDb25jcmV0ZU9ic2VydmVyQiwgUHJlc2VudGVyIH0gZnJvbSAnLi9tb2R1bGVzL3ByZXNlbnRlcic7XHJcblxyXG5jb25zdCB2aWV3OiBWaWV3ID0gbmV3IFZpZXcoJ3JhbmdlLXNsaWRlcicpO1xyXG52aWV3LnNob3dTbGlkZXIoKTtcclxuXHJcblxyXG4vLyBjb25zdCBzbGlkZXIyOiBWaWV3ID0gbmV3IFZpZXcoKTtcclxuLy8gc2xpZGVyMi5oaWRlKCk7XHJcbi8vIGNvbnN0IHNsaWRlcjM6IFZpZXcgPSBuZXcgVmlldygnJyk7XHJcbi8vIHNsaWRlcjMuaGlkZSgpO1xyXG5cclxuY29uc3QgbW9kZWwgPSBuZXcgTW9kZWwoKTtcclxuXHJcbmNvbnN0IHByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIoKTtcclxubW9kZWwuYXR0YWNoKHByZXNlbnRlcik7XHJcblxyXG4vLyBwcmVzZW50ZXIubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcclxucHJlc2VudGVyLnRyYW5zZmVyTW9kZWxEYXRhKG1vZGVsLCB2aWV3KTtcclxuLy8gbW9kZWwuY2FsY1VuaXQoKTtcclxuXHJcbi8vIGNvbnN0IHNjYWxlOiBTY2FsZSA9IG5ldyBTY2FsZSgpO1xyXG4vLyBzY2FsZS5pbml0KCk7XHJcblxyXG5zbGlkZXJSdW4oKTtcclxuXHJcbi8qKlxyXG4qINCa0LvQuNC10L3RgtGB0LrQuNC5INC60L7QtC5cclxuKi9cclxuXHJcbmNvbnN0IHN1YmplY3QgPSBuZXcgQ29uY3JldGVTdWJqZWN0KCk7XHJcblxyXG5jb25zdCBvYnNlcnZlcjEgPSBuZXcgQ29uY3JldGVPYnNlcnZlckEoKTtcclxuc3ViamVjdC5hdHRhY2gob2JzZXJ2ZXIxKTtcclxuXHJcbmNvbnN0IG9ic2VydmVyMiA9IG5ldyBDb25jcmV0ZU9ic2VydmVyQigpO1xyXG5zdWJqZWN0LmF0dGFjaChvYnNlcnZlcjIpO1xyXG5cclxuc3ViamVjdC5zb21lQnVzaW5lc3NMb2dpYygpO1xyXG5zdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcblxyXG5zdWJqZWN0LmRldGFjaChvYnNlcnZlcjIpO1xyXG5cclxuc3ViamVjdC5zb21lQnVzaW5lc3NMb2dpYygpO1xyXG5cclxuLy8gY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpO1xyXG5cclxuLy8gY29uc3QgdG9tOiBVc2VyID0gbmV3IFVzZXIoJ9Ci0L7QvCcsIDI5KTtcclxuLy8gZWwuaW5uZXJIVE1MID0gYNCY0LzRjzogJHt0b20ubmFtZX0g0LLQvtC30YDQsNGB0YI6ICR7dG9tLmFnZX1gO1xyXG5cclxuLyogY29uc3QgTVZQID0ge1xyXG4gIG1ha2VPYnNlcnZhYmxlU3ViamVjdCgpIHtcclxuICAgIGNvbnN0IG9ic2VydmVycyA9IFtdO1xyXG4gICAgY29uc3QgYWRkT2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICBpZiAodHlwZW9mIG8gIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBvYnNlcnZlcnNbaV07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyID09PSBvKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIGFscmVhZHkgaW4gdGhlIGxpc3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgb2JzZXJ2ZXJzLnB1c2gobyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVtb3ZlT2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIGlmIChvYnNlcnZlciA9PT0gbykge1xyXG4gICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgZmluZCBvYnNlcnZlciBpbiBsaXN0IG9mIG9ic2VydmVycycpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IG5vdGlmeU9ic2VydmVycyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgIC8vIE1ha2UgYSBjb3B5IG9mIG9ic2VydmVyIGxpc3QgaW4gY2FzZSB0aGUgbGlzdFxyXG4gICAgICAvLyBpcyBtdXRhdGVkIGR1cmluZyB0aGUgbm90aWZpY2F0aW9ucy5cclxuICAgICAgY29uc3Qgb2JzZXJ2ZXJzU25hcHNob3QgPSBvYnNlcnZlcnMuc2xpY2UoMCk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzU25hcHNob3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBvYnNlcnZlcnNTbmFwc2hvdFtpXShkYXRhKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGFkZE9ic2VydmVyLFxyXG4gICAgICByZW1vdmVPYnNlcnZlcixcclxuICAgICAgbm90aWZ5T2JzZXJ2ZXJzLFxyXG4gICAgICBub3RpZnk6IG5vdGlmeU9ic2VydmVycyxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgTW9kZWwob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAvLyBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgIC8vIGNvbnN0IGl0ZW1zID0gW107XHJcbiAgICB0aGlzLm9wdGlvbnMgPSAhb3B0aW9ucyA/IHt9IDogb3B0aW9ucztcclxuICAgIHRoaXMubW9kZWxDaGFuZ2VkU3ViamVjdCA9IE1WUC5tYWtlT2JzZXJ2YWJsZVN1YmplY3QoKTtcclxuICAgIHRoaXMubWluVmFsdWUgPSAwO1xyXG4gICAgdGhpcy5tYXhWYWx1ZSA9IDMwMDtcclxuICAgIHRoaXMuc3RlcCA9IDUwO1xyXG4gICAgdGhpcy5tb2RlID0gJ2hvcml6b250YWwnO1xyXG4gICAgdGhpcy50eXBlID0gJ3NpbmdsZSc7XHJcbiAgICAvLyB0aGlzLmFkZEl0ZW0gPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIC8vICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgLy8gICAgIHJldHVybjtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpdGVtcy5wdXNoKHZhbHVlKTtcclxuICAgIC8vICAgdGhhdC5tb2RlbENoYW5nZWRTdWJqZWN0Lm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMucmVtb3ZlQ3VycmVudEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIGlmICh0aGF0LnNlbGVjdGVkSW5kZXggPT09IC0xKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGl0ZW1zLnNwbGljZSh0aGF0LnNlbGVjdGVkSW5kZXgsIDEpO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC0xO1xyXG4gICAgLy8gdGhpcy5nZXRTZWxlY3RlZEluZGV4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICByZXR1cm4gdGhhdC5zZWxlY3RlZEluZGV4O1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMuc2V0U2VsZWN0ZWRJbmRleCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgLy8gICB0aGF0LnNlbGVjdGVkSW5kZXggPSB2YWx1ZTtcclxuICAgIC8vICAgdGhhdC5tb2RlbENoYW5nZWRTdWJqZWN0Lm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgLy8gfTtcclxuICB9LFxyXG5cclxuICBWaWV3KCkge1xyXG4gICAgLy8gY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSgpO1xyXG4gICAgICBzbGlkZXJCb2R5LmluaXQoKTtcclxuXHJcbiAgICAgIGNvbnN0IHNsaWRlclRodW1iOiBTbGlkZXJUaHVtYiA9IG5ldyBTbGlkZXJUaHVtYigpO1xyXG4gICAgICBzbGlkZXJUaHVtYi5pbml0KCk7XHJcblxyXG4gICAgICBjb25zdCB0aXBWYWx1ZTogVGlwVmFsdWUgPSBuZXcgVGlwVmFsdWUoKTtcclxuICAgICAgdGlwVmFsdWUuaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0aGF0LnNlbGVjdCA9ICQoJzxzZWxlY3QvPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpO1xyXG4gICAgLy8gdGhhdC5zZWxlY3QuYXR0cignc2l6ZScsICc0Jyk7XHJcbiAgICAvLyB0aGF0LmJ1dHRvbkFkZCA9ICQoJzxidXR0b24+KzwvYnV0dG9uPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpLmhlaWdodCgyMCk7XHJcbiAgICAvLyB0aGF0LmJ1dHRvblJlbW92ZSA9ICQoJzxidXR0b24+LTwvYnV0dG9uPicpLmFwcGVuZFRvKHJvb3RPYmplY3QpLmhlaWdodCgyMCk7XHJcbiAgICAvLyBtb2RlbC5tb2RlbENoYW5nZWRTdWJqZWN0LmFkZE9ic2VydmVyKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgdmFyIGl0ZW1zID0gbW9kZWwuZ2V0SXRlbXMoKTtcclxuICAgIC8vICAgdmFyIGlubmVySFRNTCA9ICcnO1xyXG4gICAgLy8gICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAvLyAgICAgaW5uZXJIVE1MICs9IFwiPG9wdGlvbj5cIiArIGl0ZW1zW2ldICsgXCI8L29wdGlvbj5cIjtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICB0aGF0LnNlbGVjdC5odG1sKGlubmVySFRNTCk7XHJcbiAgICAvLyB9KTtcclxuICB9LFxyXG5cclxuICBDb250cm9sbGVyKG1vZGVsLCB2aWV3KSB7XHJcbiAgICB2aWV3LmluaXQoKTtcclxuICAgIC8vIHZpZXcuYnV0dG9uQWRkLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBtb2RlbC5hZGRJdGVtKHByb21wdCgnYWRkdmFsdWUnKSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHZpZXcuYnV0dG9uUmVtb3ZlLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBtb2RlbC5yZW1vdmVDdXJyZW50SXRlbSgpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyB2aWV3LnNlbGVjdC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwuc2V0U2VsZWN0ZWRJbmRleCh2aWV3LnNlbGVjdFswXS5zZWxlY3RlZEluZGV4KTtcclxuICAgIC8vIH0pO1xyXG4gIH0sXHJcbn07ICovXHJcblxyXG4vKiAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIG1vZGVsID0gbmV3IE9NVkMuTW9kZWwoKTtcclxuICB2YXIgdmlldyA9IG5ldyBPTVZDLlZpZXcobW9kZWwsICQoJzxkaXYvPicpLmFwcGVuZFRvKCQoXCJib2R5XCIpKSk7XHJcbiAgdmFyIGNvbnRyb2xsZXIgPSBuZXcgT01WQy5Db250cm9sbGVyKG1vZGVsLCB2aWV3KTtcclxufSk7ICovXHJcblxyXG4vLyBjb25zdCBtb2RlbCA9IG5ldyBNVlAuTW9kZWwoKTtcclxuLy8gY29uc3QgdmlldyA9IG5ldyBNVlAuVmlldygpO1xyXG4vLyBjb25zdCBjb250cm9sbGVyID0gbmV3IE1WUC5Db250cm9sbGVyKG1vZGVsLCB2aWV3KTtcclxuXHJcbi8vIGNvbnRyb2xsZXIoKTtcclxuIiwiaW1wb3J0IFNsaWRlckJvZHkgZnJvbSAnLi9zbGlkZXJCb2R5JztcclxuaW1wb3J0IFNsaWRlclRodW1iIGZyb20gJy4vc2xpZGVyVGh1bWInO1xyXG5pbXBvcnQgVGlwVmFsdWUgZnJvbSAnLi90aXBWYWx1ZSc7XHJcbmltcG9ydCBTY2FsZSBmcm9tICcuL3NjYWxlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xyXG4gIHByaXZhdGUgX3BhcmVudElkOiBzdHJpbmc7XHJcbiAgc2xpZGVyTGluZUlkOiBzdHJpbmc7XHJcbiAgX21pblZhbHVlOiBudW1iZXI7XHJcbiAgX21heFZhbHVlOiBudW1iZXI7XHJcbiAgX3N0ZXBWYWx1ZTogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJlbnRJZD8pIHtcclxuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XHJcbiAgfTtcclxuXHJcbiAgc2hvd1NsaWRlcigpIHtcclxuICAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgICB0aGlzLnNsaWRlckxpbmVJZCA9IHNsaWRlckJvZHkuaW5pdCgpO1xyXG4gICAgY29uc3Qgc2xpZGVyVGh1bWI6IFNsaWRlclRodW1iID0gbmV3IFNsaWRlclRodW1iKHRoaXMuc2xpZGVyTGluZUlkKTtcclxuICAgIHNsaWRlclRodW1iLmluaXQoKTtcclxuICAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZSh0aGlzLnNsaWRlckxpbmVJZCk7XHJcbiAgICB0aXBWYWx1ZS5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBzaG93U2NhbGUobWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBzdGVwOiBudW1iZXIpIHtcclxuICAgIHRoaXMuX21pblZhbHVlID0gbWluO1xyXG4gICAgdGhpcy5fbWF4VmFsdWUgPSBtYXg7XHJcbiAgICB0aGlzLl9zdGVwVmFsdWUgPSBzdGVwO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5fcGFyZW50SWQpO1xyXG4gICAgY29uc3Qgc2NhbGU6IFNjYWxlID0gbmV3IFNjYWxlKHRoaXMuX3BhcmVudElkLCB0aGlzLl9taW5WYWx1ZSwgdGhpcy5fbWF4VmFsdWUsIHRoaXMuX3N0ZXBWYWx1ZSk7XHJcbiAgICBzY2FsZS5pbml0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBzbGlkZXJMZW5ndGg6IG51bWJlcjtcclxuICAvLyBpbml0KCkge1xyXG4gIC8vICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XHJcbiAgLy8gICBzbGlkZXJCb2R5LmluaXQoKTtcclxuICAvLyB9XHJcblxyXG4gIC8vIGdldFdpZHRoU2xpZGVyKCkge1xyXG4gIC8vICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XHJcbiAgLy8gICB0aGlzLnNsaWRlckxlbmd0aCA9IHNsaWRlckJvZHkuZ2V0V2lkdGgoKTtcclxuICAvLyAgIHJldHVybiB0aGlzLnNsaWRlckxlbmd0aDtcclxuICAvLyB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJy4vYXBwJztcbmltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSAnLi9wcmVzZW50ZXInO1xuXG50eXBlIG9wdGlvbnMgPSB7XG4gIG1pbj86IG51bWJlcjtcbiAgbWF4PzogbnVtYmVyO1xuICBzdGVwPzogbnVtYmVyO1xuICBraW5kPzogc3RyaW5nO1xuICBpc0Jhc2ljPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGVsIGltcGxlbWVudHMgU3ViamVjdCB7XG4gIHByaXZhdGUgX21pbjogbnVtYmVyO1xuICBwcml2YXRlIF9tYXg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfc3RlcDogbnVtYmVyO1xuICBwcml2YXRlIF9raW5kOiBzdHJpbmc7XG4gIHByaXZhdGUgX2lzQmFzaWM6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fVxuICAgIHRoaXMuX21pbiA9IG9wdGlvbnMubWluID8gb3B0aW9ucy5taW4gOiAwO1xuICAgIHRoaXMuX21heCA9IG9wdGlvbnMubWF4ID8gb3B0aW9ucy5tYXggOiAzMDA7XG4gICAgdGhpcy5fc3RlcCA9IG9wdGlvbnMuc3RlcCA/IG9wdGlvbnMuc3RlcCA6IDUwO1xuICAgIHRoaXMuX2tpbmQgPSBvcHRpb25zLmtpbmQgPyBvcHRpb25zLmtpbmQgOiAnaG9yaXpvbnRhbCc7XG4gICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYyA/IG9wdGlvbnMuaXNCYXNpYyA6IHRydWU7XG4gICAgLy8gdGhpcy5ub3RpZnkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7T2JzZXJ2ZXJbXX0g0KHQv9C40YHQvtC6INC/0L7QtNC/0LjRgdGH0LjQutC+0LIuINCSINGA0LXQsNC70YzQvdC+0Lkg0LbQuNC30L3QuCDRgdC/0LjRgdC+0LpcbiAgICog0L/QvtC00L/QuNGB0YfQuNC60L7QsiDQvNC+0LbQtdGCINGF0YDQsNC90LjRgtGM0YHRjyDQsiDQsdC+0LvQtdC1INC/0L7QtNGA0L7QsdC90L7QvCDQstC40LTQtSAo0LrQu9Cw0YHRgdC40YTQuNGG0LjRgNGD0LXRgtGB0Y8g0L/QvlxuICAgKiDRgtC40L/RgyDRgdC+0LHRi9GC0LjRjyDQuCDRgi7QtC4pXG4gICAqL1xuICBwcml2YXRlIG9ic2VydmVyczogT2JzZXJ2ZXJbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiDQnNC10YLQvtC00Ysg0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QvtC00L/QuNGB0LrQvtC5LlxuICAgKi9cbiAgcHVibGljIGF0dGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcbiAgICBjb25zdCBpc0V4aXN0ID0gdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpO1xuICAgIGlmIChpc0V4aXN0KSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ01vZGVsOiBQcmVzZW50ZXIgaGFzIGJlZW4gYXR0YWNoZWQgYWxyZWFkeS4nKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnTW9kZWw6IEF0dGFjaGVkIGEgcHJlc2VudGVyLicpO1xuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICB9XG5cbiAgcHVibGljIGRldGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcbiAgICBjb25zdCBvYnNlcnZlckluZGV4ID0gdGhpcy5vYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlcik7XG4gICAgaWYgKG9ic2VydmVySW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ1N1YmplY3Q6IE5vbmV4aXN0ZW50IG9ic2VydmVyLicpO1xuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShvYnNlcnZlckluZGV4LCAxKTtcbiAgICBjb25zb2xlLmxvZygnU3ViamVjdDogRGV0YWNoZWQgYW4gb2JzZXJ2ZXIuJyk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YPRgdC6INC+0LHQvdC+0LLQu9C10L3QuNGPINCyINC60LDQttC00L7QvCDQv9C+0LTQv9C40YHRh9C40LrQtS5cbiAgICovXG4gIHB1YmxpYyBub3RpZnkoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ01vZGVsOiBOb3RpZnlpbmcgb2JzZXJ2ZXJzLi4uJyk7XG4gICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiB0aGlzLm9ic2VydmVycykge1xuICAgICAgb2JzZXJ2ZXIudXBkYXRlKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIGNhbGNVbml0KCkge1xuICAgIGNvbnNvbGUubG9nKGBNb2RlbDogTXkgc3RhdGUgaGFzIGp1c3QgY2hhbmdlZGApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1pbjogdGhpcy5fbWluLFxuICAgICAgbWF4OiB0aGlzLl9tYXgsXG4gICAgICBzdGVwOiB0aGlzLl9zdGVwXG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgU3ViamVjdCwgQ29uY3JldGVTdWJqZWN0IH0gZnJvbSAnLi9hcHAnO1xuaW1wb3J0IFNsaWRlckJvZHkgZnJvbSAnLi9zbGlkZXJCb2R5JztcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJztcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XG4vKipcbiog0JjQvdGC0LXRgNGE0LXQudGBINCd0LDQsdC70Y7QtNCw0YLQtdC70Y8g0L7QsdGK0Y/QstC70Y/QtdGCINC80LXRgtC+0LQg0YPQstC10LTQvtC80LvQtdC90LjRjywg0LrQvtGC0L7RgNGL0Lkg0LjQt9C00LDRgtC10LvQuFxuKiDQuNGB0L/QvtC70YzQt9GD0Y7RgiDQtNC70Y8g0L7Qv9C+0LLQtdGJ0LXQvdC40Y8g0YHQstC+0LjRhSDQv9C+0LTQv9C40YHRh9C40LrQvtCyLlxuKi9cbmludGVyZmFjZSBPYnNlcnZlciB7XG4gIC8vINCf0L7Qu9GD0YfQuNGC0Ywg0L7QsdC90L7QstC70LXQvdC40LUg0L7RgiDRgdGD0LHRitC10LrRgtCwLlxuICB1cGRhdGUoc3ViamVjdDogU3ViamVjdCk6IHZvaWQ7XG59XG5cbi8qKlxuKiDQmtC+0L3QutGA0LXRgtC90YvQtSDQndCw0LHQu9GO0LTQsNGC0LXQu9C4INGA0LXQsNCz0LjRgNGD0Y7RgiDQvdCwINC+0LHQvdC+0LLQu9C10L3QuNGPLCDQstGL0L/Rg9GJ0LXQvdC90YvQtSDQmNC30LTQsNGC0LXQu9C10LwsINC6XG4qINC60L7RgtC+0YDQvtC80YMg0L7QvdC4INC/0YDQuNC60YDQtdC/0LvQtdC90YsuXG4qL1xuY2xhc3MgQ29uY3JldGVPYnNlcnZlckEgaW1wbGVtZW50cyBPYnNlcnZlciB7XG4gIHB1YmxpYyB1cGRhdGUoc3ViamVjdDogU3ViamVjdCk6IHZvaWQge1xuICAgIGlmIChzdWJqZWN0IGluc3RhbmNlb2YgQ29uY3JldGVTdWJqZWN0ICYmIHN1YmplY3Quc3RhdGUgPCAzKSB7XG4gICAgICBjb25zb2xlLmxvZygnQ29uY3JldGVPYnNlcnZlckE6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBQcmVzZW50ZXIgaW1wbGVtZW50cyBPYnNlcnZlciB7XG4gIG1vZGVsT3B0aW9uczoge21pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgc3RlcDogbnVtYmVyfTtcblxuICB0cmFuc2Zlck1vZGVsRGF0YShtb2RlbDogTW9kZWwsIHZpZXc6IFZpZXcpIHtcbiAgICB0aGlzLm1vZGVsT3B0aW9ucyA9IG1vZGVsLmNhbGNVbml0KCk7XG4gICAgY29uc29sZS5sb2codGhpcy5tb2RlbE9wdGlvbnMpO1xuICAgIHZpZXcuc2hvd1NjYWxlKHRoaXMubW9kZWxPcHRpb25zLm1pbiwgdGhpcy5tb2RlbE9wdGlvbnMubWF4LCB0aGlzLm1vZGVsT3B0aW9ucy5zdGVwKTtcbiAgICAvLyBjb25zb2xlLmxvZygnTW9kZWxPYnNlcnZlcjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XG4gICAgLy8gaWYgKG1vZGVsIGluc3RhbmNlb2YgTW9kZWwpIHtcbiAgICAvLyAgIHRoaXMubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcbiAgICAvLyAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWxPcHRpb25zKTtcbiAgICAgIC8vIGNvbnN0IHZpZXcgPSBuZXcgVmlldygpO1xuICAgICAgLy8gdmlldy5zaG93U2NhbGUodGhpcy5tb2RlbE9wdGlvbnMubWluLCB0aGlzLm1vZGVsT3B0aW9ucy5tYXgsIHRoaXMubW9kZWxPcHRpb25zLnN0ZXApO1xuICAgICAgLy8gY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xuICAgIC8vIH1cbiAgfVxuXG4gIC8vIHRyYW5zZmVyKCkge1xuICAvLyAgIGNvbnN0IHZpZXc6IFZpZXcgPSBuZXcgVmlldygpO1xuICAgIC8vIHJldHVybiB2aWV3LmdldFdpZHRoU2xpZGVyKCk7XG4gIC8vIH1cblxuICB1cGRhdGUobW9kZWw6IE1vZGVsKSB7XG4gICAgY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xuICAgIC8vIGlmIChtb2RlbCBpbnN0YW5jZW9mIE1vZGVsKSB7XG4gICAgLy8gICB0aGlzLm1vZGVsT3B0aW9ucyA9IG1vZGVsLmNhbGNVbml0KCk7XG4gICAgLy8gICBjb25zb2xlLmxvZyh0aGlzLm1vZGVsT3B0aW9ucyk7XG4gICAgLy8gICBjb25zdCB2aWV3ID0gbmV3IFZpZXcoKTtcbiAgICAvLyAgIHZpZXcuc2hvd1NjYWxlKHRoaXMubW9kZWxPcHRpb25zLm1pbiwgdGhpcy5tb2RlbE9wdGlvbnMubWF4LCB0aGlzLm1vZGVsT3B0aW9ucy5zdGVwKTtcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdNb2RlbE9ic2VydmVyOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcbiAgICAvLyB9XG4gIH1cbn1cblxuLy8gY2xhc3MgVmlld09ic2VydmVyIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xuLy8gICB1cGRhdGUodmlldykge1xuXG4vLyAgIH1cbi8vIH1cblxuY2xhc3MgQ29uY3JldGVPYnNlcnZlckIgaW1wbGVtZW50cyBPYnNlcnZlciB7XG4gIGlzU3ViamVjdFNhdGlzZmllcyhzdWJqZWN0KSB7XG4gICAgcmV0dXJuIHN1YmplY3QgaW5zdGFuY2VvZiBDb25jcmV0ZVN1YmplY3QgJiYgKHN1YmplY3Quc3RhdGUgPT09IDAgfHwgc3ViamVjdC5zdGF0ZSA+PSAyKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoc3ViamVjdDogU3ViamVjdCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzU3ViamVjdFNhdGlzZmllcyhzdWJqZWN0KSkge1xuICAgICAgY29uc29sZS5sb2coJ0NvbmNyZXRlT2JzZXJ2ZXJCOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgT2JzZXJ2ZXIsIENvbmNyZXRlT2JzZXJ2ZXJBLCBDb25jcmV0ZU9ic2VydmVyQiwgUHJlc2VudGVyIH07XG4iXSwic291cmNlUm9vdCI6IiJ9