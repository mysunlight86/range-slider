!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=4)}([function(e,t,n){var i=n(1),s=n(2);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},function(e,t,n){"use strict";var i,s=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function a(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],s=0;s<e.length;s++){var o=e[s],l=t.base?o[0]+t.base:o[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=a(c),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(r[u].references++,r[u].updater(h)):r.push({identifier:c,updater:b(h,t),references:1}),i.push(c)}return i}function d(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,i){var s=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,s);else{var o=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function m(e,t,n){var i=n.css,s=n.media,o=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),o&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,p=0;function b(e,t){var n,i,s;if(t.singleton){var o=p++;n=f||(f=d(t)),i=h.bind(null,n,o,!1),s=h.bind(null,n,o,!0)}else n=d(t),i=m.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var s=a(n[i]);r[s].references--}for(var o=l(e,t),d=0;d<n.length;d++){var c=a(n[d]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}n=o}}}},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);n(0);var i=function(){const e=document.getElementById("slider-body"),t=document.getElementById("slider-thumb"),n=document.getElementById("tip-value"),i=t.offsetWidth/2;function s(s){let o=s.clientX-e.getBoundingClientRect().left-i;o<-i&&(o=-i);const r=e.offsetWidth-i;var a;o>r&&(o=r),t.style.left=o+"px",n.textContent=""+(o+i),n.style.left=o-(n.offsetWidth-t.offsetWidth)/2+"px",a=o+i,e.style.background=`linear-gradient(to right, red ${a}px, #e5e5e5 ${a}px)`}function o(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",s)}n.textContent=""+(Number(getComputedStyle(t).left.slice(0,-2))+i),t.addEventListener("mousedown",(function(e){e.preventDefault(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)})),e.addEventListener("click",s),t.addEventListener("dragstart",(function(){return!1}))};class s{constructor(e){this.sliderLine="slider-body",this._parentId=e}init(){return this.container=document.getElementById(this._parentId),this.bodySlider=document.createElement("DIV"),this.bodySlider.classList.add("slider-body"),this.bodySlider.setAttribute("id",this.sliderLine),this.container.append(this.bodySlider),this.sliderLine}destroy(){this.bodySlider.remove()}}class o{constructor(e){this._parentId=e}init(){this.container=document.getElementById(this._parentId),this.thumbSlider=document.createElement("DIV"),this.thumbSlider.classList.add("slider-thumb"),this.thumbSlider.setAttribute("id","slider-thumb"),this.container.append(this.thumbSlider)}destroy(){this.thumbSlider.remove()}}class r{constructor(e){this._parentId=e}init(){this.container=document.getElementById(this._parentId),this.tipValue=document.createElement("DIV"),this.tipValue.classList.add("tip-value"),this.tipValue.setAttribute("id","tip-value"),this.container.append(this.tipValue)}destroy(){this.tipValue.remove()}}class a{constructor(e,t,n,i){this._parentId=e,this._min=t,this._max=n,this._step=i,this.scale=document.createElement("DIV"),this.scale.classList.add("scale"),this.min=document.createElement("SPAN"),this.min.textContent=""+this._min,this.min.style.position="absolute",this.max=document.createElement("SPAN"),this.max.textContent=""+this._max,this.max.style.position="absolute"}init(){this.container=document.getElementById(this._parentId),this.container.append(this.scale),this.scale.append(this.min),this.scale.append(this.max),this.min.style.left=this.scale.offsetLeft-this.min.offsetWidth/2+"px",this.max.style.left=this.scale.offsetWidth+this.scale.offsetLeft-this.max.offsetWidth/2+"px",this.mark=(this._max-this._min)/this._step;for(let e=1;e<this.mark;e++)this.elem=document.createElement("SPAN"),this.elem.textContent=""+(this._step*e+this._min),this.elem.style.position="absolute",this.max.insertAdjacentElement("beforebegin",this.elem),(Number(this.elem.textContent)<100||Number(this.elem.textContent)<1e3)&&(this.elem.style.left=(Number(this.elem.textContent)-this._min)*this.scale.offsetWidth/(this._max-this._min)+this.scale.offsetLeft-this.elem.offsetWidth/2+"px")}destroy(){this.scale.remove()}}const l=new class{constructor(e){this._parentId=e}showSlider(){const e=new s(this._parentId);this.sliderLineId=e.init();new o(this.sliderLineId).init();new r(this.sliderLineId).init()}showScale(e,t,n){this._minValue=e,this._maxValue=t,this._stepValue=n;new a(this._parentId,this._minValue,this._maxValue,this._stepValue).init()}}("range-slider");l.showSlider();const d=new class{constructor(e){this.observers=[],e||(e={}),this._min=e.min?e.min:0,this._max=e.max?e.max:300,this._step=e.step?e.step:50,this._kind=e.kind?e.kind:"horizontal",this._isBasic=!e.isBasic||e.isBasic}attach(e){if(this.observers.includes(e))return console.log("Model: Presenter has been attached already.");console.log("Model: Attached a presenter."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Model: Notifying observers...");for(const e of this.observers)e.update(this)}calcUnit(){return console.log("Model: My state has just changed"),{min:this._min,max:this._max,step:this._step}}}({min:40,step:60,max:260}),c=new class{transferModelData(e,t){this.modelOptions=e.calcUnit(),console.log(this.modelOptions),t.showScale(this.modelOptions.min,this.modelOptions.max,this.modelOptions.step)}update(e){console.log("ModelObserver: Reacted to the event.")}};d.attach(c),c.transferModelData(d,l),i()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NsaWRlckJvZHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyVGh1bWIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdGlwVmFsdWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2NhbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvcHJlc2VudGVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYXBpIiwiY29udGVudCIsImRlZmF1bHQiLCJvcHRpb25zIiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibGVuZ3RoIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjb3VudCIsImNvbmNhdCIsImluZGV4Iiwib2JqIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsInB1c2giLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJqb2luIiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsInJlbW92ZSIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsInRvU3RyaW5nIiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJzcGxpY2UiLCJzbGlkZXIiLCJnZXRFbGVtZW50QnlJZCIsInRodW1iIiwidGlwIiwiZGVsdGEiLCJvZmZzZXRXaWR0aCIsIm9uTW91c2VNb3ZlIiwiZXZlbnQiLCJ0aHVtYlBvaW50IiwiY2xpZW50WCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJyaWdodEVkZ2UiLCJ0ZXh0Q29udGVudCIsImJhY2tncm91bmQiLCJvbk1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiTnVtYmVyIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInNsaWNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiU2xpZGVyQm9keSIsInBhcmVudElkIiwic2xpZGVyTGluZSIsInRoaXMiLCJfcGFyZW50SWQiLCJjb250YWluZXIiLCJib2R5U2xpZGVyIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kIiwiU2xpZGVyVGh1bWIiLCJ0aHVtYlNsaWRlciIsIlRpcFZhbHVlIiwidGlwVmFsdWUiLCJTY2FsZSIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJzdGVwVmFsdWUiLCJfbWluIiwiX21heCIsIl9zdGVwIiwic2NhbGUiLCJtaW4iLCJwb3NpdGlvbiIsIm1heCIsIm9mZnNldExlZnQiLCJtYXJrIiwiZWxlbSIsImluc2VydEFkamFjZW50RWxlbWVudCIsInZpZXciLCJzbGlkZXJCb2R5Iiwic2xpZGVyTGluZUlkIiwiaW5pdCIsInN0ZXAiLCJfbWluVmFsdWUiLCJfbWF4VmFsdWUiLCJfc3RlcFZhbHVlIiwic2hvd1NsaWRlciIsIm1vZGVsIiwib2JzZXJ2ZXJzIiwiX2tpbmQiLCJraW5kIiwiX2lzQmFzaWMiLCJpc0Jhc2ljIiwib2JzZXJ2ZXIiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJsb2ciLCJvYnNlcnZlckluZGV4IiwiaW5kZXhPZiIsInByZXNlbnRlciIsIm1vZGVsT3B0aW9ucyIsImNh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LEdBR2JBLEVBQVVLLGtCQUFrQmpCLEVBQU9ULEdBUW5DbkQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3RcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiZnVuY3Rpb24gc2xpZGVyUnVuKCkge1xuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLWJvZHknKTtcbiAgY29uc3QgdGh1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLXRodW1iJyk7XG4gIGNvbnN0IHRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXAtdmFsdWUnKTtcblxuICBjb25zdCBkZWx0YSA9IHRodW1iLm9mZnNldFdpZHRoIC8gMjtcbiAgdGlwLnRleHRDb250ZW50ID0gYCR7TnVtYmVyKGdldENvbXB1dGVkU3R5bGUodGh1bWIpLmxlZnQuc2xpY2UoMCwgLTIpKSArIGRlbHRhfWA7XG5cbiAgZnVuY3Rpb24gZmlsbFNsaWRlckxpbmUobGVuZ3RoKSB7XG4gICAgc2xpZGVyLnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZWQgJHtsZW5ndGh9cHgsICNlNWU1ZTUgJHtsZW5ndGh9cHgpYDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgbGV0IHRodW1iUG9pbnQgPSBldmVudC5jbGllbnRYIC0gc2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBkZWx0YTtcblxuICAgIC8vINC60YPRgNGB0L7RgCDQstGL0YjQtdC7INC40Lcg0YHQu9Cw0LnQtNC10YDQsCA9PiDQvtGB0YLQsNCy0LjRgtGMINCx0LXQs9GD0L3QvtC6INCyINC10LPQviDQs9GA0LDQvdC40YbQsNGFLlxuICAgIGlmICh0aHVtYlBvaW50IDwgLWRlbHRhKSB7XG4gICAgICB0aHVtYlBvaW50ID0gLWRlbHRhO1xuICAgIH1cbiAgICBjb25zdCByaWdodEVkZ2UgPSBzbGlkZXIub2Zmc2V0V2lkdGggLSBkZWx0YTtcbiAgICBpZiAodGh1bWJQb2ludCA+IHJpZ2h0RWRnZSkge1xuICAgICAgdGh1bWJQb2ludCA9IHJpZ2h0RWRnZTtcbiAgICB9XG5cbiAgICB0aHVtYi5zdHlsZS5sZWZ0ID0gYCR7dGh1bWJQb2ludH1weGA7XG4gICAgdGlwLnRleHRDb250ZW50ID0gYCR7dGh1bWJQb2ludCArIGRlbHRhfWA7XG4gICAgdGlwLnN0eWxlLmxlZnQgPSBgJHt0aHVtYlBvaW50IC0gKHRpcC5vZmZzZXRXaWR0aCAtIHRodW1iLm9mZnNldFdpZHRoKSAvIDJ9cHhgO1xuICAgIGZpbGxTbGlkZXJMaW5lKHRodW1iUG9pbnQgKyBkZWx0YSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdXNlVXAoKTogdm9pZCB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbk1vdXNlTW92ZSk7XG4gIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHJldHVybkZhbHNlKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc2xpZGVyUnVuO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVyQm9keSB7XG4gIHByaXZhdGUgX3BhcmVudElkOiBzdHJpbmc7XG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIGJvZHlTbGlkZXI6IEhUTUxFbGVtZW50O1xuICBzbGlkZXJMaW5lID0gJ3NsaWRlci1ib2R5JztcblxuICBjb25zdHJ1Y3RvcihwYXJlbnRJZCkge1xuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XG4gIH07XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX3BhcmVudElkKTtcbiAgICB0aGlzLmJvZHlTbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICB0aGlzLmJvZHlTbGlkZXIuY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWJvZHknKTtcbiAgICB0aGlzLmJvZHlTbGlkZXIuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuc2xpZGVyTGluZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMuYm9keVNsaWRlcik7XG4gICAgcmV0dXJuIHRoaXMuc2xpZGVyTGluZTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5ib2R5U2xpZGVyLnJlbW92ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJUaHVtYiB7XG4gIHByaXZhdGUgX3BhcmVudElkOiBzdHJpbmc7XG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHRodW1iU2xpZGVyOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihwYXJlbnRJZCkge1xuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XG4gIH07XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX3BhcmVudElkKTtcbiAgICB0aGlzLnRodW1iU2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgdGhpcy50aHVtYlNsaWRlci5jbGFzc0xpc3QuYWRkKCdzbGlkZXItdGh1bWInKTtcbiAgICB0aGlzLnRodW1iU2xpZGVyLnNldEF0dHJpYnV0ZSgnaWQnLCAnc2xpZGVyLXRodW1iJyk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMudGh1bWJTbGlkZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnRodW1iU2xpZGVyLnJlbW92ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaXBWYWx1ZSB7XHJcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcclxuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHRpcFZhbHVlOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IocGFyZW50SWQpIHtcclxuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XHJcbiAgfTtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fcGFyZW50SWQpO1xyXG4gICAgdGhpcy50aXBWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgdGhpcy50aXBWYWx1ZS5jbGFzc0xpc3QuYWRkKCd0aXAtdmFsdWUnKTtcclxuICAgIHRoaXMudGlwVmFsdWUuc2V0QXR0cmlidXRlKCdpZCcsICd0aXAtdmFsdWUnKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLnRpcFZhbHVlKTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLnRpcFZhbHVlLnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTY2FsZSB7XG4gIHByaXZhdGUgX3BhcmVudElkOiBzdHJpbmc7XG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIC8vIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYW5nZS1zbGlkZXInKTtcbiAgX21pbjogbnVtYmVyO1xuICBfbWF4OiBudW1iZXI7XG4gIF9zdGVwOiBudW1iZXI7XG4gIG1hcms6IG51bWJlcjtcblxuICAvLyBtYXhWYWx1ZSA9IDMwMDtcbiAgLy8gc3RlcCA9IDUwO1xuICAvLyBtYXJrID0gKHRoaXMuX21heCAtIHRoaXMuX21pbikgLyB0aGlzLl9zdGVwO1xuICBzY2FsZTogSFRNTEVsZW1lbnQ7XG4gIG1pbjogSFRNTEVsZW1lbnQ7XG4gIG1heDogSFRNTEVsZW1lbnQ7XG4gIGVsZW06IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudElkOiBzdHJpbmcsIG1pblZhbHVlOiBudW1iZXIsIG1heFZhbHVlOiBudW1iZXIsIHN0ZXBWYWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fcGFyZW50SWQgPSBwYXJlbnRJZDtcbiAgICB0aGlzLl9taW4gPSBtaW5WYWx1ZTtcbiAgICB0aGlzLl9tYXggPSBtYXhWYWx1ZTtcbiAgICB0aGlzLl9zdGVwID0gc3RlcFZhbHVlO1xuICAgIHRoaXMuc2NhbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICB0aGlzLnNjYWxlLmNsYXNzTGlzdC5hZGQoJ3NjYWxlJyk7XG4gICAgdGhpcy5taW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTUEFOJyk7XG4gICAgdGhpcy5taW4udGV4dENvbnRlbnQgPSBgJHt0aGlzLl9taW59YDtcbiAgICB0aGlzLm1pbi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgLy8gdGhpcy5taW4uc3R5bGUubGVmdCA9ICcyNHB4JztcbiAgICB0aGlzLm1heCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcbiAgICB0aGlzLm1heC50ZXh0Q29udGVudCA9IGAke3RoaXMuX21heH1gO1xuICAgIHRoaXMubWF4LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAvLyB0aGlzLm1heC5zdHlsZS5sZWZ0ID0gJzMxNnB4JztcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9wYXJlbnRJZCk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMuc2NhbGUpO1xuICAgIHRoaXMuc2NhbGUuYXBwZW5kKHRoaXMubWluKTtcbiAgICB0aGlzLnNjYWxlLmFwcGVuZCh0aGlzLm1heCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5taW4ub2Zmc2V0V2lkdGgpO1xuICAgIC8vIHRoaXMubWluLnN0eWxlLmxlZnQgPSBgJHt0aGlzLnNjYWxlLm9mZnNldExlZnQgLSB0aGlzLm1pbi5vZmZzZXRXaWR0aCAvIDJ9cHhgO1xuICAgIHRoaXMubWluLnN0eWxlLmxlZnQgPSBgJHt0aGlzLnNjYWxlLm9mZnNldExlZnQgLSB0aGlzLm1pbi5vZmZzZXRXaWR0aCAvIDJ9cHhgO1xuICAgIC8vIHRoaXMubWF4LnN0eWxlLmxlZnQgPSBgJHt0aGlzLnNjYWxlLm9mZnNldFdpZHRoICsgMTZ9cHhgO1xuICAgIHRoaXMubWF4LnN0eWxlLmxlZnQgPSBgJHt0aGlzLnNjYWxlLm9mZnNldFdpZHRoICsgdGhpcy5zY2FsZS5vZmZzZXRMZWZ0IC0gdGhpcy5tYXgub2Zmc2V0V2lkdGggLyAyfXB4YDtcbiAgICB0aGlzLm1hcmsgPSAodGhpcy5fbWF4IC0gdGhpcy5fbWluKSAvIHRoaXMuX3N0ZXA7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5zY2FsZS5vZmZzZXRMZWZ0KTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNjYWxlLm9mZnNldFdpZHRoKTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1hcmspO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5tYXJrOyBpKyspIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdsb29wIGZvcicpO1xuICAgICAgdGhpcy5lbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xuICAgICAgdGhpcy5lbGVtLnRleHRDb250ZW50ID0gYCR7dGhpcy5fc3RlcCAqIGkgKyB0aGlzLl9taW59YDtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZWxlbS50ZXh0Q29udGVudCk7XG4gICAgICB0aGlzLmVsZW0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgdGhpcy5tYXguaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIHRoaXMuZWxlbSk7XG4gICAgICBpZiAoTnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgPCAxMDApIHtcbiAgICAgICAgLy8gdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBgJHtOdW1iZXIodGhpcy5lbGVtLnRleHRDb250ZW50KSAqIHRoaXMuc2NhbGUub2Zmc2V0V2lkdGggLyB0aGlzLl9tYXggKyAyMH1weGA7XG4gICAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gYCR7KChOdW1iZXIodGhpcy5lbGVtLnRleHRDb250ZW50KSAtIHRoaXMuX21pbikgKiB0aGlzLnNjYWxlLm9mZnNldFdpZHRoIC8gKHRoaXMuX21heCAtIHRoaXMuX21pbikpICsgdGhpcy5zY2FsZS5vZmZzZXRMZWZ0IC0gdGhpcy5lbGVtLm9mZnNldFdpZHRoIC8gMn1weGA7XG4gICAgICB9IGVsc2UgaWYgKE51bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpIDwgMTAwMCkge1xuICAgICAgICAvLyB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IGAke051bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpICogdGhpcy5zY2FsZS5vZmZzZXRXaWR0aCAvIHRoaXMuX21heCArIDE2fXB4YDtcbiAgICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBgJHsoKE51bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpIC0gdGhpcy5fbWluKSAqIHRoaXMuc2NhbGUub2Zmc2V0V2lkdGggLyAodGhpcy5fbWF4IC0gdGhpcy5fbWluKSkgKyB0aGlzLnNjYWxlLm9mZnNldExlZnQgLSB0aGlzLmVsZW0ub2Zmc2V0V2lkdGggLyAyfXB4YDtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXMubWF4Lmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlYmVnaW4nLCB0aGlzLmVsZW0pO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zY2FsZS5yZW1vdmUoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xyXG5cclxuaW1wb3J0IHNsaWRlclJ1biBmcm9tICcuL21vZHVsZXMvc2xpZGVyJztcclxuLy8gaW1wb3J0IFNjYWxlIGZyb20gJy4vbW9kdWxlcy9zY2FsZSc7XHJcbi8vIGltcG9ydCB7IENvbmNyZXRlU3ViamVjdCB9IGZyb20gJy4vbW9kdWxlcy9hcHAnO1xyXG5pbXBvcnQgVmlldyBmcm9tICcuL21vZHVsZXMvdmlldyc7XHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZHVsZXMvbW9kZWwnO1xyXG4vLyBpbXBvcnQgeyBDb25jcmV0ZU9ic2VydmVyQSwgQ29uY3JldGVPYnNlcnZlckIsIFByZXNlbnRlciB9IGZyb20gJy4vbW9kdWxlcy9wcmVzZW50ZXInO1xyXG5pbXBvcnQgeyBQcmVzZW50ZXIgfSBmcm9tICcuL21vZHVsZXMvcHJlc2VudGVyJztcclxuXHJcbmNvbnN0IHZpZXc6IFZpZXcgPSBuZXcgVmlldygncmFuZ2Utc2xpZGVyJyk7XHJcbnZpZXcuc2hvd1NsaWRlcigpO1xyXG5cclxuXHJcbi8vIGNvbnN0IHNsaWRlcjI6IFZpZXcgPSBuZXcgVmlldygpO1xyXG4vLyBzbGlkZXIyLmhpZGUoKTtcclxuLy8gY29uc3Qgc2xpZGVyMzogVmlldyA9IG5ldyBWaWV3KCcnKTtcclxuLy8gc2xpZGVyMy5oaWRlKCk7XHJcblxyXG5jb25zdCBtb2RlbCA9IG5ldyBNb2RlbCh7XHJcbiAgbWluOiA0MCxcclxuICBzdGVwOiA2MCxcclxuICBtYXg6IDI2MFxyXG59KTtcclxuXHJcbmNvbnN0IHByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIoKTtcclxubW9kZWwuYXR0YWNoKHByZXNlbnRlcik7XHJcblxyXG4vLyBwcmVzZW50ZXIubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcclxucHJlc2VudGVyLnRyYW5zZmVyTW9kZWxEYXRhKG1vZGVsLCB2aWV3KTtcclxuLy8gbW9kZWwuY2FsY1VuaXQoKTtcclxuXHJcbi8vIHZpZXcuc2hvd1NsaWRlcigpO1xyXG5cclxuLy8gY29uc3Qgc2NhbGU6IFNjYWxlID0gbmV3IFNjYWxlKCk7XHJcbi8vIHNjYWxlLmluaXQoKTtcclxuXHJcbnNsaWRlclJ1bigpO1xyXG5cclxuLyoqXHJcbiog0JrQu9C40LXQvdGC0YHQutC40Lkg0LrQvtC0LlxyXG4qL1xyXG5cclxuLy8gY29uc3Qgc3ViamVjdCA9IG5ldyBDb25jcmV0ZVN1YmplY3QoKTtcclxuXHJcbi8vIGNvbnN0IG9ic2VydmVyMSA9IG5ldyBDb25jcmV0ZU9ic2VydmVyQSgpO1xyXG4vLyBzdWJqZWN0LmF0dGFjaChvYnNlcnZlcjEpO1xyXG5cclxuLy8gY29uc3Qgb2JzZXJ2ZXIyID0gbmV3IENvbmNyZXRlT2JzZXJ2ZXJCKCk7XHJcbi8vIHN1YmplY3QuYXR0YWNoKG9ic2VydmVyMik7XHJcblxyXG4vLyBzdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcbi8vIHN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuXHJcbi8vIHN1YmplY3QuZGV0YWNoKG9ic2VydmVyMik7XHJcblxyXG4vLyBzdWJqZWN0LnNvbWVCdXNpbmVzc0xvZ2ljKCk7XHJcblxyXG4vLyBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XHJcblxyXG4vLyBjb25zdCB0b206IFVzZXIgPSBuZXcgVXNlcign0KLQvtC8JywgMjkpO1xyXG4vLyBlbC5pbm5lckhUTUwgPSBg0JjQvNGPOiAke3RvbS5uYW1lfSDQstC+0LfRgNCw0YHRgjogJHt0b20uYWdlfWA7XHJcblxyXG4vKiBjb25zdCBNVlAgPSB7XHJcbiAgbWFrZU9ic2VydmFibGVTdWJqZWN0KCkge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJzID0gW107XHJcbiAgICBjb25zdCBhZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbyAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb2JzZXJ2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IG8pIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignb2JzZXJ2ZXIgYWxyZWFkeSBpbiB0aGUgbGlzdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBvYnNlcnZlcnMucHVzaChvKTtcclxuICAgIH07XHJcbiAgICBjb25zdCByZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBvYnNlcnZlcnNbaV07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyID09PSBvKSB7XHJcbiAgICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBmaW5kIG9ic2VydmVyIGluIGxpc3Qgb2Ygb2JzZXJ2ZXJzJyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgbm90aWZ5T2JzZXJ2ZXJzID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgLy8gTWFrZSBhIGNvcHkgb2Ygb2JzZXJ2ZXIgbGlzdCBpbiBjYXNlIHRoZSBsaXN0XHJcbiAgICAgIC8vIGlzIG11dGF0ZWQgZHVyaW5nIHRoZSBub3RpZmljYXRpb25zLlxyXG4gICAgICBjb25zdCBvYnNlcnZlcnNTbmFwc2hvdCA9IG9ic2VydmVycy5zbGljZSgwKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnNTbmFwc2hvdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG9ic2VydmVyc1NuYXBzaG90W2ldKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWRkT2JzZXJ2ZXIsXHJcbiAgICAgIHJlbW92ZU9ic2VydmVyLFxyXG4gICAgICBub3RpZnlPYnNlcnZlcnMsXHJcbiAgICAgIG5vdGlmeTogbm90aWZ5T2JzZXJ2ZXJzLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBNb2RlbChvcHRpb25zID0ge30pIHtcclxuICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgLy8gY29uc3QgaXRlbXMgPSBbXTtcclxuICAgIHRoaXMub3B0aW9ucyA9ICFvcHRpb25zID8ge30gOiBvcHRpb25zO1xyXG4gICAgdGhpcy5tb2RlbENoYW5nZWRTdWJqZWN0ID0gTVZQLm1ha2VPYnNlcnZhYmxlU3ViamVjdCgpO1xyXG4gICAgdGhpcy5taW5WYWx1ZSA9IDA7XHJcbiAgICB0aGlzLm1heFZhbHVlID0gMzAwO1xyXG4gICAgdGhpcy5zdGVwID0gNTA7XHJcbiAgICB0aGlzLm1vZGUgPSAnaG9yaXpvbnRhbCc7XHJcbiAgICB0aGlzLnR5cGUgPSAnc2luZ2xlJztcclxuICAgIC8vIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgLy8gICBpZiAoIXZhbHVlKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGl0ZW1zLnB1c2godmFsdWUpO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5yZW1vdmVDdXJyZW50SXRlbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgaWYgKHRoYXQuc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaXRlbXMuc3BsaWNlKHRoYXQuc2VsZWN0ZWRJbmRleCwgMSk7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICByZXR1cm4gaXRlbXM7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5zZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICAvLyB0aGlzLmdldFNlbGVjdGVkSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHJldHVybiB0aGF0LnNlbGVjdGVkSW5kZXg7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gdGhpcy5zZXRTZWxlY3RlZEluZGV4ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAvLyAgIHRoYXQuc2VsZWN0ZWRJbmRleCA9IHZhbHVlO1xyXG4gICAgLy8gICB0aGF0Lm1vZGVsQ2hhbmdlZFN1YmplY3Qubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAvLyB9O1xyXG4gIH0sXHJcblxyXG4gIFZpZXcoKSB7XHJcbiAgICAvLyBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XHJcbiAgICAgIHNsaWRlckJvZHkuaW5pdCgpO1xyXG5cclxuICAgICAgY29uc3Qgc2xpZGVyVGh1bWI6IFNsaWRlclRodW1iID0gbmV3IFNsaWRlclRodW1iKCk7XHJcbiAgICAgIHNsaWRlclRodW1iLmluaXQoKTtcclxuXHJcbiAgICAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZSgpO1xyXG4gICAgICB0aXBWYWx1ZS5pbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoYXQuc2VsZWN0ID0gJCgnPHNlbGVjdC8+JykuYXBwZW5kVG8ocm9vdE9iamVjdCk7XHJcbiAgICAvLyB0aGF0LnNlbGVjdC5hdHRyKCdzaXplJywgJzQnKTtcclxuICAgIC8vIHRoYXQuYnV0dG9uQWRkID0gJCgnPGJ1dHRvbj4rPC9idXR0b24+JykuYXBwZW5kVG8ocm9vdE9iamVjdCkuaGVpZ2h0KDIwKTtcclxuICAgIC8vIHRoYXQuYnV0dG9uUmVtb3ZlID0gJCgnPGJ1dHRvbj4tPC9idXR0b24+JykuYXBwZW5kVG8ocm9vdE9iamVjdCkuaGVpZ2h0KDIwKTtcclxuICAgIC8vIG1vZGVsLm1vZGVsQ2hhbmdlZFN1YmplY3QuYWRkT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICB2YXIgaXRlbXMgPSBtb2RlbC5nZXRJdGVtcygpO1xyXG4gICAgLy8gICB2YXIgaW5uZXJIVE1MID0gJyc7XHJcbiAgICAvLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIC8vICAgICBpbm5lckhUTUwgKz0gXCI8b3B0aW9uPlwiICsgaXRlbXNbaV0gKyBcIjwvb3B0aW9uPlwiO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIHRoYXQuc2VsZWN0Lmh0bWwoaW5uZXJIVE1MKTtcclxuICAgIC8vIH0pO1xyXG4gIH0sXHJcblxyXG4gIENvbnRyb2xsZXIobW9kZWwsIHZpZXcpIHtcclxuICAgIHZpZXcuaW5pdCgpO1xyXG4gICAgLy8gdmlldy5idXR0b25BZGQuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLmFkZEl0ZW0ocHJvbXB0KCdhZGR2YWx1ZScpKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gdmlldy5idXR0b25SZW1vdmUuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLnJlbW92ZUN1cnJlbnRJdGVtKCk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHZpZXcuc2VsZWN0LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBtb2RlbC5zZXRTZWxlY3RlZEluZGV4KHZpZXcuc2VsZWN0WzBdLnNlbGVjdGVkSW5kZXgpO1xyXG4gICAgLy8gfSk7XHJcbiAgfSxcclxufTsgKi9cclxuXHJcbi8qICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICB2YXIgbW9kZWwgPSBuZXcgT01WQy5Nb2RlbCgpO1xyXG4gIHZhciB2aWV3ID0gbmV3IE9NVkMuVmlldyhtb2RlbCwgJCgnPGRpdi8+JykuYXBwZW5kVG8oJChcImJvZHlcIikpKTtcclxuICB2YXIgY29udHJvbGxlciA9IG5ldyBPTVZDLkNvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xyXG59KTsgKi9cclxuXHJcbi8vIGNvbnN0IG1vZGVsID0gbmV3IE1WUC5Nb2RlbCgpO1xyXG4vLyBjb25zdCB2aWV3ID0gbmV3IE1WUC5WaWV3KCk7XHJcbi8vIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTVZQLkNvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xyXG5cclxuLy8gY29udHJvbGxlcigpO1xyXG4iLCJpbXBvcnQgU2xpZGVyQm9keSBmcm9tICcuL3NsaWRlckJvZHknO1xyXG5pbXBvcnQgU2xpZGVyVGh1bWIgZnJvbSAnLi9zbGlkZXJUaHVtYic7XHJcbmltcG9ydCBUaXBWYWx1ZSBmcm9tICcuL3RpcFZhbHVlJztcclxuaW1wb3J0IFNjYWxlIGZyb20gJy4vc2NhbGUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XHJcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcclxuICBzbGlkZXJMaW5lSWQ6IHN0cmluZztcclxuICBfbWluVmFsdWU6IG51bWJlcjtcclxuICBfbWF4VmFsdWU6IG51bWJlcjtcclxuICBfc3RlcFZhbHVlOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBhcmVudElkPykge1xyXG4gICAgdGhpcy5fcGFyZW50SWQgPSBwYXJlbnRJZDtcclxuICB9O1xyXG5cclxuICBzaG93U2xpZGVyKCkge1xyXG4gICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KHRoaXMuX3BhcmVudElkKTtcclxuICAgIHRoaXMuc2xpZGVyTGluZUlkID0gc2xpZGVyQm9keS5pbml0KCk7XHJcbiAgICBjb25zdCBzbGlkZXJUaHVtYjogU2xpZGVyVGh1bWIgPSBuZXcgU2xpZGVyVGh1bWIodGhpcy5zbGlkZXJMaW5lSWQpO1xyXG4gICAgc2xpZGVyVGh1bWIuaW5pdCgpO1xyXG4gICAgY29uc3QgdGlwVmFsdWU6IFRpcFZhbHVlID0gbmV3IFRpcFZhbHVlKHRoaXMuc2xpZGVyTGluZUlkKTtcclxuICAgIHRpcFZhbHVlLmluaXQoKTtcclxuICB9XHJcblxyXG4gIHNob3dTY2FsZShtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIHN0ZXA6IG51bWJlcikge1xyXG4gICAgdGhpcy5fbWluVmFsdWUgPSBtaW47XHJcbiAgICB0aGlzLl9tYXhWYWx1ZSA9IG1heDtcclxuICAgIHRoaXMuX3N0ZXBWYWx1ZSA9IHN0ZXA7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgICBjb25zdCBzY2FsZTogU2NhbGUgPSBuZXcgU2NhbGUodGhpcy5fcGFyZW50SWQsIHRoaXMuX21pblZhbHVlLCB0aGlzLl9tYXhWYWx1ZSwgdGhpcy5fc3RlcFZhbHVlKTtcclxuICAgIHNjYWxlLmluaXQoKTtcclxuICB9XHJcblxyXG4gIC8vIHNsaWRlckxlbmd0aDogbnVtYmVyO1xyXG4gIC8vIGluaXQoKSB7XHJcbiAgLy8gICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAvLyAgIHNsaWRlckJvZHkuaW5pdCgpO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gZ2V0V2lkdGhTbGlkZXIoKSB7XHJcbiAgLy8gICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAvLyAgIHRoaXMuc2xpZGVyTGVuZ3RoID0gc2xpZGVyQm9keS5nZXRXaWR0aCgpO1xyXG4gIC8vICAgcmV0dXJuIHRoaXMuc2xpZGVyTGVuZ3RoO1xyXG4gIC8vIH1cclxufVxyXG4iLCIvLyBpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAnLi9hcHAnO1xuaW1wb3J0IFN1YmplY3QgZnJvbSAnLi9hcHAnO1xuaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XG5cbnR5cGUgb3B0aW9ucyA9IHtcbiAgbWluPzogbnVtYmVyO1xuICBtYXg/OiBudW1iZXI7XG4gIHN0ZXA/OiBudW1iZXI7XG4gIGtpbmQ/OiBzdHJpbmc7XG4gIGlzQmFzaWM/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kZWwgaW1wbGVtZW50cyBTdWJqZWN0IHtcbiAgcHJpdmF0ZSBfbWluOiBudW1iZXI7XG4gIHByaXZhdGUgX21heDogbnVtYmVyO1xuICBwcml2YXRlIF9zdGVwOiBudW1iZXI7XG4gIHByaXZhdGUgX2tpbmQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfaXNCYXNpYzogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9XG4gICAgdGhpcy5fbWluID0gb3B0aW9ucy5taW4gPyBvcHRpb25zLm1pbiA6IDA7XG4gICAgdGhpcy5fbWF4ID0gb3B0aW9ucy5tYXggPyBvcHRpb25zLm1heCA6IDMwMDtcbiAgICB0aGlzLl9zdGVwID0gb3B0aW9ucy5zdGVwID8gb3B0aW9ucy5zdGVwIDogNTA7XG4gICAgdGhpcy5fa2luZCA9IG9wdGlvbnMua2luZCA/IG9wdGlvbnMua2luZCA6ICdob3Jpem9udGFsJztcbiAgICB0aGlzLl9pc0Jhc2ljID0gb3B0aW9ucy5pc0Jhc2ljID8gb3B0aW9ucy5pc0Jhc2ljIDogdHJ1ZTtcbiAgICAvLyB0aGlzLm5vdGlmeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtPYnNlcnZlcltdfSDQodC/0LjRgdC+0Log0L/QvtC00L/QuNGB0YfQuNC60L7Qsi4g0JIg0YDQtdCw0LvRjNC90L7QuSDQttC40LfQvdC4INGB0L/QuNGB0L7QulxuICAgKiDQv9C+0LTQv9C40YHRh9C40LrQvtCyINC80L7QttC10YIg0YXRgNCw0L3QuNGC0YzRgdGPINCyINCx0L7Qu9C10LUg0L/QvtC00YDQvtCx0L3QvtC8INCy0LjQtNC1ICjQutC70LDRgdGB0LjRhNC40YbQuNGA0YPQtdGC0YHRjyDQv9C+XG4gICAqINGC0LjQv9GDINGB0L7QsdGL0YLQuNGPINC4INGCLtC0LilcbiAgICovXG4gIHByaXZhdGUgb2JzZXJ2ZXJzOiBPYnNlcnZlcltdID0gW107XG5cbiAgLyoqXG4gICAqINCc0LXRgtC+0LTRiyDRg9C/0YDQsNCy0LvQtdC90LjRjyDQv9C+0LTQv9C40YHQutC+0LkuXG4gICAqL1xuICBwdWJsaWMgYXR0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xuICAgIGNvbnN0IGlzRXhpc3QgPSB0aGlzLm9ic2VydmVycy5pbmNsdWRlcyhvYnNlcnZlcik7XG4gICAgaWYgKGlzRXhpc3QpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZygnTW9kZWw6IFByZXNlbnRlciBoYXMgYmVlbiBhdHRhY2hlZCBhbHJlYWR5LicpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdNb2RlbDogQXR0YWNoZWQgYSBwcmVzZW50ZXIuJyk7XG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gIH1cblxuICBwdWJsaWMgZGV0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xuICAgIGNvbnN0IG9ic2VydmVySW5kZXggPSB0aGlzLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcbiAgICBpZiAob2JzZXJ2ZXJJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZygnU3ViamVjdDogTm9uZXhpc3RlbnQgb2JzZXJ2ZXIuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5vYnNlcnZlcnMuc3BsaWNlKG9ic2VydmVySW5kZXgsIDEpO1xuICAgIGNvbnNvbGUubG9nKCdTdWJqZWN0OiBEZXRhY2hlZCBhbiBvYnNlcnZlci4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQl9Cw0L/Rg9GB0Log0L7QsdC90L7QstC70LXQvdC40Y8g0LIg0LrQsNC20LTQvtC8INC/0L7QtNC/0LjRgdGH0LjQutC1LlxuICAgKi9cbiAgcHVibGljIG5vdGlmeSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnTW9kZWw6IE5vdGlmeWluZyBvYnNlcnZlcnMuLi4nKTtcbiAgICBmb3IgKGNvbnN0IG9ic2VydmVyIG9mIHRoaXMub2JzZXJ2ZXJzKSB7XG4gICAgICBvYnNlcnZlci51cGRhdGUodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgY2FsY1VuaXQoKSB7XG4gICAgY29uc29sZS5sb2coYE1vZGVsOiBNeSBzdGF0ZSBoYXMganVzdCBjaGFuZ2VkYCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWluOiB0aGlzLl9taW4sXG4gICAgICBtYXg6IHRoaXMuX21heCxcbiAgICAgIHN0ZXA6IHRoaXMuX3N0ZXBcbiAgICB9O1xuICB9XG59XG4iLCIvLyBpbXBvcnQgeyBTdWJqZWN0LCBDb25jcmV0ZVN1YmplY3QgfSBmcm9tICcuL2FwcCc7XG5pbXBvcnQgU3ViamVjdCBmcm9tICcuL2FwcCc7XG5pbXBvcnQgU2xpZGVyQm9keSBmcm9tICcuL3NsaWRlckJvZHknO1xuaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kZWwnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi92aWV3Jztcbi8qKlxuKiDQmNC90YLQtdGA0YTQtdC50YEg0J3QsNCx0LvRjtC00LDRgtC10LvRjyDQvtCx0YrRj9Cy0LvRj9C10YIg0LzQtdGC0L7QtCDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPLCDQutC+0YLQvtGA0YvQuSDQuNC30LTQsNGC0LXQu9C4XG4qINC40YHQv9C+0LvRjNC30YPRjtGCINC00LvRjyDQvtC/0L7QstC10YnQtdC90LjRjyDRgdCy0L7QuNGFINC/0L7QtNC/0LjRgdGH0LjQutC+0LIuXG4qL1xuaW50ZXJmYWNlIE9ic2VydmVyIHtcbiAgLy8g0J/QvtC70YPRh9C40YLRjCDQvtCx0L3QvtCy0LvQtdC90LjQtSDQvtGCINGB0YPQsdGK0LXQutGC0LAuXG4gIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZDtcbn1cblxuLyoqXG4qINCa0L7QvdC60YDQtdGC0L3Ri9C1INCd0LDQsdC70Y7QtNCw0YLQtdC70Lgg0YDQtdCw0LPQuNGA0YPRjtGCINC90LAg0L7QsdC90L7QstC70LXQvdC40Y8sINCy0YvQv9GD0YnQtdC90L3Ri9C1INCY0LfQtNCw0YLQtdC70LXQvCwg0Lpcbiog0LrQvtGC0L7RgNC+0LzRgyDQvtC90Lgg0L/RgNC40LrRgNC10L/Qu9C10L3Riy5cbiovXG4vLyBjbGFzcyBDb25jcmV0ZU9ic2VydmVyQSBpbXBsZW1lbnRzIE9ic2VydmVyIHtcbi8vICAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XG4vLyAgICAgaWYgKHN1YmplY3QgaW5zdGFuY2VvZiBDb25jcmV0ZVN1YmplY3QgJiYgc3ViamVjdC5zdGF0ZSA8IDMpIHtcbi8vICAgICAgIGNvbnNvbGUubG9nKCdDb25jcmV0ZU9ic2VydmVyQTogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XG4vLyAgICAgfVxuLy8gICB9XG4vLyB9XG5cbmNsYXNzIFByZXNlbnRlciBpbXBsZW1lbnRzIE9ic2VydmVyIHtcbiAgbW9kZWxPcHRpb25zOiB7bWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBzdGVwOiBudW1iZXJ9O1xuXG4gIHRyYW5zZmVyTW9kZWxEYXRhKG1vZGVsOiBNb2RlbCwgdmlldzogVmlldykge1xuICAgIHRoaXMubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLm1vZGVsT3B0aW9ucyk7XG4gICAgdmlldy5zaG93U2NhbGUodGhpcy5tb2RlbE9wdGlvbnMubWluLCB0aGlzLm1vZGVsT3B0aW9ucy5tYXgsIHRoaXMubW9kZWxPcHRpb25zLnN0ZXApO1xuICAgIC8vIGNvbnNvbGUubG9nKCdNb2RlbE9ic2VydmVyOiBSZWFjdGVkIHRvIHRoZSBldmVudC4nKTtcbiAgICAvLyBpZiAobW9kZWwgaW5zdGFuY2VvZiBNb2RlbCkge1xuICAgIC8vICAgdGhpcy5tb2RlbE9wdGlvbnMgPSBtb2RlbC5jYWxjVW5pdCgpO1xuICAgIC8vICAgY29uc29sZS5sb2codGhpcy5tb2RlbE9wdGlvbnMpO1xuICAgICAgLy8gY29uc3QgdmlldyA9IG5ldyBWaWV3KCk7XG4gICAgICAvLyB2aWV3LnNob3dTY2FsZSh0aGlzLm1vZGVsT3B0aW9ucy5taW4sIHRoaXMubW9kZWxPcHRpb25zLm1heCwgdGhpcy5tb2RlbE9wdGlvbnMuc3RlcCk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnTW9kZWxPYnNlcnZlcjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XG4gICAgLy8gfVxuICB9XG5cbiAgLy8gdHJhbnNmZXIoKSB7XG4gIC8vICAgY29uc3QgdmlldzogVmlldyA9IG5ldyBWaWV3KCk7XG4gICAgLy8gcmV0dXJuIHZpZXcuZ2V0V2lkdGhTbGlkZXIoKTtcbiAgLy8gfVxuXG4gIHVwZGF0ZShtb2RlbDogTW9kZWwpIHtcbiAgICBjb25zb2xlLmxvZygnTW9kZWxPYnNlcnZlcjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XG4gICAgLy8gaWYgKG1vZGVsIGluc3RhbmNlb2YgTW9kZWwpIHtcbiAgICAvLyAgIHRoaXMubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcbiAgICAvLyAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWxPcHRpb25zKTtcbiAgICAvLyAgIGNvbnN0IHZpZXcgPSBuZXcgVmlldygpO1xuICAgIC8vICAgdmlldy5zaG93U2NhbGUodGhpcy5tb2RlbE9wdGlvbnMubWluLCB0aGlzLm1vZGVsT3B0aW9ucy5tYXgsIHRoaXMubW9kZWxPcHRpb25zLnN0ZXApO1xuICAgIC8vICAgY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xuICAgIC8vIH1cbiAgfVxufVxuXG4vLyBjbGFzcyBWaWV3T2JzZXJ2ZXIgaW1wbGVtZW50cyBPYnNlcnZlciB7XG4vLyAgIHVwZGF0ZSh2aWV3KSB7XG5cbi8vICAgfVxuLy8gfVxuXG4vLyBjbGFzcyBDb25jcmV0ZU9ic2VydmVyQiBpbXBsZW1lbnRzIE9ic2VydmVyIHtcbi8vICAgaXNTdWJqZWN0U2F0aXNmaWVzKHN1YmplY3QpIHtcbi8vICAgICByZXR1cm4gc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiAoc3ViamVjdC5zdGF0ZSA9PT0gMCB8fCBzdWJqZWN0LnN0YXRlID49IDIpO1xuLy8gICB9XG5cbi8vICAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XG4vLyAgICAgaWYgKHRoaXMuaXNTdWJqZWN0U2F0aXNmaWVzKHN1YmplY3QpKSB7XG4vLyAgICAgICBjb25zb2xlLmxvZygnQ29uY3JldGVPYnNlcnZlckI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xuLy8gICAgIH1cbi8vICAgfVxuLy8gfVxuXG4vLyBleHBvcnQgeyBPYnNlcnZlciwgQ29uY3JldGVPYnNlcnZlckEsIENvbmNyZXRlT2JzZXJ2ZXJCLCBQcmVzZW50ZXIgfTtcbmV4cG9ydCB7IE9ic2VydmVyLCBQcmVzZW50ZXIgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=