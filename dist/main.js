!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist",i(i.s=4)}([function(e,t,i){var n=i(1),s=i(2);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var r={insert:"head",singleton:!1};n(s,r);e.exports=s.locals||{}},function(e,t,i){"use strict";var n,s=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),o=[];function a(e){for(var t=-1,i=0;i<o.length;i++)if(o[i].identifier===e){t=i;break}return t}function l(e,t){for(var i={},n=[],s=0;s<e.length;s++){var r=e[s],l=t.base?r[0]+t.base:r[0],c=i[l]||0,d="".concat(l," ").concat(c);i[l]=c+1;var u=a(d),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(o[u].references++,o[u].updater(h)):o.push({identifier:d,updater:b(h,t),references:1}),n.push(d)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var s=i.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=r(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,i,n){var s=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,s);else{var r=document.createTextNode(s),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function m(e,t,i){var n=i.css,s=i.media,r=i.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),r&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,p=0;function b(e,t){var i,n,s;if(t.singleton){var r=p++;i=f||(f=c(t)),n=h.bind(null,i,r,!1),s=h.bind(null,i,r,!0)}else i=c(t),n=m.bind(null,i,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var i=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var s=a(i[n]);o[s].references--}for(var r=l(e,t),c=0;c<i.length;c++){var d=a(i[c]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}i=r}}}},function(e,t,i){},,function(e,t,i){"use strict";i.r(t);i(0);var n=function(){const e=document.getElementById("slider-body"),t=document.getElementById("slider-thumb"),i=document.getElementById("tip-value"),n=t.offsetWidth/2;function s(s){let r=s.clientX-e.getBoundingClientRect().left-n;r<-n&&(r=-n);const o=e.offsetWidth-n;var a;r>o&&(r=o),t.style.left=r+"px",i.textContent=""+(r+n),i.style.left=r-(i.offsetWidth-t.offsetWidth)/2+"px",a=r+n,e.style.background=`linear-gradient(to right, red ${a}px, #e5e5e5 ${a}px)`}function r(){document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",s)}i.textContent=""+(Number(getComputedStyle(t).left.slice(0,-2))+n),t.addEventListener("mousedown",(function(e){e.preventDefault(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",r)})),e.addEventListener("click",s),t.addEventListener("dragstart",(function(){return!1}))};class s{constructor(e){this.sliderLine="slider-body",this._parentId=e}init(){return this.container=document.getElementById(this._parentId),this.container.style.padding="50px 20px 20px",this.bodySlider=document.createElement("DIV"),this.bodySlider.classList.add("slider-body"),this.bodySlider.setAttribute("id",this.sliderLine),this.container.append(this.bodySlider),this.sliderLine}destroy(){this.bodySlider.remove()}}class r{constructor(e){this._selector=e}init(){this.container=document.querySelector(this._selector),this.thumbSlider=document.createElement("DIV"),this.thumbSlider.classList.add("slider-thumb"),this.thumbSlider.setAttribute("id","slider-thumb"),this.container.append(this.thumbSlider)}destroy(){this.thumbSlider.remove()}}class o{constructor(e){this._selector=e}init(){this.container=document.querySelector(this._selector),this.tipValue=document.createElement("DIV"),this.tipValue.classList.add("tip-value"),this.tipValue.setAttribute("id","tip-value"),this.container.append(this.tipValue)}destroy(){this.tipValue.remove()}}class a{constructor(e,t,i,n){this._parentId=e,this._min=t,this._max=i,this._step=n,this.scale=document.createElement("DIV"),this.scale.classList.add("scale"),this.min=document.createElement("SPAN"),this.min.textContent=""+this._min,this.min.style.position="absolute",this.max=document.createElement("SPAN"),this.max.textContent=""+this._max,this.max.style.position="absolute"}init(){this.container=document.getElementById(this._parentId),this.container.append(this.scale),this.scale.append(this.min),this.scale.append(this.max),this.min.style.left=this.scale.offsetLeft-this.min.offsetWidth/2+"px",this.max.style.left=this.scale.offsetWidth+this.scale.offsetLeft-this.max.offsetWidth/2+"px",this.mark=(this._max-this._min)/this._step;for(let e=1;e<this.mark;e++)this.elem=document.createElement("SPAN"),this.elem.textContent=""+(this._step*e+this._min),this.elem.style.position="absolute",this.max.insertAdjacentElement("beforebegin",this.elem),(Number(this.elem.textContent)<100||Number(this.elem.textContent)<1e3)&&(this.elem.style.left=(Number(this.elem.textContent)-this._min)*this.scale.offsetWidth/(this._max-this._min)+this.scale.offsetLeft-this.elem.offsetWidth/2+"px")}destroy(){this.scale.remove()}}class l{constructor(e){this._parentId=e}showSlider(){const e=new s(this._parentId);this.sliderLineId=e.init();new r(`#${this._parentId} > #${this.sliderLineId}`).init();new o(`#${this._parentId} > #${this.sliderLineId}`).init()}showScale(e,t,i){this._minValue=e,this._maxValue=t,this._stepValue=i;new a(this._parentId,this._minValue,this._maxValue,this._stepValue).init()}}const c=new l("range-slider");c.showSlider();const d=new class{constructor(e){this.observers=[],e||(e={}),this._min=e.min?e.min:0,this._max=e.max?e.max:300,this._step=e.step?e.step:50,this._kind=e.kind?e.kind:"horizontal",this._isBasic=!e.isBasic||e.isBasic}attach(e){if(this.observers.includes(e))return console.log("Model: Presenter has been attached already.");console.log("Model: Attached a presenter."),this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Subject: Nonexistent observer.");this.observers.splice(t,1),console.log("Subject: Detached an observer.")}notify(){console.log("Model: Notifying observers...");for(const e of this.observers)e.update(this)}calcUnit(){return{min:this._min,max:this._max,step:this._step}}}({min:40,step:60,max:260}),u=new class{transferModelData(e,t){this.modelOptions=e.calcUnit(),console.log(this.modelOptions),t.showScale(this.modelOptions.min,this.modelOptions.max,this.modelOptions.step)}update(e){console.log("ModelObserver: Reacted to the event.")}};d.attach(u),u.transferModelData(d,c),n();new l("slider2").showSlider()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/MjFiYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NsaWRlckJvZHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2xpZGVyVGh1bWIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdGlwVmFsdWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2NhbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvcHJlc2VudGVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYXBpIiwiY29udGVudCIsImRlZmF1bHQiLCJvcHRpb25zIiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibGVuZ3RoIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjb3VudCIsImNvbmNhdCIsImluZGV4Iiwib2JqIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsInB1c2giLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJqb2luIiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsInJlbW92ZSIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsInRvU3RyaW5nIiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJzcGxpY2UiLCJzbGlkZXIiLCJnZXRFbGVtZW50QnlJZCIsInRodW1iIiwidGlwIiwiZGVsdGEiLCJvZmZzZXRXaWR0aCIsIm9uTW91c2VNb3ZlIiwiZXZlbnQiLCJ0aHVtYlBvaW50IiwiY2xpZW50WCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJyaWdodEVkZ2UiLCJ0ZXh0Q29udGVudCIsImJhY2tncm91bmQiLCJvbk1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiTnVtYmVyIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInNsaWNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiU2xpZGVyQm9keSIsInBhcmVudElkIiwic2xpZGVyTGluZSIsInRoaXMiLCJfcGFyZW50SWQiLCJjb250YWluZXIiLCJwYWRkaW5nIiwiYm9keVNsaWRlciIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZCIsIlNsaWRlclRodW1iIiwic2VsZWN0b3IiLCJfc2VsZWN0b3IiLCJ0aHVtYlNsaWRlciIsIlRpcFZhbHVlIiwidGlwVmFsdWUiLCJTY2FsZSIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJzdGVwVmFsdWUiLCJfbWluIiwiX21heCIsIl9zdGVwIiwic2NhbGUiLCJtaW4iLCJwb3NpdGlvbiIsIm1heCIsIm9mZnNldExlZnQiLCJtYXJrIiwiZWxlbSIsImluc2VydEFkamFjZW50RWxlbWVudCIsInNsaWRlckJvZHkiLCJzbGlkZXJMaW5lSWQiLCJpbml0Iiwic3RlcCIsIl9taW5WYWx1ZSIsIl9tYXhWYWx1ZSIsIl9zdGVwVmFsdWUiLCJ2aWV3Iiwic2hvd1NsaWRlciIsIm1vZGVsIiwib2JzZXJ2ZXJzIiwiX2tpbmQiLCJraW5kIiwiX2lzQmFzaWMiLCJpc0Jhc2ljIiwib2JzZXJ2ZXIiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJsb2ciLCJvYnNlcnZlckluZGV4IiwiaW5kZXhPZiIsInByZXNlbnRlciIsIm1vZGVsT3B0aW9ucyIsImNhbGNVbml0Iiwic2hvd1NjYWxlIiwiYXR0YWNoIiwidHJhbnNmZXJNb2RlbERhdGEiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUs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QVVyRCxLQUFLbUQsYUFBYTdCLElBQUt0QixLQUFLbUQsYUFBYTNCLElBQUt4QixLQUFLbUQsYUFBYW5CLE1BZ0JqRixPQUFPTSxHQUNMUSxRQUFRQyxJQUFJLDBDRnZCaEJULEVBQU1nQixPQUFPSixHQUdiQSxFQUFVSyxrQkFBa0JqQixFQUFPRixHQVFuQzdELElBRW9CLElBQUksRUFBSyxXQUN2QjhEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0XCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLnNjc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsImZ1bmN0aW9uIHNsaWRlclJ1bigpIHtcclxuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLWJvZHknKTtcclxuICBjb25zdCB0aHVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXItdGh1bWInKTtcclxuICBjb25zdCB0aXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGlwLXZhbHVlJyk7XHJcblxyXG4gIGNvbnN0IGRlbHRhID0gdGh1bWIub2Zmc2V0V2lkdGggLyAyO1xyXG4gIHRpcC50ZXh0Q29udGVudCA9IGAke051bWJlcihnZXRDb21wdXRlZFN0eWxlKHRodW1iKS5sZWZ0LnNsaWNlKDAsIC0yKSkgKyBkZWx0YX1gO1xyXG5cclxuICBmdW5jdGlvbiBmaWxsU2xpZGVyTGluZShsZW5ndGgpIHtcclxuICAgIHNsaWRlci5zdHlsZS5iYWNrZ3JvdW5kID0gYGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmVkICR7bGVuZ3RofXB4LCAjZTVlNWU1ICR7bGVuZ3RofXB4KWA7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgbGV0IHRodW1iUG9pbnQgPSBldmVudC5jbGllbnRYIC0gc2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBkZWx0YTtcclxuXHJcbiAgICAvLyDQutGD0YDRgdC+0YAg0LLRi9GI0LXQuyDQuNC3INGB0LvQsNC50LTQtdGA0LAgPT4g0L7RgdGC0LDQstC40YLRjCDQsdC10LPRg9C90L7QuiDQsiDQtdCz0L4g0LPRgNCw0L3QuNGG0LDRhS5cclxuICAgIGlmICh0aHVtYlBvaW50IDwgLWRlbHRhKSB7XHJcbiAgICAgIHRodW1iUG9pbnQgPSAtZGVsdGE7XHJcbiAgICB9XHJcbiAgICBjb25zdCByaWdodEVkZ2UgPSBzbGlkZXIub2Zmc2V0V2lkdGggLSBkZWx0YTtcclxuICAgIGlmICh0aHVtYlBvaW50ID4gcmlnaHRFZGdlKSB7XHJcbiAgICAgIHRodW1iUG9pbnQgPSByaWdodEVkZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgdGh1bWIuc3R5bGUubGVmdCA9IGAke3RodW1iUG9pbnR9cHhgO1xyXG4gICAgdGlwLnRleHRDb250ZW50ID0gYCR7dGh1bWJQb2ludCArIGRlbHRhfWA7XHJcbiAgICB0aXAuc3R5bGUubGVmdCA9IGAke3RodW1iUG9pbnQgLSAodGlwLm9mZnNldFdpZHRoIC0gdGh1bWIub2Zmc2V0V2lkdGgpIC8gMn1weGA7XHJcbiAgICBmaWxsU2xpZGVyTGluZSh0aHVtYlBvaW50ICsgZGVsdGEpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25Nb3VzZVVwKCk6IHZvaWQge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbk1vdXNlRG93bihldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xyXG4gIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uTW91c2VNb3ZlKTtcclxuICB0aHVtYi5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCByZXR1cm5GYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNsaWRlclJ1bjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVyQm9keSB7XHJcbiAgcHJpdmF0ZSBfcGFyZW50SWQ6IHN0cmluZztcclxuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIGJvZHlTbGlkZXI6IEhUTUxFbGVtZW50O1xyXG4gIHNsaWRlckxpbmUgPSAnc2xpZGVyLWJvZHknO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJlbnRJZCkge1xyXG4gICAgdGhpcy5fcGFyZW50SWQgPSBwYXJlbnRJZDtcclxuICB9O1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzUwcHggMjBweCAyMHB4JztcclxuICAgIHRoaXMuYm9keVNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgdGhpcy5ib2R5U2xpZGVyLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1ib2R5Jyk7XHJcbiAgICB0aGlzLmJvZHlTbGlkZXIuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuc2xpZGVyTGluZSk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5ib2R5U2xpZGVyKTtcclxuICAgIHJldHVybiB0aGlzLnNsaWRlckxpbmU7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgdGhpcy5ib2R5U2xpZGVyLnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJUaHVtYiB7XHJcbiAgcHJpdmF0ZSBfc2VsZWN0b3I6IHN0cmluZztcclxuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHRodW1iU2xpZGVyOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3I6IHN0cmluZykge1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICB9O1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKTtcclxuICAgIHRoaXMudGh1bWJTbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcclxuICAgIHRoaXMudGh1bWJTbGlkZXIuY2xhc3NMaXN0LmFkZCgnc2xpZGVyLXRodW1iJyk7XHJcbiAgICB0aGlzLnRodW1iU2xpZGVyLnNldEF0dHJpYnV0ZSgnaWQnLCAnc2xpZGVyLXRodW1iJyk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy50aHVtYlNsaWRlcik7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgdGhpcy50aHVtYlNsaWRlci5yZW1vdmUoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGlwVmFsdWUge1xyXG4gIHByaXZhdGUgX3NlbGVjdG9yOiBzdHJpbmc7XHJcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICB0aXBWYWx1ZTogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgfTtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3Rvcik7XHJcbiAgICB0aGlzLnRpcFZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICB0aGlzLnRpcFZhbHVlLmNsYXNzTGlzdC5hZGQoJ3RpcC12YWx1ZScpO1xyXG4gICAgdGhpcy50aXBWYWx1ZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpcC12YWx1ZScpO1xyXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMudGlwVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMudGlwVmFsdWUucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjYWxlIHtcclxuICBwcml2YXRlIF9wYXJlbnRJZDogc3RyaW5nO1xyXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhbmdlLXNsaWRlcicpO1xyXG4gIF9taW46IG51bWJlcjtcclxuICBfbWF4OiBudW1iZXI7XHJcbiAgX3N0ZXA6IG51bWJlcjtcclxuICBtYXJrOiBudW1iZXI7XHJcblxyXG4gIC8vIG1heFZhbHVlID0gMzAwO1xyXG4gIC8vIHN0ZXAgPSA1MDtcclxuICAvLyBtYXJrID0gKHRoaXMuX21heCAtIHRoaXMuX21pbikgLyB0aGlzLl9zdGVwO1xyXG4gIHNjYWxlOiBIVE1MRWxlbWVudDtcclxuICBtaW46IEhUTUxFbGVtZW50O1xyXG4gIG1heDogSFRNTEVsZW1lbnQ7XHJcbiAgZWxlbTogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBhcmVudElkOiBzdHJpbmcsIG1pblZhbHVlOiBudW1iZXIsIG1heFZhbHVlOiBudW1iZXIsIHN0ZXBWYWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9wYXJlbnRJZCA9IHBhcmVudElkO1xyXG4gICAgdGhpcy5fbWluID0gbWluVmFsdWU7XHJcbiAgICB0aGlzLl9tYXggPSBtYXhWYWx1ZTtcclxuICAgIHRoaXMuX3N0ZXAgPSBzdGVwVmFsdWU7XHJcbiAgICB0aGlzLnNjYWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICB0aGlzLnNjYWxlLmNsYXNzTGlzdC5hZGQoJ3NjYWxlJyk7XHJcbiAgICB0aGlzLm1pbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcclxuICAgIHRoaXMubWluLnRleHRDb250ZW50ID0gYCR7dGhpcy5fbWlufWA7XHJcbiAgICB0aGlzLm1pbi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAvLyB0aGlzLm1pbi5zdHlsZS5sZWZ0ID0gJzI0cHgnO1xyXG4gICAgdGhpcy5tYXggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTUEFOJyk7XHJcbiAgICB0aGlzLm1heC50ZXh0Q29udGVudCA9IGAke3RoaXMuX21heH1gO1xyXG4gICAgdGhpcy5tYXguc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgLy8gdGhpcy5tYXguc3R5bGUubGVmdCA9ICczMTZweCc7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5zY2FsZSk7XHJcbiAgICB0aGlzLnNjYWxlLmFwcGVuZCh0aGlzLm1pbik7XHJcbiAgICB0aGlzLnNjYWxlLmFwcGVuZCh0aGlzLm1heCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1pbi5vZmZzZXRXaWR0aCk7XHJcbiAgICAvLyB0aGlzLm1pbi5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5zY2FsZS5vZmZzZXRMZWZ0IC0gdGhpcy5taW4ub2Zmc2V0V2lkdGggLyAyfXB4YDtcclxuICAgIHRoaXMubWluLnN0eWxlLmxlZnQgPSBgJHt0aGlzLnNjYWxlLm9mZnNldExlZnQgLSB0aGlzLm1pbi5vZmZzZXRXaWR0aCAvIDJ9cHhgO1xyXG4gICAgLy8gdGhpcy5tYXguc3R5bGUubGVmdCA9IGAke3RoaXMuc2NhbGUub2Zmc2V0V2lkdGggKyAxNn1weGA7XHJcbiAgICB0aGlzLm1heC5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5zY2FsZS5vZmZzZXRXaWR0aCArIHRoaXMuc2NhbGUub2Zmc2V0TGVmdCAtIHRoaXMubWF4Lm9mZnNldFdpZHRoIC8gMn1weGA7XHJcbiAgICB0aGlzLm1hcmsgPSAodGhpcy5fbWF4IC0gdGhpcy5fbWluKSAvIHRoaXMuX3N0ZXA7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNjYWxlLm9mZnNldExlZnQpO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5zY2FsZS5vZmZzZXRXaWR0aCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1hcmspO1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLm1hcms7IGkrKykge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZygnbG9vcCBmb3InKTtcclxuICAgICAgdGhpcy5lbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xyXG4gICAgICB0aGlzLmVsZW0udGV4dENvbnRlbnQgPSBgJHt0aGlzLl9zdGVwICogaSArIHRoaXMuX21pbn1gO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsZW0udGV4dENvbnRlbnQpO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICB0aGlzLm1heC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWJlZ2luJywgdGhpcy5lbGVtKTtcclxuICAgICAgaWYgKE51bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpIDwgMTAwKSB7XHJcbiAgICAgICAgLy8gdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBgJHtOdW1iZXIodGhpcy5lbGVtLnRleHRDb250ZW50KSAqIHRoaXMuc2NhbGUub2Zmc2V0V2lkdGggLyB0aGlzLl9tYXggKyAyMH1weGA7XHJcbiAgICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBgJHsoKE51bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpIC0gdGhpcy5fbWluKSAqIHRoaXMuc2NhbGUub2Zmc2V0V2lkdGggLyAodGhpcy5fbWF4IC0gdGhpcy5fbWluKSkgKyB0aGlzLnNjYWxlLm9mZnNldExlZnQgLSB0aGlzLmVsZW0ub2Zmc2V0V2lkdGggLyAyfXB4YDtcclxuICAgICAgfSBlbHNlIGlmIChOdW1iZXIodGhpcy5lbGVtLnRleHRDb250ZW50KSA8IDEwMDApIHtcclxuICAgICAgICAvLyB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IGAke051bWJlcih0aGlzLmVsZW0udGV4dENvbnRlbnQpICogdGhpcy5zY2FsZS5vZmZzZXRXaWR0aCAvIHRoaXMuX21heCArIDE2fXB4YDtcclxuICAgICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IGAkeygoTnVtYmVyKHRoaXMuZWxlbS50ZXh0Q29udGVudCkgLSB0aGlzLl9taW4pICogdGhpcy5zY2FsZS5vZmZzZXRXaWR0aCAvICh0aGlzLl9tYXggLSB0aGlzLl9taW4pKSArIHRoaXMuc2NhbGUub2Zmc2V0TGVmdCAtIHRoaXMuZWxlbS5vZmZzZXRXaWR0aCAvIDJ9cHhgO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHRoaXMubWF4Lmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlYmVnaW4nLCB0aGlzLmVsZW0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMuc2NhbGUucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBTbGlkZXJCb2R5IGZyb20gJy4vc2xpZGVyQm9keSc7XHJcbmltcG9ydCBTbGlkZXJUaHVtYiBmcm9tICcuL3NsaWRlclRodW1iJztcclxuaW1wb3J0IFRpcFZhbHVlIGZyb20gJy4vdGlwVmFsdWUnO1xyXG5pbXBvcnQgU2NhbGUgZnJvbSAnLi9zY2FsZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcclxuICBwcml2YXRlIF9wYXJlbnRJZDogc3RyaW5nO1xyXG4gIHNsaWRlckxpbmVJZDogc3RyaW5nO1xyXG4gIF9taW5WYWx1ZTogbnVtYmVyO1xyXG4gIF9tYXhWYWx1ZTogbnVtYmVyO1xyXG4gIF9zdGVwVmFsdWU6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IocGFyZW50SWQpIHtcclxuICAgIHRoaXMuX3BhcmVudElkID0gcGFyZW50SWQ7XHJcbiAgfTtcclxuXHJcbiAgc2hvd1NsaWRlcigpIHtcclxuICAgIGNvbnN0IHNsaWRlckJvZHk6IFNsaWRlckJvZHkgPSBuZXcgU2xpZGVyQm9keSh0aGlzLl9wYXJlbnRJZCk7XHJcbiAgICB0aGlzLnNsaWRlckxpbmVJZCA9IHNsaWRlckJvZHkuaW5pdCgpO1xyXG4gICAgY29uc3Qgc2xpZGVyVGh1bWI6IFNsaWRlclRodW1iID0gbmV3IFNsaWRlclRodW1iKGAjJHt0aGlzLl9wYXJlbnRJZH0gPiAjJHt0aGlzLnNsaWRlckxpbmVJZH1gKTtcclxuICAgIHNsaWRlclRodW1iLmluaXQoKTtcclxuICAgIGNvbnN0IHRpcFZhbHVlOiBUaXBWYWx1ZSA9IG5ldyBUaXBWYWx1ZShgIyR7dGhpcy5fcGFyZW50SWR9ID4gIyR7dGhpcy5zbGlkZXJMaW5lSWR9YCk7XHJcbiAgICB0aXBWYWx1ZS5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBzaG93U2NhbGUobWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBzdGVwOiBudW1iZXIpIHtcclxuICAgIHRoaXMuX21pblZhbHVlID0gbWluO1xyXG4gICAgdGhpcy5fbWF4VmFsdWUgPSBtYXg7XHJcbiAgICB0aGlzLl9zdGVwVmFsdWUgPSBzdGVwO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5fcGFyZW50SWQpO1xyXG4gICAgY29uc3Qgc2NhbGU6IFNjYWxlID0gbmV3IFNjYWxlKHRoaXMuX3BhcmVudElkLCB0aGlzLl9taW5WYWx1ZSwgdGhpcy5fbWF4VmFsdWUsIHRoaXMuX3N0ZXBWYWx1ZSk7XHJcbiAgICBzY2FsZS5pbml0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBzbGlkZXJMZW5ndGg6IG51bWJlcjtcclxuICAvLyBpbml0KCkge1xyXG4gIC8vICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XHJcbiAgLy8gICBzbGlkZXJCb2R5LmluaXQoKTtcclxuICAvLyB9XHJcblxyXG4gIC8vIGdldFdpZHRoU2xpZGVyKCkge1xyXG4gIC8vICAgY29uc3Qgc2xpZGVyQm9keTogU2xpZGVyQm9keSA9IG5ldyBTbGlkZXJCb2R5KCk7XHJcbiAgLy8gICB0aGlzLnNsaWRlckxlbmd0aCA9IHNsaWRlckJvZHkuZ2V0V2lkdGgoKTtcclxuICAvLyAgIHJldHVybiB0aGlzLnNsaWRlckxlbmd0aDtcclxuICAvLyB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xyXG5cclxuaW1wb3J0IHNsaWRlclJ1biBmcm9tICcuL21vZHVsZXMvc2xpZGVyJztcclxuLy8gaW1wb3J0IFNjYWxlIGZyb20gJy4vbW9kdWxlcy9zY2FsZSc7XHJcbi8vIGltcG9ydCB7IENvbmNyZXRlU3ViamVjdCB9IGZyb20gJy4vbW9kdWxlcy9hcHAnO1xyXG5pbXBvcnQgVmlldyBmcm9tICcuL21vZHVsZXMvdmlldyc7XHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZHVsZXMvbW9kZWwnO1xyXG4vLyBpbXBvcnQgeyBDb25jcmV0ZU9ic2VydmVyQSwgQ29uY3JldGVPYnNlcnZlckIsIFByZXNlbnRlciB9IGZyb20gJy4vbW9kdWxlcy9wcmVzZW50ZXInO1xyXG5pbXBvcnQgeyBQcmVzZW50ZXIgfSBmcm9tICcuL21vZHVsZXMvcHJlc2VudGVyJztcclxuXHJcbmNvbnN0IHZpZXc6IFZpZXcgPSBuZXcgVmlldygncmFuZ2Utc2xpZGVyJyk7XHJcbnZpZXcuc2hvd1NsaWRlcigpO1xyXG5cclxuXHJcbi8vIGNvbnN0IHNsaWRlcjI6IFZpZXcgPSBuZXcgVmlldygpO1xyXG4vLyBzbGlkZXIyLmhpZGUoKTtcclxuLy8gY29uc3Qgc2xpZGVyMzogVmlldyA9IG5ldyBWaWV3KCcnKTtcclxuLy8gc2xpZGVyMy5oaWRlKCk7XHJcblxyXG5jb25zdCBtb2RlbCA9IG5ldyBNb2RlbCh7XHJcbiAgbWluOiA0MCxcclxuICBzdGVwOiA2MCxcclxuICBtYXg6IDI2MFxyXG59KTtcclxuXHJcbmNvbnN0IHByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIoKTtcclxubW9kZWwuYXR0YWNoKHByZXNlbnRlcik7XHJcblxyXG4vLyBwcmVzZW50ZXIubW9kZWxPcHRpb25zID0gbW9kZWwuY2FsY1VuaXQoKTtcclxucHJlc2VudGVyLnRyYW5zZmVyTW9kZWxEYXRhKG1vZGVsLCB2aWV3KTtcclxuLy8gbW9kZWwuY2FsY1VuaXQoKTtcclxuXHJcbi8vIHZpZXcuc2hvd1NsaWRlcigpO1xyXG5cclxuLy8gY29uc3Qgc2NhbGU6IFNjYWxlID0gbmV3IFNjYWxlKCk7XHJcbi8vIHNjYWxlLmluaXQoKTtcclxuXHJcbnNsaWRlclJ1bigpO1xyXG5cclxuY29uc3QgdmlldzI6IFZpZXcgPSBuZXcgVmlldygnc2xpZGVyMicpO1xyXG52aWV3Mi5zaG93U2xpZGVyKCk7XHJcblxyXG4vKipcclxuKiDQmtC70LjQtdC90YLRgdC60LjQuSDQutC+0LQuXHJcbiovXHJcblxyXG4vLyBjb25zdCBzdWJqZWN0ID0gbmV3IENvbmNyZXRlU3ViamVjdCgpO1xyXG5cclxuLy8gY29uc3Qgb2JzZXJ2ZXIxID0gbmV3IENvbmNyZXRlT2JzZXJ2ZXJBKCk7XHJcbi8vIHN1YmplY3QuYXR0YWNoKG9ic2VydmVyMSk7XHJcblxyXG4vLyBjb25zdCBvYnNlcnZlcjIgPSBuZXcgQ29uY3JldGVPYnNlcnZlckIoKTtcclxuLy8gc3ViamVjdC5hdHRhY2gob2JzZXJ2ZXIyKTtcclxuXHJcbi8vIHN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuLy8gc3ViamVjdC5zb21lQnVzaW5lc3NMb2dpYygpO1xyXG5cclxuLy8gc3ViamVjdC5kZXRhY2gob2JzZXJ2ZXIyKTtcclxuXHJcbi8vIHN1YmplY3Quc29tZUJ1c2luZXNzTG9naWMoKTtcclxuXHJcbi8vIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcclxuXHJcbi8vIGNvbnN0IHRvbTogVXNlciA9IG5ldyBVc2VyKCfQotC+0LwnLCAyOSk7XHJcbi8vIGVsLmlubmVySFRNTCA9IGDQmNC80Y86ICR7dG9tLm5hbWV9INCy0L7Qt9GA0LDRgdGCOiAke3RvbS5hZ2V9YDtcclxuXHJcbi8qIGNvbnN0IE1WUCA9IHtcclxuICBtYWtlT2JzZXJ2YWJsZVN1YmplY3QoKSB7XHJcbiAgICBjb25zdCBvYnNlcnZlcnMgPSBbXTtcclxuICAgIGNvbnN0IGFkZE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgaWYgKHR5cGVvZiBvICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIGlmIChvYnNlcnZlciA9PT0gbykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBhbHJlYWR5IGluIHRoZSBsaXN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIG9ic2VydmVycy5wdXNoKG8pO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbW92ZU9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IG8pIHtcclxuICAgICAgICAgIG9ic2VydmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGZpbmQgb2JzZXJ2ZXIgaW4gbGlzdCBvZiBvYnNlcnZlcnMnKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBub3RpZnlPYnNlcnZlcnMgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAvLyBNYWtlIGEgY29weSBvZiBvYnNlcnZlciBsaXN0IGluIGNhc2UgdGhlIGxpc3RcclxuICAgICAgLy8gaXMgbXV0YXRlZCBkdXJpbmcgdGhlIG5vdGlmaWNhdGlvbnMuXHJcbiAgICAgIGNvbnN0IG9ic2VydmVyc1NuYXBzaG90ID0gb2JzZXJ2ZXJzLnNsaWNlKDApO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic2VydmVyc1NuYXBzaG90Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgb2JzZXJ2ZXJzU25hcHNob3RbaV0oZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhZGRPYnNlcnZlcixcclxuICAgICAgcmVtb3ZlT2JzZXJ2ZXIsXHJcbiAgICAgIG5vdGlmeU9ic2VydmVycyxcclxuICAgICAgbm90aWZ5OiBub3RpZnlPYnNlcnZlcnMsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIE1vZGVsKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAvLyBjb25zdCBpdGVtcyA9IFtdO1xyXG4gICAgdGhpcy5vcHRpb25zID0gIW9wdGlvbnMgPyB7fSA6IG9wdGlvbnM7XHJcbiAgICB0aGlzLm1vZGVsQ2hhbmdlZFN1YmplY3QgPSBNVlAubWFrZU9ic2VydmFibGVTdWJqZWN0KCk7XHJcbiAgICB0aGlzLm1pblZhbHVlID0gMDtcclxuICAgIHRoaXMubWF4VmFsdWUgPSAzMDA7XHJcbiAgICB0aGlzLnN0ZXAgPSA1MDtcclxuICAgIHRoaXMubW9kZSA9ICdob3Jpem9udGFsJztcclxuICAgIHRoaXMudHlwZSA9ICdzaW5nbGUnO1xyXG4gICAgLy8gdGhpcy5hZGRJdGVtID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAvLyAgIGlmICghdmFsdWUpIHtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaXRlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnJlbW92ZUN1cnJlbnRJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICBpZiAodGhhdC5zZWxlY3RlZEluZGV4ID09PSAtMSkge1xyXG4gICAgLy8gICAgIHJldHVybjtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpdGVtcy5zcGxpY2UodGhhdC5zZWxlY3RlZEluZGV4LCAxKTtcclxuICAgIC8vICAgdGhhdC5tb2RlbENoYW5nZWRTdWJqZWN0Lm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIHRoaXMuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHJldHVybiBpdGVtcztcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgIC8vIHRoaXMuZ2V0U2VsZWN0ZWRJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgcmV0dXJuIHRoYXQuc2VsZWN0ZWRJbmRleDtcclxuICAgIC8vIH07XHJcbiAgICAvLyB0aGlzLnNldFNlbGVjdGVkSW5kZXggPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIC8vICAgdGhhdC5zZWxlY3RlZEluZGV4ID0gdmFsdWU7XHJcbiAgICAvLyAgIHRoYXQubW9kZWxDaGFuZ2VkU3ViamVjdC5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIC8vIH07XHJcbiAgfSxcclxuXHJcbiAgVmlldygpIHtcclxuICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zdCBzbGlkZXJCb2R5OiBTbGlkZXJCb2R5ID0gbmV3IFNsaWRlckJvZHkoKTtcclxuICAgICAgc2xpZGVyQm9keS5pbml0KCk7XHJcblxyXG4gICAgICBjb25zdCBzbGlkZXJUaHVtYjogU2xpZGVyVGh1bWIgPSBuZXcgU2xpZGVyVGh1bWIoKTtcclxuICAgICAgc2xpZGVyVGh1bWIuaW5pdCgpO1xyXG5cclxuICAgICAgY29uc3QgdGlwVmFsdWU6IFRpcFZhbHVlID0gbmV3IFRpcFZhbHVlKCk7XHJcbiAgICAgIHRpcFZhbHVlLmluaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhhdC5zZWxlY3QgPSAkKCc8c2VsZWN0Lz4nKS5hcHBlbmRUbyhyb290T2JqZWN0KTtcclxuICAgIC8vIHRoYXQuc2VsZWN0LmF0dHIoJ3NpemUnLCAnNCcpO1xyXG4gICAgLy8gdGhhdC5idXR0b25BZGQgPSAkKCc8YnV0dG9uPis8L2J1dHRvbj4nKS5hcHBlbmRUbyhyb290T2JqZWN0KS5oZWlnaHQoMjApO1xyXG4gICAgLy8gdGhhdC5idXR0b25SZW1vdmUgPSAkKCc8YnV0dG9uPi08L2J1dHRvbj4nKS5hcHBlbmRUbyhyb290T2JqZWN0KS5oZWlnaHQoMjApO1xyXG4gICAgLy8gbW9kZWwubW9kZWxDaGFuZ2VkU3ViamVjdC5hZGRPYnNlcnZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHZhciBpdGVtcyA9IG1vZGVsLmdldEl0ZW1zKCk7XHJcbiAgICAvLyAgIHZhciBpbm5lckhUTUwgPSAnJztcclxuICAgIC8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgLy8gICAgIGlubmVySFRNTCArPSBcIjxvcHRpb24+XCIgKyBpdGVtc1tpXSArIFwiPC9vcHRpb24+XCI7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgdGhhdC5zZWxlY3QuaHRtbChpbm5lckhUTUwpO1xyXG4gICAgLy8gfSk7XHJcbiAgfSxcclxuXHJcbiAgQ29udHJvbGxlcihtb2RlbCwgdmlldykge1xyXG4gICAgdmlldy5pbml0KCk7XHJcbiAgICAvLyB2aWV3LmJ1dHRvbkFkZC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwuYWRkSXRlbShwcm9tcHQoJ2FkZHZhbHVlJykpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyB2aWV3LmJ1dHRvblJlbW92ZS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgbW9kZWwucmVtb3ZlQ3VycmVudEl0ZW0oKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gdmlldy5zZWxlY3QuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIG1vZGVsLnNldFNlbGVjdGVkSW5kZXgodmlldy5zZWxlY3RbMF0uc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAvLyB9KTtcclxuICB9LFxyXG59OyAqL1xyXG5cclxuLyogJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBtb2RlbCA9IG5ldyBPTVZDLk1vZGVsKCk7XHJcbiAgdmFyIHZpZXcgPSBuZXcgT01WQy5WaWV3KG1vZGVsLCAkKCc8ZGl2Lz4nKS5hcHBlbmRUbygkKFwiYm9keVwiKSkpO1xyXG4gIHZhciBjb250cm9sbGVyID0gbmV3IE9NVkMuQ29udHJvbGxlcihtb2RlbCwgdmlldyk7XHJcbn0pOyAqL1xyXG5cclxuLy8gY29uc3QgbW9kZWwgPSBuZXcgTVZQLk1vZGVsKCk7XHJcbi8vIGNvbnN0IHZpZXcgPSBuZXcgTVZQLlZpZXcoKTtcclxuLy8gY29uc3QgY29udHJvbGxlciA9IG5ldyBNVlAuQ29udHJvbGxlcihtb2RlbCwgdmlldyk7XHJcblxyXG4vLyBjb250cm9sbGVyKCk7XHJcbiIsIi8vIGltcG9ydCB7IFN1YmplY3QgfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCBTdWJqZWN0IGZyb20gJy4vYXBwJztcclxuaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICcuL3ByZXNlbnRlcic7XHJcblxyXG50eXBlIG9wdGlvbnMgPSB7XHJcbiAgbWluPzogbnVtYmVyO1xyXG4gIG1heD86IG51bWJlcjtcclxuICBzdGVwPzogbnVtYmVyO1xyXG4gIGtpbmQ/OiBzdHJpbmc7XHJcbiAgaXNCYXNpYz86IGJvb2xlYW47XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RlbCBpbXBsZW1lbnRzIFN1YmplY3Qge1xyXG4gIHByaXZhdGUgX21pbjogbnVtYmVyO1xyXG4gIHByaXZhdGUgX21heDogbnVtYmVyO1xyXG4gIHByaXZhdGUgX3N0ZXA6IG51bWJlcjtcclxuICBwcml2YXRlIF9raW5kOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfaXNCYXNpYzogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IG9wdGlvbnMpIHtcclxuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9XHJcbiAgICB0aGlzLl9taW4gPSBvcHRpb25zLm1pbiA/IG9wdGlvbnMubWluIDogMDtcclxuICAgIHRoaXMuX21heCA9IG9wdGlvbnMubWF4ID8gb3B0aW9ucy5tYXggOiAzMDA7XHJcbiAgICB0aGlzLl9zdGVwID0gb3B0aW9ucy5zdGVwID8gb3B0aW9ucy5zdGVwIDogNTA7XHJcbiAgICB0aGlzLl9raW5kID0gb3B0aW9ucy5raW5kID8gb3B0aW9ucy5raW5kIDogJ2hvcml6b250YWwnO1xyXG4gICAgdGhpcy5faXNCYXNpYyA9IG9wdGlvbnMuaXNCYXNpYyA/IG9wdGlvbnMuaXNCYXNpYyA6IHRydWU7XHJcbiAgICAvLyB0aGlzLm5vdGlmeSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09ic2VydmVyW119INCh0L/QuNGB0L7QuiDQv9C+0LTQv9C40YHRh9C40LrQvtCyLiDQkiDRgNC10LDQu9GM0L3QvtC5INC20LjQt9C90Lgg0YHQv9C40YHQvtC6XHJcbiAgICog0L/QvtC00L/QuNGB0YfQuNC60L7QsiDQvNC+0LbQtdGCINGF0YDQsNC90LjRgtGM0YHRjyDQsiDQsdC+0LvQtdC1INC/0L7QtNGA0L7QsdC90L7QvCDQstC40LTQtSAo0LrQu9Cw0YHRgdC40YTQuNGG0LjRgNGD0LXRgtGB0Y8g0L/QvlxyXG4gICAqINGC0LjQv9GDINGB0L7QsdGL0YLQuNGPINC4INGCLtC0LilcclxuICAgKi9cclxuICBwcml2YXRlIG9ic2VydmVyczogT2JzZXJ2ZXJbXSA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiDQnNC10YLQvtC00Ysg0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QvtC00L/QuNGB0LrQvtC5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRhY2gob2JzZXJ2ZXI6IE9ic2VydmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBpc0V4aXN0ID0gdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpO1xyXG4gICAgaWYgKGlzRXhpc3QpIHtcclxuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdNb2RlbDogUHJlc2VudGVyIGhhcyBiZWVuIGF0dGFjaGVkIGFscmVhZHkuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ01vZGVsOiBBdHRhY2hlZCBhIHByZXNlbnRlci4nKTtcclxuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRldGFjaChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IG9ic2VydmVySW5kZXggPSB0aGlzLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcclxuICAgIGlmIChvYnNlcnZlckluZGV4ID09PSAtMSkge1xyXG4gICAgICByZXR1cm4gY29uc29sZS5sb2coJ1N1YmplY3Q6IE5vbmV4aXN0ZW50IG9ic2VydmVyLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShvYnNlcnZlckluZGV4LCAxKTtcclxuICAgIGNvbnNvbGUubG9nKCdTdWJqZWN0OiBEZXRhY2hlZCBhbiBvYnNlcnZlci4nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINCX0LDQv9GD0YHQuiDQvtCx0L3QvtCy0LvQtdC90LjRjyDQsiDQutCw0LbQtNC+0Lwg0L/QvtC00L/QuNGB0YfQuNC60LUuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGlmeSgpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCdNb2RlbDogTm90aWZ5aW5nIG9ic2VydmVycy4uLicpO1xyXG4gICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiB0aGlzLm9ic2VydmVycykge1xyXG4gICAgICBvYnNlcnZlci51cGRhdGUodGhpcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYWxjVW5pdCgpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGBNb2RlbDogTXkgc3RhdGUgaGFzIGp1c3QgY2hhbmdlZGApO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1pbjogdGhpcy5fbWluLFxyXG4gICAgICBtYXg6IHRoaXMuX21heCxcclxuICAgICAgc3RlcDogdGhpcy5fc3RlcFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIiwiLy8gaW1wb3J0IHsgU3ViamVjdCwgQ29uY3JldGVTdWJqZWN0IH0gZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgU3ViamVjdCBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCBTbGlkZXJCb2R5IGZyb20gJy4vc2xpZGVyQm9keSc7XHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJztcclxuaW1wb3J0IFZpZXcgZnJvbSAnLi92aWV3JztcclxuLyoqXHJcbiog0JjQvdGC0LXRgNGE0LXQudGBINCd0LDQsdC70Y7QtNCw0YLQtdC70Y8g0L7QsdGK0Y/QstC70Y/QtdGCINC80LXRgtC+0LQg0YPQstC10LTQvtC80LvQtdC90LjRjywg0LrQvtGC0L7RgNGL0Lkg0LjQt9C00LDRgtC10LvQuFxyXG4qINC40YHQv9C+0LvRjNC30YPRjtGCINC00LvRjyDQvtC/0L7QstC10YnQtdC90LjRjyDRgdCy0L7QuNGFINC/0L7QtNC/0LjRgdGH0LjQutC+0LIuXHJcbiovXHJcbmludGVyZmFjZSBPYnNlcnZlciB7XHJcbiAgLy8g0J/QvtC70YPRh9C40YLRjCDQvtCx0L3QvtCy0LvQtdC90LjQtSDQvtGCINGB0YPQsdGK0LXQutGC0LAuXHJcbiAgdXBkYXRlKHN1YmplY3Q6IFN1YmplY3QpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuKiDQmtC+0L3QutGA0LXRgtC90YvQtSDQndCw0LHQu9GO0LTQsNGC0LXQu9C4INGA0LXQsNCz0LjRgNGD0Y7RgiDQvdCwINC+0LHQvdC+0LLQu9C10L3QuNGPLCDQstGL0L/Rg9GJ0LXQvdC90YvQtSDQmNC30LTQsNGC0LXQu9C10LwsINC6XHJcbiog0LrQvtGC0L7RgNC+0LzRgyDQvtC90Lgg0L/RgNC40LrRgNC10L/Qu9C10L3Riy5cclxuKi9cclxuLy8gY2xhc3MgQ29uY3JldGVPYnNlcnZlckEgaW1wbGVtZW50cyBPYnNlcnZlciB7XHJcbi8vICAgcHVibGljIHVwZGF0ZShzdWJqZWN0OiBTdWJqZWN0KTogdm9pZCB7XHJcbi8vICAgICBpZiAoc3ViamVjdCBpbnN0YW5jZW9mIENvbmNyZXRlU3ViamVjdCAmJiBzdWJqZWN0LnN0YXRlIDwgMykge1xyXG4vLyAgICAgICBjb25zb2xlLmxvZygnQ29uY3JldGVPYnNlcnZlckE6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH1cclxuLy8gfVxyXG5cclxuY2xhc3MgUHJlc2VudGVyIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4gIG1vZGVsT3B0aW9uczoge21pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgc3RlcDogbnVtYmVyfTtcclxuXHJcbiAgdHJhbnNmZXJNb2RlbERhdGEobW9kZWw6IE1vZGVsLCB2aWV3OiBWaWV3KSB7XHJcbiAgICB0aGlzLm1vZGVsT3B0aW9ucyA9IG1vZGVsLmNhbGNVbml0KCk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLm1vZGVsT3B0aW9ucyk7XHJcbiAgICB2aWV3LnNob3dTY2FsZSh0aGlzLm1vZGVsT3B0aW9ucy5taW4sIHRoaXMubW9kZWxPcHRpb25zLm1heCwgdGhpcy5tb2RlbE9wdGlvbnMuc3RlcCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnTW9kZWxPYnNlcnZlcjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XHJcbiAgICAvLyBpZiAobW9kZWwgaW5zdGFuY2VvZiBNb2RlbCkge1xyXG4gICAgLy8gICB0aGlzLm1vZGVsT3B0aW9ucyA9IG1vZGVsLmNhbGNVbml0KCk7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWxPcHRpb25zKTtcclxuICAgICAgLy8gY29uc3QgdmlldyA9IG5ldyBWaWV3KCk7XHJcbiAgICAgIC8vIHZpZXcuc2hvd1NjYWxlKHRoaXMubW9kZWxPcHRpb25zLm1pbiwgdGhpcy5tb2RlbE9wdGlvbnMubWF4LCB0aGlzLm1vZGVsT3B0aW9ucy5zdGVwKTtcclxuICAgICAgLy8gY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgLy8gdHJhbnNmZXIoKSB7XHJcbiAgLy8gICBjb25zdCB2aWV3OiBWaWV3ID0gbmV3IFZpZXcoKTtcclxuICAgIC8vIHJldHVybiB2aWV3LmdldFdpZHRoU2xpZGVyKCk7XHJcbiAgLy8gfVxyXG5cclxuICB1cGRhdGUobW9kZWw6IE1vZGVsKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTW9kZWxPYnNlcnZlcjogUmVhY3RlZCB0byB0aGUgZXZlbnQuJyk7XHJcbiAgICAvLyBpZiAobW9kZWwgaW5zdGFuY2VvZiBNb2RlbCkge1xyXG4gICAgLy8gICB0aGlzLm1vZGVsT3B0aW9ucyA9IG1vZGVsLmNhbGNVbml0KCk7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWxPcHRpb25zKTtcclxuICAgIC8vICAgY29uc3QgdmlldyA9IG5ldyBWaWV3KCk7XHJcbiAgICAvLyAgIHZpZXcuc2hvd1NjYWxlKHRoaXMubW9kZWxPcHRpb25zLm1pbiwgdGhpcy5tb2RlbE9wdGlvbnMubWF4LCB0aGlzLm1vZGVsT3B0aW9ucy5zdGVwKTtcclxuICAgIC8vICAgY29uc29sZS5sb2coJ01vZGVsT2JzZXJ2ZXI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4gICAgLy8gfVxyXG4gIH1cclxufVxyXG5cclxuLy8gY2xhc3MgVmlld09ic2VydmVyIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4vLyAgIHVwZGF0ZSh2aWV3KSB7XHJcblxyXG4vLyAgIH1cclxuLy8gfVxyXG5cclxuLy8gY2xhc3MgQ29uY3JldGVPYnNlcnZlckIgaW1wbGVtZW50cyBPYnNlcnZlciB7XHJcbi8vICAgaXNTdWJqZWN0U2F0aXNmaWVzKHN1YmplY3QpIHtcclxuLy8gICAgIHJldHVybiBzdWJqZWN0IGluc3RhbmNlb2YgQ29uY3JldGVTdWJqZWN0ICYmIChzdWJqZWN0LnN0YXRlID09PSAwIHx8IHN1YmplY3Quc3RhdGUgPj0gMik7XHJcbi8vICAgfVxyXG5cclxuLy8gICBwdWJsaWMgdXBkYXRlKHN1YmplY3Q6IFN1YmplY3QpOiB2b2lkIHtcclxuLy8gICAgIGlmICh0aGlzLmlzU3ViamVjdFNhdGlzZmllcyhzdWJqZWN0KSkge1xyXG4vLyAgICAgICBjb25zb2xlLmxvZygnQ29uY3JldGVPYnNlcnZlckI6IFJlYWN0ZWQgdG8gdGhlIGV2ZW50LicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH1cclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IHsgT2JzZXJ2ZXIsIENvbmNyZXRlT2JzZXJ2ZXJBLCBDb25jcmV0ZU9ic2VydmVyQiwgUHJlc2VudGVyIH07XHJcbmV4cG9ydCB7IE9ic2VydmVyLCBQcmVzZW50ZXIgfTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==